{"version":3,"sources":["../../src/utils/ComposeUtils.js"],"names":[],"mappings":";;;QAIgB,e,GAAA,e;QAsCA,iB,GAAA,iB;;;;;AAtCT,SAAS,eAAT,CAAyB,IAAzB,EAA+B;AACpC,MAAM,UAAU,oBAAoB,IAApB,CAAyB,IAAzB,CAAhB;AACA,MAAI,CAAC,OAAL,EAAc;AACZ,WAAO,IAAP;AACD;;AAED,SAAO;AACL,UAAM,QAAQ,CAAR,CADD;AAEL,UAAM,QAAQ,CAAR;AAFD,GAAP;AAID;;AAED,SAAS,kBAAT,CAA4B,OAA5B,EAAqC,KAArC,EAA4C,QAA5C,EAAsD;AACpD,MAAI,QAAQ,MAAR,KAAmB,CAAvB,EAA0B;AACxB,WAAO,IAAP;AACD,GAFD,MAEO;AACL,QAAM,WAAW,QAAQ,MAAR,CAAe,QAAQ,MAAR,GAAiB,CAAhC,CAAjB;AACA,QAAI,aAAa,GAAjB,EAAsB;AACpB,UAAM,eAAe,QAAQ,MAAR,CAAe,QAAQ,MAAR,GAAiB,CAAhC,CAArB;AACA,UAAI,aAAa,IAAb,OAAwB,EAA5B,EAAgC;AAC9B,YAAM,OAAQ,SAAS,EAAvB;AACA,YAAM,UAAU,KAAK,MAAL,GAAc,CAAd,KAAoB,QAApC;;AAEA,eAAO;AACL,gBAAM,IADD;AAEL,mBAAS;AAFJ,SAAP;AAID,OARD,MAQO;AACL,eAAO,IAAP;AACD;AACF,KAbD,MAaO,IAAI,SAAS,IAAT,OAAoB,EAAxB,EAA4B;AACjC,aAAO,IAAP;AACD,KAFM,MAEA;AACL,aAAO,mBAAmB,QAAQ,SAAR,CAAkB,CAAlB,EAAqB,QAAQ,MAAR,GAAiB,CAAtC,CAAnB,EAA6D,YAAY,SAAS,EAArB,CAA7D,EAAuF,QAAvF,CAAP;AACD;AACF;AACF;;AAEM,SAAS,iBAAT,CAA2B,IAA3B,EAAiC,QAAjC,EAA2C;AAChD,SAAO,mBAAmB,KAAK,SAAL,CAAe,CAAf,EAAkB,QAAlB,CAAnB,EAAgD,IAAhD,EAAsD,QAAtD,CAAP;AACD","file":"ComposeUtils.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nexport function parseBotCommand(text) {\n  const matches = /^\\/(.)?(?: (.+))?/.exec(text);\n  if (!matches) {\n    return null;\n  }\n\n  return {\n    name: matches[1],\n    args: matches[2]\n  };\n}\n\nfunction _parseMentionQuery(runText, query, position) {\n  if (runText.length === 0) {\n    return null;\n  } else {\n    const lastChar = runText.charAt(runText.length - 1);\n    if (lastChar === '@') {\n      const charBeforeAt = runText.charAt(runText.length - 2);\n      if (charBeforeAt.trim() === '') {\n        const text = (query || '');\n        const atStart = text.length + 1 === position;\n\n        return {\n          text: text,\n          atStart: atStart\n        };\n      } else {\n        return null;\n      }\n    } else if (lastChar.trim() === '') {\n      return null;\n    } else {\n      return _parseMentionQuery(runText.substring(0, runText.length - 1), lastChar + (query || ''), position);\n    }\n  }\n}\n\nexport function parseMentionQuery(text, position) {\n  return _parseMentionQuery(text.substring(0, position), null, position);\n}\n"]}