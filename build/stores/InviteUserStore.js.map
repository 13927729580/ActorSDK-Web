{"version":3,"sources":["../../src/stores/InviteUserStore.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAIA;;AACA;;AACA;;;;AACA;;AAEA;;;;;;IAEM;;;;;;;;4BACJ,6CAAkB;AAChB,WAAO;AACL,cAAQ,KAAR;AACA,0BAAoB,KAApB;AACA,aAAO,IAAP;AACA,iBAAW,IAAX;AACA,aAAO,oBAAP;KALF,CADgB;;;AADd,4BAWJ,yBAAO,OAAO,QAAQ;AACpB,YAAO,OAAO,IAAP;AACL,WAAK,+BAAY,mBAAZ;AACH,0CACK;AACH,iBAAO,OAAO,IAAP;UAFT,CADF;AADF,WAMO,+BAAY,sBAAZ;AACH,0CACK;AACH,kBAAQ,IAAR;AACA,iBAAO,OAAO,KAAP;UAHT,CADF;AANF,WAYO,+BAAY,sBAAZ;AACH,0CACK;AACH,kBAAQ,KAAR;AACA,iBAAO,MAAM,KAAN,CAAY,KAAZ,EAAP;UAHF,CADF;AAZF,WAkBO,+BAAY,8BAAZ;AACH,0CACK;AACH,8BAAoB,IAApB;AACA,iBAAO,OAAO,KAAP;AACP,qBAAW,OAAO,GAAP;UAJb,CADF;AAlBF,WAyBO,+BAAY,8BAAZ;AACH,0CACK;AACH,8BAAoB,KAApB;UAFF,CADF;;;AAzBF,WAgCO,+BAAY,WAAZ;AACH,0CACK;AACH,iBAAO,MAAM,KAAN,CAAY,GAAZ,CAAgB,OAAO,GAAP,EAAY,qCAAkB,UAAlB,CAAnC;UAFF,CADF;AAhCF,WAqCO,+BAAY,mBAAZ;AACH,0CACK;AACH,iBAAO,MAAM,KAAN,CAAY,GAAZ,CAAgB,OAAO,GAAP,EAAY,qCAAkB,OAAlB,CAAnC;UAFF,CADF;AArCF,WA0CO,+BAAY,iBAAZ;AACH,0CACK;AACH,iBAAO,MAAM,KAAN,CAAY,GAAZ,CAAgB,OAAO,GAAP,EAAY,qCAAkB,OAAlB,CAAnC;UAFF,CADF;AA1CF,WA+CO,+BAAY,iBAAZ;AACH,0CACK;AACH,iBAAO,MAAM,KAAN,CAAY,MAAZ,CAAmB,OAAO,GAAP,CAA1B;UAFF,CADF;AA/CF;AAqDI,eAAO,KAAP,CADF;AApDF,KADoB;;;AAXlB,4BAqEJ,qCAAc;AACZ,WAAO,KAAK,QAAL,GAAgB,MAAhB,CADK;;;AArEV,4BAyEJ,iEAA4B;AAC1B,WAAO,KAAK,QAAL,GAAgB,kBAAhB,CADmB;;;AAzExB,4BA6EJ,+BAAW;AACT,WAAO,KAAK,QAAL,GAAgB,KAAhB,CADE;;;AA7EP,4BAiFJ,uCAAe;AACb,WAAO,KAAK,QAAL,GAAgB,SAAhB,CADM;;;AAjFX,4BAqFJ,iDAAmB,KAAK;oBACJ,KAAK,QAAL,GADI;;QACd,wBADc;;AAEtB,WAAO,MAAM,GAAN,CAAU,GAAV,KAAkB,qCAAkB,OAAlB,CAFH;;;SArFpB;;;;;kBA2FS,IAAI,eAAJ","file":"InviteUserStore.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { ReduceStore } from 'flux/utils';\nimport { Map } from 'immutable';\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes, AsyncActionStates } from '../constants/ActorAppConstants';\n\nimport ActorClient from '../utils/ActorClient';\n\nclass InviteUserStore extends ReduceStore {\n  getInitialState() {\n    return {\n      isOpen: false,\n      isInviteByLinkOpen: false,\n      group: null,\n      inviteUrl: null,\n      users: new Map()\n    };\n  }\n\n  reduce(state, action) {\n    switch(action.type) {\n      case ActionTypes.DIALOG_INFO_CHANGED:\n        return {\n          ...state,\n          group: action.info\n        };\n      case ActionTypes.INVITE_USER_MODAL_SHOW:\n        return {\n          ...state,\n          isOpen: true,\n          group: action.group\n        };\n      case ActionTypes.INVITE_USER_MODAL_HIDE:\n        return {\n          ...state,\n          isOpen: false,\n          users: state.users.clear()\n        };\n      case ActionTypes.INVITE_USER_BY_LINK_MODAL_SHOW:\n        return {\n          ...state,\n          isInviteByLinkOpen: true,\n          group: action.group,\n          inviteUrl: action.url\n        };\n      case ActionTypes.INVITE_USER_BY_LINK_MODAL_HIDE:\n        return {\n          ...state,\n          isInviteByLinkOpen: false\n        };\n\n      // Invite user\n      case ActionTypes.INVITE_USER:\n        return {\n          ...state,\n          users: state.users.set(action.uid, AsyncActionStates.PROCESSING)\n        };\n      case ActionTypes.INVITE_USER_SUCCESS:\n        return {\n          ...state,\n          users: state.users.set(action.uid, AsyncActionStates.SUCCESS)\n        };\n      case ActionTypes.INVITE_USER_ERROR:\n        return {\n          ...state,\n          users: state.users.set(action.uid, AsyncActionStates.FAILURE)\n        };\n      case ActionTypes.INVITE_USER_RESET:\n        return {\n          ...state,\n          users: state.users.delete(action.uid)\n        };\n      default:\n        return state;\n    }\n  }\n\n  isModalOpen() {\n    return this.getState().isOpen;\n  }\n\n  isInviteWithLinkModalOpen() {\n    return this.getState().isInviteByLinkOpen;\n  }\n\n  getGroup() {\n    return this.getState().group;\n  }\n\n  getInviteUrl() {\n    return this.getState().inviteUrl;\n  }\n\n  getInviteUserState(uid) {\n    const { users } = this.getState();\n    return users.get(uid) || AsyncActionStates.PENDING;\n  }\n}\n\nexport default new InviteUserStore(Dispatcher);\n"]}