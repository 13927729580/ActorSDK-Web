{"version":3,"sources":["../../src/stores/CreateGroupStore.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWA,IAAI,UAAU,GAAG,KAAK;IAClB,YAAY,GAAG,oCAAiB,UAAU;IAC1C,UAAU,GAAG,EAAE;IACf,gBAAgB,GAAG,IAAI,oBAAU,GAAG,EAAE,CAAC;;IAErC,gBAAgB;YAAhB,gBAAgB;;AACpB,WADI,gBAAgB,CACR,UAAU,EAAE;0BADpB,gBAAgB;;4CAElB,kBAAM,UAAU,CAAC;GAClB;;AAHG,kBAAgB,WAKpB,WAAW,0BAAG;AACZ,WAAO,UAAU,CAAC;GACnB;;AAPG,kBAAgB,WASpB,cAAc,6BAAG;AACf,WAAO,YAAY,CAAC;GACrB;;AAXG,kBAAgB,WAapB,YAAY,2BAAG;AACb,WAAO,UAAU,CAAC;GACnB;;AAfG,kBAAgB,WAiBpB,kBAAkB,iCAAG;AACnB,WAAO,gBAAgB,CAAC;GACzB;;AAnBG,kBAAgB,WAqBpB,UAAU,yBAAG;AACX,cAAU,GAAG,KAAK,CAAC;AACnB,gBAAY,GAAG,oCAAiB,UAAU,CAAC;AAC3C,cAAU,GAAG,EAAE,CAAC;AAChB,oBAAgB,GAAG,IAAI,oBAAU,GAAG,EAAE,CAAC;GACxC;;AA1BG,kBAAgB,WA4BpB,YAAY,yBAAC,MAAM,EAAE;AACnB,YAAQ,MAAM,CAAC,IAAI;;AAEjB,WAAK,+BAAY,uBAAuB;AACtC,kBAAU,GAAG,IAAI,CAAC;AAClB,YAAI,CAAC,YAAY,EAAE,CAAC;AACpB,cAAM;AAAA,AACR,WAAK,+BAAY,wBAAwB;AACvC,YAAI,CAAC,UAAU,EAAE,CAAC;AAClB,YAAI,CAAC,YAAY,EAAE,CAAC;AACpB,cAAM;;AAAA,AAER,WAAK,+BAAY,qBAAqB;AACpC,oBAAY,GAAG,oCAAiB,kBAAkB,CAAC;AACnD,kBAAU,GAAG,MAAM,CAAC,IAAI,CAAC;AACzB,YAAI,CAAC,YAAY,EAAE,CAAC;AACpB,cAAM;;;;;;;AAAA,AAOR,WAAK,+BAAY,wBAAwB;AACvC,wBAAgB,GAAG,MAAM,CAAC,eAAe,CAAC;AAC1C,YAAI,CAAC,YAAY,EAAE,CAAC;AACpB,cAAM;;AAAA,AAER,WAAK,+BAAY,YAAY;AAC3B,oBAAY,GAAG,oCAAiB,gBAAgB,CAAC;AACjD,YAAI,CAAC,YAAY,EAAE,CAAC;AACpB,cAAM;AAAA,AACR,WAAK,+BAAY,oBAAoB;AACnC,YAAI,CAAC,UAAU,EAAE,CAAC;AAClB,YAAI,CAAC,YAAY,EAAE,CAAC;AACpB,cAAM;AAAA,AACR,WAAK,+BAAY,kBAAkB;AACjC,eAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;AACtD,YAAI,CAAC,YAAY,EAAE,CAAC;AACpB,cAAM;AAAA,KACT;GACF;;SArEG,gBAAgB;;;kBAwEP,IAAI,gBAAgB,8BAAY","file":"CreateGroupStore.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport Immutable from 'immutable';\nimport keymirror from 'keymirror';\n\nimport { Store } from 'flux/utils';\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes, CreateGroupSteps } from '../constants/ActorAppConstants';\n\nlet _modalOpen = false,\n    _currentStep = CreateGroupSteps.NAME_INPUT,\n    _groupName = '',\n    _selectedUserIds = new Immutable.Set();\n\nclass CreateGroupStore extends Store {\n  constructor(dispatcher) {\n    super(dispatcher);\n  }\n\n  isModalOpen() {\n    return _modalOpen;\n  }\n\n  getCurrentStep() {\n    return _currentStep;\n  }\n\n  getGroupName() {\n    return _groupName;\n  }\n\n  getSelectedUserIds() {\n    return _selectedUserIds;\n  }\n\n  resetStore() {\n    _modalOpen = false;\n    _currentStep = CreateGroupSteps.NAME_INPUT;\n    _groupName = '';\n    _selectedUserIds = new Immutable.Set();\n  }\n\n  __onDispatch(action) {\n    switch (action.type) {\n\n      case ActionTypes.GROUP_CREATE_MODAL_OPEN:\n        _modalOpen = true;\n        this.__emitChange();\n        break;\n      case ActionTypes.GROUP_CREATE_MODAL_CLOSE:\n        this.resetStore();\n        this.__emitChange();\n        break;\n\n      case ActionTypes.GROUP_CREATE_SET_NAME:\n        _currentStep = CreateGroupSteps.CONTACTS_SELECTION;\n        _groupName = action.name;\n        this.__emitChange();\n        break;\n\n      //case ActionTypes.GROUP_CREATE_SET_AVATAR:\n      //  _avatar = action.avatar;\n      //  this.__emitChange();\n      //  break;\n\n      case ActionTypes.GROUP_CREATE_SET_MEMBERS:\n        _selectedUserIds = action.selectedUserIds;\n        this.__emitChange();\n        break;\n\n      case ActionTypes.GROUP_CREATE:\n        _currentStep = CreateGroupSteps.CREATION_STARTED;\n        this.__emitChange();\n        break;\n      case ActionTypes.GROUP_CREATE_SUCCESS:\n        this.resetStore();\n        this.__emitChange();\n        break;\n      case ActionTypes.GROUP_CREATE_ERROR:\n        console.error('Failed to create group', action.error);\n        this.__emitChange();\n        break;\n    }\n  };\n}\n\nexport default new CreateGroupStore(Dispatcher);\n"]}