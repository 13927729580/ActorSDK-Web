{"version":3,"sources":["../../src/actions/JoinGroupActions.js"],"names":[],"mappings":";;;;AAIA;;AACA;;AACA;;;;AACA;;;;AAEA;;;;;;AAEA,IAAM,UAAU,oBAAhB,C;;;;kBAEe;AACb,kBADa,4BACI,KADJ,EACW;AACtB,QAAM,MAAM,UAAU,QAAV,GAAqB,KAAjC;;AAEA,QAAM,cAAc,SAAd,WAAc;AAAA,aAAM,uCAAc,sBAAY,gBAAZ,CAA6B,GAA7B,CAAd,EAAiD;AACzE,iBAAS,+BAAY,mBADoD;AAEzE,iBAAS,+BAAY,2BAFoD;AAGzE,iBAAS,+BAAY;AAHoD,OAAjD,EAIvB,EAAE,YAAF,EAJuB,CAAN;AAAA,KAApB;;AAMA,QAAM,eAAe,SAAf,YAAe,CAAC,IAAD,EAAU;AAC7B,UAAI,IAAJ,EAAU;AACR,uCAAqB,gBAArB,CAAsC,IAAtC;AACD,OAFD,MAEO;AACL,cAAM,IAAI,KAAJ,EAAN;AACD;AACF,KAND;;AAQA,QAAM,SAAS,SAAT,MAAS;AAAA,aAAM,kBAAQ,OAAR,CAAgB,GAAhB,CAAN;AAAA,KAAf;;AAEA,kBACG,IADH,CACQ,YADR,EAEG,KAFH,CAES,MAFT;AAGD;AAvBY,C","file":"JoinGroupActions.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { dispatchAsync } from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes } from '../constants/ActorAppConstants';\nimport ActorClient from '../utils/ActorClient';\nimport history from '../utils/history';\n\nimport DialogActionCreators from './DialogActionCreators';\n\nconst urlBase = 'https://quit.email';\n\nexport default {\n  joinGroupViaLink(token) {\n    const url = urlBase + '/join/' + token;\n\n    const joinViaLink = () => dispatchAsync(ActorClient.joinGroupViaLink(url), {\n      request: ActionTypes.GROUP_JOIN_VIA_LINK,\n      success: ActionTypes.GROUP_JOIN_VIA_LINK_SUCCESS,\n      failure: ActionTypes.GROUP_JOIN_VIA_LINK_ERROR\n    }, { token });\n\n    const selectJoined = (peer) => {\n      if (peer) {\n        DialogActionCreators.selectDialogPeer(peer);\n      } else {\n        throw new Error();\n      }\n    };\n\n    const goHome = () => history.replace('/');\n\n    joinViaLink()\n      .then(selectJoined)\n      .catch(goHome)\n  }\n};\n"]}