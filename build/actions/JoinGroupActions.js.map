{"version":3,"sources":["../../src/actions/JoinGroupActions.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAWA,IAAM,OAAO,GAAG,oBAAoB;;;;AAAC,kBAEtB;AACb,kBAAgB,4BAAC,KAAK,EAAE;AACtB,QAAM,GAAG,GAAG,OAAO,GAAG,QAAQ,GAAG,KAAK,CAAC;;AAEvC,QAAM,WAAW,GAAG,SAAd,WAAW;aAAS,wBAbrB,aAAa,EAasB,sBAAY,gBAAgB,CAAC,GAAG,CAAC,EAAE;AACzE,eAAO,EAAE,mBAbN,WAAW,CAaO,mBAAmB;AACxC,eAAO,EAAE,mBAdN,WAAW,CAcO,2BAA2B;AAChD,eAAO,EAAE,mBAfN,WAAW,CAeO,yBAAyB;OAC/C,EAAE,EAAE,KAAK,EAAL,KAAK,EAAE,CAAC;KAAA,CAAC;;AAEd,QAAM,YAAY,GAAG,SAAf,YAAY,CAAI,IAAI;aAAK,+BAAqB,gBAAgB,CAAC,IAAI,CAAC;KAAA,CAAC;AAC3E,QAAM,MAAM,GAAG,SAAT,MAAM;aAAS,0BAAgB,GAAG,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC;KAAA,CAAC;;AAE5D,eAAW,EAAE,CACV,IAAI,CAAC,YAAY,CAAC,CAClB,KAAK,CAAC,MAAM,CAAC,CAAA;GACjB;CACF","file":"JoinGroupActions.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { dispatchAsync } from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes } from '../constants/ActorAppConstants';\nimport ActorClient from '../utils/ActorClient';\nimport RouterContainer from '../utils/RouterContainer';\n\nimport DialogActionCreators from './DialogActionCreators';\n\nconst urlBase = 'https://quit.email';\n\nexport default {\n  joinGroupViaLink(token) {\n    const url = urlBase + '/join/' + token;\n\n    const joinViaLink = () => dispatchAsync(ActorClient.joinGroupViaLink(url), {\n      request: ActionTypes.GROUP_JOIN_VIA_LINK,\n      success: ActionTypes.GROUP_JOIN_VIA_LINK_SUCCESS,\n      failure: ActionTypes.GROUP_JOIN_VIA_LINK_ERROR\n    }, { token });\n\n    const selectJoined = (peer) => DialogActionCreators.selectDialogPeer(peer);\n    const goHome = () => RouterContainer.get().replaceWith('/');\n\n    joinViaLink()\n      .then(selectJoined)\n      .catch(goHome)\n  }\n};\n"]}