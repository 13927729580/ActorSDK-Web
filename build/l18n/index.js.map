{"version":3,"sources":["../../src/l18n/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport assignDeep from 'assign-deep';\nimport DelegateContainer from '../utils/DelegateContainer';\n\nimport russian from './ru-RU';\nimport english from './en-US';\nimport spanish from './es-ES';\nimport portuguese from './pt-BR';\nimport chinese from './zh-CN';\n\nimport { addLocaleData } from 'react-intl';\n\nimport enLocaleData from 'react-intl/lib/locale-data/en';\nimport ruLocaleData from 'react-intl/lib/locale-data/ru';\nimport esLocaleData from 'react-intl/lib/locale-data/es';\nimport ptLocaleData from 'react-intl/lib/locale-data/pt';\nimport zhLocaleData from 'react-intl/lib/locale-data/zh';\n\naddLocaleData(enLocaleData);\naddLocaleData(ruLocaleData);\naddLocaleData(esLocaleData);\naddLocaleData(ptLocaleData);\naddLocaleData(zhLocaleData);\n\nlet language = navigator.language.toLocaleLowerCase() || navigator.browserLanguage.toLocaleLowerCase();\nif (language === 'zh-cn') language = 'zh';\n\nfunction buildMessages(defaultLanguage, language) {\n  if (process.env.NODE_ENV === 'development') {\n    const flattenDefault = flattenMessages(defaultLanguage.messages);\n    const flattenLanguage = flattenMessages(language.messages);\n    const missingKeys = Object.keys(flattenDefault).filter((key) => !flattenLanguage[key])\n    if (missingKeys.length) {\n      const groupMessage = `There are missing transations for \"${language.locale}\" locale.`;\n      console.groupCollapsed(groupMessage);\n      missingKeys.forEach((key) => {\n        console.warn(`${key}: ${flattenDefault[key]}`);\n      });\n      console.groupEnd(groupMessage);\n    }\n  }\n\n  language.messages = assignDeep({}, defaultLanguage.messages, language.messages);\n}\n\n// Fallback to default language\nconst defaultLanguage = english;\nbuildMessages(defaultLanguage, russian);\nbuildMessages(defaultLanguage, spanish);\nbuildMessages(defaultLanguage, portuguese);\nbuildMessages(defaultLanguage, chinese);\n\n// Set language data\nconst languageData = {\n  'default': defaultLanguage,\n  'ru': russian,\n  'en': english,\n  'es': spanish,\n  'pt': portuguese,\n  'zh': chinese\n};\n\n// Extend language data from delegate\nexport function extendL18n() {\n  const delegate = DelegateContainer.get();\n\n  english.messages = delegate.l18n.english ? assignDeep({}, english.messages, delegate.l18n.default.messages, delegate.l18n.english.messages) : english.messages;\n  russian.messages = delegate.l18n.russian ? assignDeep({}, russian.messages, delegate.l18n.default.messages, delegate.l18n.russian.messages) : russian.messages;\n  spanish.messages = delegate.l18n.spanish ? assignDeep({}, spanish.messages, delegate.l18n.default.messages, delegate.l18n.spanish.messages) : spanish.messages;\n  portuguese.messages = delegate.l18n.portuguese ? assignDeep({}, portuguese.messages, delegate.l18n.default.messages, delegate.l18n.portuguese.messages) : portuguese.messages;\n  chinese.messages = delegate.l18n.chinese ? assignDeep({}, chinese.messages, delegate.l18n.default.messages, delegate.l18n.chinese.messages) : chinese.messages;\n}\n\nfunction flattenMessages(nestedMessages, prefix = '') {\n  return Object.keys(nestedMessages).reduce((messages, key) => {\n    let value = nestedMessages[key];\n    let prefixedKey = prefix ? `${prefix}.${key}` : key;\n\n    if (typeof value === 'string') {\n      messages[prefixedKey] = value;\n    } else {\n      Object.assign(messages, flattenMessages(value, prefixedKey));\n    }\n\n    return messages;\n  }, {});\n}\n\nexport function getIntlData(locale) {\n  const lang = locale ? locale : language;\n  const currentLanguage = languageData[lang] || languageData[lang.split('-')[0]] || languageData['default']\n\n  return {\n    locale: currentLanguage.locale,\n    messages: flattenMessages(currentLanguage.messages)\n  }\n}\n"]}