{"version":3,"sources":["../../src/l18n/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport assignDeep from 'assign-deep';\nimport DelegateContainer from '../utils/DelegateContainer';\n\nimport russian from './ru-RU';\nimport english from './en-US';\nimport spanish from './es-ES';\nimport portuguese from './pt-BR';\nimport chinese from './zh-CN';\n\nimport { addLocaleData } from 'react-intl';\n\nimport enLocaleData from 'react-intl/locale-data/en';\nimport ruLocaleData from 'react-intl/locale-data/ru';\nimport esLocaleData from 'react-intl/locale-data/es';\nimport ptLocaleData from 'react-intl/locale-data/pt';\nimport zhLocaleData from 'react-intl/locale-data/zh';\n\naddLocaleData(enLocaleData);\naddLocaleData(ruLocaleData);\naddLocaleData(esLocaleData);\naddLocaleData(ptLocaleData);\naddLocaleData(zhLocaleData);\n\nlet language = navigator.language.toLocaleLowerCase() || navigator.browserLanguage.toLocaleLowerCase();\nif (language === 'zh-cn') language = 'zh';\n\nfunction buildMessages(defaultLanguage, language) {\n  if (process.env.NODE_ENV === 'development') {\n    const flattenDefault = flattenMessages(defaultLanguage.messages);\n    const flattenLanguage = flattenMessages(language.messages);\n    const missingKeys = Object.keys(flattenDefault).filter((key) => !flattenLanguage[key])\n    if (missingKeys.length) {\n      const groupMessage = `There are missing transations for \"${language.locale}\" locale.`;\n      console.groupCollapsed(groupMessage);\n      missingKeys.forEach((key) => {\n        console.warn(`${key}: ${flattenDefault[key]}`);\n      });\n      console.groupEnd(groupMessage);\n    }\n  }\n\n  language.messages = assignDeep({}, defaultLanguage.messages, language.messages);\n}\n\n// Fallback to default language\nconst defaultLanguage = english;\nbuildMessages(defaultLanguage, russian);\nbuildMessages(defaultLanguage, spanish);\nbuildMessages(defaultLanguage, portuguese);\nbuildMessages(defaultLanguage, chinese);\n\n// Set language data\nconst languageData = {\n  'default': defaultLanguage,\n  'ru': russian,\n  'en': english,\n  'es': spanish,\n  'pt': portuguese,\n  'zh': chinese\n};\n\n// Extend language data from delegate\nexport function extendL18n() {\n  const delegate = DelegateContainer.get();\n\n  english.messages = delegate.l18n.english ? assignDeep({}, english.messages, delegate.l18n.default.messages, delegate.l18n.english.messages) : english.messages;\n  russian.messages = delegate.l18n.russian ? assignDeep({}, russian.messages, delegate.l18n.default.messages, delegate.l18n.russian.messages) : russian.messages;\n  spanish.messages = delegate.l18n.spanish ? assignDeep({}, spanish.messages, delegate.l18n.default.messages, delegate.l18n.spanish.messages) : spanish.messages;\n  portuguese.messages = delegate.l18n.portuguese ? assignDeep({}, portuguese.messages, delegate.l18n.default.messages, delegate.l18n.portuguese.messages) : portuguese.messages;\n  chinese.messages = delegate.l18n.chinese ? assignDeep({}, chinese.messages, delegate.l18n.default.messages, delegate.l18n.chinese.messages) : chinese.messages;\n}\n\nfunction flattenMessages(nestedMessages, prefix = '') {\n  return Object.keys(nestedMessages).reduce((messages, key) => {\n    let value = nestedMessages[key];\n    let prefixedKey = prefix ? `${prefix}.${key}` : key;\n\n    if (typeof value === 'string') {\n      messages[prefixedKey] = value;\n    } else {\n      Object.assign(messages, flattenMessages(value, prefixedKey));\n    }\n\n    return messages;\n  }, {});\n}\n\nexport function getIntlData(locale) {\n  const lang = locale ? locale : language;\n  const currentLanguage = languageData[lang] || languageData[lang.split('-')[0]] || languageData['default']\n\n  return {\n    locale: currentLanguage.locale,\n    messages: flattenMessages(currentLanguage.messages)\n  }\n}\n"]}