{"version":3,"sources":["../../src/components/Dialog.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAIA;;AAEA;;;;AACA;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;IAEM;;;;;;;;gBAKG,iCAAY;AACjB,WAAO,gDAAP,CADiB;;;AALf,gBASG,2CAAiB;AACtB,WAAO;AACL,YAAM,sBAAY,cAAZ,EAAN;AACA,gBAAU,sBAAY,QAAZ,EAAV;AACA,sBAAgB,wBAAc,MAAd,EAAhB;KAHF,CADsB;;;AATpB,0BAiBJ,yCAAgB;gCACa,KAAK,OAAL,CAAa,QAAb,CAAsB,UAAtB,CADb;QACN,sCADM;QACE,sCADF;;AAEd,QAAM,gBAAgB,iCAAhB,CAFQ;AAGd,QAAI,UAAU,CAAC,wBAAW,MAAX,CAAD,EAAqB;AACjC,UAAM,WAAW,OAAO,QAAP,IAAmB,qCAGlC,aAHkC,CAAnB,CADgB;;AAOjC,aAAO;AACL,wBAAgB,OAAO,OAAP,qBAAhB;AACA,yBAAiB,wBAAW,OAAO,QAAP,CAAX,GAA8B,OAAO,QAAP,4BAA9B;AACjB,kBAAU,iBAAI,QAAJ,EAAc,UAAC,QAAD,EAAW,KAAX;iBAAqB,8BAAC,QAAD,IAAU,KAAK,KAAL,EAAV;SAArB,CAAxB;OAHF,CAPiC;KAAnC;;AAcA,WAAO;AACL,uCADK;AAEL,gDAFK;AAGL,gBAAU,CACR,oDAAiB,KAAK,CAAL,EAAjB,CADQ,EAER,gDAAa,KAAK,CAAL,EAAb,CAFQ,EAGR,8BAAC,aAAD,IAAe,KAAK,CAAL,EAAf,CAHQ,CAAV;KAHF,CAjBc;;;AAjBZ,0BA6CJ,2BAAS;iBACsD,KAAK,KAAL,CADtD;QACC,mBADD;QACO,2BADP;QACiB,2BADjB;QAC2B,yBAD3B;QACoC,qCADpC;;yBAOH,KAAK,aAAL,GAPG;;QAIL,+CAJK;QAKL,iDALK;QAML,mCANK;;;AASP,WACE;;QAAS,WAAU,MAAV,EAAT;MACE,8BAAC,cAAD,OADF;MAEE;;UAAK,WAAU,SAAV,EAAL;QACE;;YAAS,WAAU,QAAV,EAAT;UACE,8DADF;UAEE,8BAAC,eAAD,IAAiB,MAAM,IAAN,EAAY,UAAU,QAAV,EAA7B,CAFF;UAGE,wDAAc,UAAU,QAAV,EAAd,CAHF;SADF;QAMG,QANH;OAFF;KADF,CATO;;;SA7CL;;;cACG,eAAe;AACpB,YAAU,iBAAU,MAAV;;kBAoEC,iBAAU,MAAV,CAAiB,aAAjB","file":"Dialog.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { map, isFunction } from 'lodash';\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\n\nimport DefaultMessages from './dialog/MessagesSection.react';\nimport DialogFooter from './dialog/DialogFooter.react';\nimport DefaultToolbar from './Toolbar.react';\nimport DefaultActivity from './Activity.react';\nimport DefaultCall from './Call.react';\nimport DefaultLogger from './dev/LoggerSection.react';\nimport ConnectionState from './common/ConnectionState.react';\n\nimport ActivityStore from '../stores/ActivityStore';\nimport DialogStore from '../stores/DialogStore';\n\nclass DialogSection extends Component {\n  static contextTypes = {\n    delegate: PropTypes.object\n  };\n\n  static getStores() {\n    return [ActivityStore, DialogStore];\n  }\n\n  static calculateState() {\n    return {\n      peer: DialogStore.getCurrentPeer(),\n      isMember: DialogStore.isMember(),\n      isActivityOpen: ActivityStore.isOpen()\n    };\n  }\n\n  getComponents() {\n    const { dialog, logger } = this.context.delegate.components;\n    const LoggerSection = logger || DefaultLogger;\n    if (dialog && !isFunction(dialog)) {\n      const activity = dialog.activity || [\n        DefaultActivity,\n        DefaultCall,\n        LoggerSection\n      ];\n\n      return {\n        ToolbarSection: dialog.toolbar || DefaultToolbar,\n        MessagesSection: isFunction(dialog.messages) ? dialog.messages : DefaultMessages,\n        activity: map(activity, (Activity, index) => <Activity key={index} />)\n      };\n    }\n\n    return {\n      ToolbarSection: DefaultToolbar,\n      MessagesSection: DefaultMessages,\n      activity: [\n        <DefaultActivity key={1} />,\n        <DefaultCall key={2} />,\n        <LoggerSection key={3} />\n      ]\n    };\n  }\n\n  render() {\n    const { peer, isMember, messages, overlay, messagesCount } = this.state;\n\n    const {\n      ToolbarSection,\n      MessagesSection,\n      activity\n    } = this.getComponents();\n\n    return (\n      <section className=\"main\">\n        <ToolbarSection />\n        <div className=\"flexrow\">\n          <section className=\"dialog\">\n            <ConnectionState/>\n            <MessagesSection peer={peer} isMember={isMember} />\n            <DialogFooter isMember={isMember} />\n          </section>\n          {activity}\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default Container.create(DialogSection);\n"]}