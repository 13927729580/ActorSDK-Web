{"version":3,"sources":["../../src/components/Main.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsBM,IAAI;YAAJ,IAAI;;AAaR,WAbI,IAAI,CAaI,KAAK,EAAE;0BAbf,IAAI;;uEAAJ,IAAI,aAcA,KAAK;;UAab,kBAAkB,GAAG,YAAM;AACzB,UAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;AACpB,2CAAyB,gBAAgB,EAAE,CAAC;OAC7C,MAAM;AACL,2CAAyB,eAAe,EAAE,CAAC;OAC5C;KACF;;UAED,SAAS,GAAG,UAAC,KAAK,EAAK;;AAErB,UAAI,KAAK,CAAC,OAAO,KAAK,4BAAS,CAAC,IAAI,KAAK,CAAC,OAAO,EAAE;AACjD,aAAK,CAAC,eAAe,EAAE,CAAC;AACxB,aAAK,CAAC,cAAc,EAAE,CAAC;AACvB,4CAA0B,IAAI,EAAE,CAAC;OAClC;KACF;;AA1BC,YAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAK,kBAAkB,CAAC,CAAC;AACvE,YAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,MAAK,SAAS,EAAE,KAAK,CAAC;;;AAAC,AAG5D,wCAAmB,CAAC;;AAEpB,QAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;AACpB,yCAAyB,gBAAgB,EAAE,CAAC;KAC7C;;GACF;;eAzBG,IAAI;;6BA4CC;UACC,QAAQ,GAAK,IAAI,CAAC,OAAO,CAAzB,QAAQ;;AAEhB,UAAM,OAAO,GAAG,AAAC,OAAO,QAAQ,CAAC,UAAU,CAAC,OAAO,IAAI,UAAU,GAAI,QAAQ,CAAC,UAAU,CAAC,OAAO,oBAAiB,CAAC;;AAElH,aACE;;UAAK,SAAS,EAAC,KAAK;QAClB,sDAAU;QAEV,8BAAC,OAAO,OAAE;QACT,IAAI,CAAC,KAAK,CAAC,QAAQ;QAEpB,4DAAgB;QAChB,0DAAc;QACd,yDAAa;QACb,2DAAe;QACf,wDAAY;QACZ,wDAAY;OACR,CACN;KACH;;;SAhEG,IAAI;;;AAAJ,IAAI,CACD,SAAS,GAAG;AACjB,QAAM,EAAE,iBAAU,MAAM;AACxB,UAAQ,EAAE,iBAAU,SAAS,CAAC,CAC5B,iBAAU,OAAO,CAAC,iBAAU,IAAI,CAAC,EACjC,iBAAU,IAAI,CACf,CAAC;CACH;AAPG,IAAI,CASD,YAAY,GAAG;AACpB,UAAQ,EAAE,iBAAU,MAAM;CAC3B;kBAwDY,IAAI","file":"Main.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { KeyCodes } from '../constants/ActorAppConstants';\n\nimport { preloadEmojiSheet } from '../utils/EmojiUtils'\n\nimport VisibilityActionCreators from '../actions/VisibilityActionCreators';\nimport QuickSearchActionCreators from '../actions/QuickSearchActionCreators';\n\nimport DefaultSidebar from './Sidebar.react';\nimport Favicon from './common/Favicon.react';\n\nimport ModalsWrapper from './modals/ModalsWrapper.react';\nimport MenuOverlay from './common/MenuOverlay.react';\nimport CallModal from './modals/CallModal.react';\nimport InviteUser from './modals/InviteUser.react';\nimport InviteByLink from './modals/invite-user/InviteByLink.react';\nimport EditGroup from './modals/EditGroup.react';\n\nclass Main extends Component {\n  static propTypes = {\n    params: PropTypes.object,\n    children: PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.node),\n      PropTypes.node\n    ])\n  };\n\n  static contextTypes = {\n    delegate: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n    document.addEventListener('keydown', this.onKeyDown, false);\n\n    // Preload emoji spritesheet\n    preloadEmojiSheet();\n\n    if (!document.hidden) {\n      VisibilityActionCreators.createAppVisible();\n    }\n  }\n\n  onVisibilityChange = () => {\n    if (!document.hidden) {\n      VisibilityActionCreators.createAppVisible();\n    } else {\n      VisibilityActionCreators.createAppHidden();\n    }\n  };\n\n  onKeyDown = (event) => {\n    // TODO: Make this hotkey work on windows\n    if (event.keyCode === KeyCodes.K && event.metaKey) {\n      event.stopPropagation();\n      event.preventDefault();\n      QuickSearchActionCreators.show();\n    }\n  };\n\n  render() {\n    const { delegate } = this.context;\n\n    const Sidebar = (typeof delegate.components.sidebar == 'function') ? delegate.components.sidebar : DefaultSidebar;\n\n    return (\n      <div className=\"app\">\n        <Favicon/>\n\n        <Sidebar/>\n        {this.props.children}\n\n        <ModalsWrapper/>\n        <MenuOverlay/>\n        <InviteUser/>\n        <InviteByLink/>\n        <EditGroup/>\n        <CallModal/>\n      </div>\n    );\n  }\n}\n\nexport default Main;\n"]}