{"version":3,"sources":["../../src/components/Main.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAIA;;;;AACA;;AAEA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;IAEM;;;AAaJ,WAbI,IAaJ,CAAY,KAAZ,EAAmB;wCAbf,MAae;;;;;+DACjB,sBAAM,KAAN,GADiB;;UAkBnB,qBAAqB,YAAM;AACzB,UAAI,SAAS,MAAT,EAAiB;AACnB,2CAAyB,eAAzB,GADmB;OAArB,MAEO;AACL,2CAAyB,gBAAzB,GADK;OAFP;KADmB,CAlBF;;UA0BnB,YAAY,UAAC,KAAD,EAAW;;AAErB,UAAI,MAAM,OAAN,KAAkB,4BAAS,CAAT,IAAc,MAAM,OAAN,EAAe;AACjD,cAAM,eAAN,GADiD;AAEjD,cAAM,cAAN,GAFiD;AAGjD,4CAA0B,IAA1B,GAHiD;OAAnD;KAFU,CA1BO;;AAIjB,yCAJiB;;GAAnB;;AAbI,iBAoBJ,iDAAoB;AAClB,SAAK,kBAAL,GADkB;AAElB,aAAS,gBAAT,CAA0B,kBAA1B,EAA8C,KAAK,kBAAL,CAA9C,CAFkB;AAGlB,aAAS,gBAAT,CAA0B,SAA1B,EAAqC,KAAK,SAAL,EAAgB,KAArD,EAHkB;;;AApBhB,iBA0BJ,uDAAuB;AACrB,aAAS,mBAAT,CAA6B,kBAA7B,EAAiD,KAAK,kBAAL,CAAjD,CADqB;AAErB,aAAS,mBAAT,CAA6B,SAA7B,EAAwC,KAAK,SAAL,EAAgB,KAAxD,EAFqB;;;AA1BnB,iBAgDJ,mCAAa;QACH,WAAa,KAAK,OAAL,CAAb,SADG;;AAEX,QAAI,CAAC,SAAS,QAAT,CAAkB,KAAlB,EAAyB;AAC5B,aAAO,IAAP,CAD4B;KAA9B;;AAIA,WAAO,wDAAP,CANW;;;AAhDT,iBAyDJ,2BAAS;QACC,WAAa,KAAK,OAAL,CAAb,SADD;;;AAGP,QAAM,UAAU,OAAQ,SAAS,UAAT,CAAoB,OAApB,IAA+B,UAAtC,GAAoD,SAAS,UAAT,CAAoB,OAApB,oBAArD,CAHT;;AAKP,WACE;;QAAK,WAAU,KAAV,EAAL;MACE,sDADF;MAGE,8BAAC,OAAD,OAHF;MAIG,KAAK,KAAL,CAAW,QAAX;MAED,4DANF;MAOE,0DAPF;MAQE,yDARF;MASE,2DATF;MAUE,2DAVF;MAWE,wDAXF;MAaG,KAAK,UAAL,EAbH;KADF,CALO;;;SAzDL;;;KACG,YAAY;AACjB,UAAQ,iBAAU,MAAV;AACR,YAAU,iBAAU,SAAV,CAAoB,CAC5B,iBAAU,OAAV,CAAkB,iBAAU,IAAV,CADU,EAE5B,iBAAU,IAAV,CAFQ,CAAV;;AAHE,KASG,eAAe;AACpB,YAAU,iBAAU,MAAV;;kBAwEC","file":"Main.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { KeyCodes } from '../constants/ActorAppConstants';\n\nimport { preloadEmojiSheet } from '../utils/EmojiUtils'\n\nimport VisibilityActionCreators from '../actions/VisibilityActionCreators';\nimport QuickSearchActionCreators from '../actions/QuickSearchActionCreators';\n\nimport DefaultSidebar from './Sidebar.react';\nimport Favicon from './common/Favicon.react';\n\nimport ModalsWrapper from './modals/ModalsWrapper.react';\nimport MenuOverlay from './common/MenuOverlay.react';\nimport InviteUser from './modals/InviteUser.react';\nimport BlockedUsers from './modals/BlockedUsers.react';\nimport InviteByLink from './modals/invite-user/InviteByLink.react';\nimport EditGroup from './modals/EditGroup.react';\nimport SmallCall from './SmallCall.react';\n\nclass Main extends Component {\n  static propTypes = {\n    params: PropTypes.object,\n    children: PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.node),\n      PropTypes.node\n    ])\n  };\n\n  static contextTypes = {\n    delegate: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n\n    // Preload emoji spritesheet\n    preloadEmojiSheet();\n  }\n\n  componentDidMount() {\n    this.onVisibilityChange();\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n    document.addEventListener('keydown', this.onKeyDown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('visibilitychange', this.onVisibilityChange);\n    document.removeEventListener('keydown', this.onKeyDown, false);\n  }\n\n  onVisibilityChange = () => {\n    if (document.hidden) {\n      VisibilityActionCreators.createAppHidden();\n    } else {\n      VisibilityActionCreators.createAppVisible();\n    }\n  };\n\n  onKeyDown = (event) => {\n    // TODO: Make this hotkey work on windows\n    if (event.keyCode === KeyCodes.K && event.metaKey) {\n      event.stopPropagation();\n      event.preventDefault();\n      QuickSearchActionCreators.show();\n    }\n  };\n\n  renderCall() {\n    const { delegate } = this.context;\n    if (!delegate.features.calls) {\n      return null;\n    }\n\n    return <SmallCall />;\n  }\n\n  render() {\n    const { delegate } = this.context;\n\n    const Sidebar = (typeof delegate.components.sidebar == 'function') ? delegate.components.sidebar : DefaultSidebar;\n\n    return (\n      <div className=\"app\">\n        <Favicon/>\n\n        <Sidebar/>\n        {this.props.children}\n\n        <ModalsWrapper/>\n        <MenuOverlay/>\n        <InviteUser/>\n        <BlockedUsers/>\n        <InviteByLink/>\n        <EditGroup/>\n\n        {this.renderCall()}\n      </div>\n    );\n  }\n}\n\nexport default Main;\n"]}