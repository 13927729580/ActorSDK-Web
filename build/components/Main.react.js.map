{"version":3,"sources":["../../src/components/Main.react.js"],"names":[],"mappings":";;;;AAIA;;;;AACA;;AAEA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;IAEM,I;;;AAaJ,gBAAY,KAAZ,EAAmB;AAAA;;;;AAAA,iDACjB,sBAAM,KAAN,CADiB;;AAAA,UAkBnB,kBAlBmB,GAkBE,YAAM;AACzB,UAAI,SAAS,MAAb,EAAqB;AACnB,2CAAyB,eAAzB;AACD,OAFD,MAEO;AACL,2CAAyB,gBAAzB;AACD;AACF,KAxBkB;;AAAA,UA0BnB,SA1BmB,GA0BP,UAAC,KAAD,EAAW;;AAErB,UAAI,MAAM,OAAN,KAAkB,4BAAS,CAA3B,IAAgC,MAAM,OAA1C,EAAmD;AACjD,cAAM,eAAN;AACA,cAAM,cAAN;AACA,4CAA0B,IAA1B;AACD;AACF,KAjCkB;;AAIjB;AAJiB;AAKlB;;iBAED,iB,gCAAoB;AAClB,SAAK,kBAAL;AACA,aAAS,gBAAT,CAA0B,kBAA1B,EAA8C,KAAK,kBAAnD;AACA,aAAS,gBAAT,CAA0B,SAA1B,EAAqC,KAAK,SAA1C,EAAqD,KAArD;AACD,G;;iBAED,oB,mCAAuB;AACrB,aAAS,mBAAT,CAA6B,kBAA7B,EAAiD,KAAK,kBAAtD;AACA,aAAS,mBAAT,CAA6B,SAA7B,EAAwC,KAAK,SAA7C,EAAwD,KAAxD;AACD,G;;iBAmBD,U,yBAAa;AAAA,QACH,QADG,GACU,KAAK,OADf,CACH,QADG;;AAEX,QAAI,CAAC,SAAS,QAAT,CAAkB,KAAvB,EAA8B;AAC5B,aAAO,IAAP;AACD;;AAED,WAAO,wDAAP;AACD,G;;iBAED,M,qBAAS;AAAA,QACC,QADD,GACc,KAAK,OADnB,CACC,QADD;;;AAGP,QAAM,UAAW,OAAO,SAAS,UAAT,CAAoB,OAA3B,IAAsC,UAAvC,GAAqD,SAAS,UAAT,CAAoB,OAAzE,oBAAhB;;AAEA,WACE;AAAA;MAAA,EAAK,WAAU,KAAf;MACE,sDADF;MAGE,8BAAC,OAAD,OAHF;MAIG,KAAK,KAAL,CAAW,QAJd;MAME,4DANF;MAOE,0DAPF;MAQE,yDARF;MASE,2DATF;MAUE,2DAVF;MAWE,wDAXF;MAaG,KAAK,UAAL;AAbH,KADF;AAiBD,G;;;;;AA/EG,I,CACG,S,GAAY;AACjB,UAAQ,iBAAU,MADD;AAEjB,YAAU,iBAAU,SAAV,CAAoB,CAC5B,iBAAU,OAAV,CAAkB,iBAAU,IAA5B,CAD4B,EAE5B,iBAAU,IAFkB,CAApB;AAFO,C;AADf,I,CASG,Y,GAAe;AACpB,YAAU,iBAAU;AADA,C;kBAyET,I","file":"Main.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { KeyCodes } from '../constants/ActorAppConstants';\n\nimport { preloadEmojiSheet } from '../utils/EmojiUtils'\n\nimport VisibilityActionCreators from '../actions/VisibilityActionCreators';\nimport QuickSearchActionCreators from '../actions/QuickSearchActionCreators';\n\nimport DefaultSidebar from './Sidebar.react';\nimport Favicon from './common/Favicon.react';\n\nimport ModalsWrapper from './modals/ModalsWrapper.react';\nimport MenuOverlay from './common/MenuOverlay.react';\nimport InviteUser from './modals/InviteUser.react';\nimport BlockedUsers from './modals/BlockedUsers.react';\nimport InviteByLink from './modals/invite-user/InviteByLink.react';\nimport EditGroup from './modals/EditGroup.react';\nimport SmallCall from './SmallCall.react';\n\nclass Main extends Component {\n  static propTypes = {\n    params: PropTypes.object,\n    children: PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.node),\n      PropTypes.node\n    ])\n  };\n\n  static contextTypes = {\n    delegate: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n\n    // Preload emoji spritesheet\n    preloadEmojiSheet();\n  }\n\n  componentDidMount() {\n    this.onVisibilityChange();\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n    document.addEventListener('keydown', this.onKeyDown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('visibilitychange', this.onVisibilityChange);\n    document.removeEventListener('keydown', this.onKeyDown, false);\n  }\n\n  onVisibilityChange = () => {\n    if (document.hidden) {\n      VisibilityActionCreators.createAppHidden();\n    } else {\n      VisibilityActionCreators.createAppVisible();\n    }\n  };\n\n  onKeyDown = (event) => {\n    // TODO: Make this hotkey work on windows\n    if (event.keyCode === KeyCodes.K && event.metaKey) {\n      event.stopPropagation();\n      event.preventDefault();\n      QuickSearchActionCreators.show();\n    }\n  };\n\n  renderCall() {\n    const { delegate } = this.context;\n    if (!delegate.features.calls) {\n      return null;\n    }\n\n    return <SmallCall />;\n  }\n\n  render() {\n    const { delegate } = this.context;\n\n    const Sidebar = (typeof delegate.components.sidebar == 'function') ? delegate.components.sidebar : DefaultSidebar;\n\n    return (\n      <div className=\"app\">\n        <Favicon/>\n\n        <Sidebar/>\n        {this.props.children}\n\n        <ModalsWrapper/>\n        <MenuOverlay/>\n        <InviteUser/>\n        <BlockedUsers/>\n        <InviteByLink/>\n        <EditGroup/>\n\n        {this.renderCall()}\n      </div>\n    );\n  }\n}\n\nexport default Main;\n"]}