{"version":3,"sources":["../../src/components/Main.react.js"],"names":[],"mappings":";;;;AAIA;;;;AACA;;AAEA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;;;;;;;;;;;IAEM,I;;;AAaJ,gBAAY,KAAZ,EAAmB;AAAA;;;;;AAAA,iDACjB,sBAAM,KAAN,CADiB;;AAAA,UAiBnB,kBAjBmB,GAiBE,YAAM;AACzB,UAAI,SAAS,MAAb,EAAqB;AACnB,2CAAyB,eAAzB;AACD,OAFD,MAEO;AACL,2CAAyB,gBAAzB;AACD;AACF,KAvBkB;;AAKjB;AALiB;AAMlB;;iBAED,iB,gCAAoB;AAClB,SAAK,kBAAL;AACA,aAAS,gBAAT,CAA0B,kBAA1B,EAA8C,KAAK,kBAAnD;AACD,G;;iBAED,oB,mCAAuB;AACrB,aAAS,mBAAT,CAA6B,kBAA7B,EAAiD,KAAK,kBAAtD;AACD,G;;iBAUD,U,yBAAa;AAAA,QACH,QADG,GACU,KAAK,OADf,CACH,QADG;;AAEX,QAAI,CAAC,SAAS,QAAT,CAAkB,KAAvB,EAA8B;AAC5B,aAAO,IAAP;AACD;;AAED,WAAO,wDAAP;AACD,G;;iBAED,M,qBAAS;AAAA,QACC,QADD,GACc,KAAK,OADnB,CACC,QADD;;;AAGP,QAAM,UAAW,OAAO,SAAS,UAAT,CAAoB,OAA3B,IAAsC,UAAvC,GAAqD,SAAS,UAAT,CAAoB,OAAzE,oBAAhB;;AAEA,WACE;AAAA;MAAA,EAAK,WAAU,KAAf;MACE,sDADF;MAGE,8BAAC,OAAD,OAHF;MAIG,KAAK,KAAL,CAAW,QAJd;MAME,4DANF;MAOE,0DAPF;MASG,KAAK,UAAL;AATH,KADF;AAaD,G;;;;;AAjEG,I,CACG,S,GAAY;AACjB,UAAQ,iBAAU,MADD;AAEjB,YAAU,iBAAU,SAAV,CAAoB,CAC5B,iBAAU,OAAV,CAAkB,iBAAU,IAA5B,CAD4B,EAE5B,iBAAU,IAFkB,CAApB;AAFO,C;AADf,I,CASG,Y,GAAe;AACpB,YAAU,iBAAU;AADA,C;kBA2DT,I","file":"Main.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { preloadEmojiSheet } from '../utils/EmojiUtils'\n\nimport VisibilityActionCreators from '../actions/VisibilityActionCreators';\n\nimport DefaultSidebar from './Sidebar.react';\nimport Favicon from './common/Favicon.react';\n\nimport ModalsWrapper from './modals/ModalsWrapper.react';\nimport MenuOverlay from './common/MenuOverlay.react';\nimport SmallCall from './SmallCall.react';\n\nclass Main extends Component {\n  static propTypes = {\n    params: PropTypes.object,\n    children: PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.node),\n      PropTypes.node\n    ])\n  };\n\n  static contextTypes = {\n    delegate: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n\n    // Preload emoji spritesheet\n    // TODO: Fix! Its not working properly.\n    preloadEmojiSheet();\n  }\n\n  componentDidMount() {\n    this.onVisibilityChange();\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('visibilitychange', this.onVisibilityChange);\n  }\n\n  onVisibilityChange = () => {\n    if (document.hidden) {\n      VisibilityActionCreators.createAppHidden();\n    } else {\n      VisibilityActionCreators.createAppVisible();\n    }\n  };\n\n  renderCall() {\n    const { delegate } = this.context;\n    if (!delegate.features.calls) {\n      return null;\n    }\n\n    return <SmallCall />;\n  }\n\n  render() {\n    const { delegate } = this.context;\n\n    const Sidebar = (typeof delegate.components.sidebar == 'function') ? delegate.components.sidebar : DefaultSidebar;\n\n    return (\n      <div className=\"app\">\n        <Favicon/>\n\n        <Sidebar/>\n        {this.props.children}\n\n        <ModalsWrapper/>\n        <MenuOverlay/>\n\n        {this.renderCall()}\n      </div>\n    );\n  }\n}\n\nexport default Main;\n"]}