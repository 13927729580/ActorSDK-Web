{"version":3,"sources":["../../../../src/components/dialog/messages/Welcome.react.js"],"names":[],"mappings":"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","file":"Welcome.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { FormattedHTMLMessage } from 'react-intl'\nimport { shouldComponentUpdate } from 'react-addons-pure-render-mixin';\n\nimport SvgIcon from '../../common/SvgIcon.react';\n\nimport { PeerTypes } from '../../../constants/ActorAppConstants';\n\nimport InviteUserActions from '../../../actions/InviteUserActions';\n\nimport UserStore from '../../../stores/UserStore';\nimport GroupStore from '../../../stores/GroupStore';\n\nimport AvatarItem from './../../common/AvatarItem.react';\n\nclass Welcome extends Component {\n  static propTypes = {\n    peer: PropTypes.object.isRequired\n  };\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.onInviteClick = this.onInviteClick.bind(this);\n    this.shouldComponentUpdate = shouldComponentUpdate.bind(this);\n  }\n\n  onInviteClick() {\n    const { peer } = this.props;\n    const group = GroupStore.getGroup(peer.id);\n    InviteUserActions.show(group);\n  }\n\n  renderWelcomeAvatar() {\n    return (\n      <div className=\"message__info\">\n        <div className=\"welcome-avatar\">\n          <SvgIcon className=\"icon icon--gray\" glyph=\"star\" />\n        </div>\n      </div>\n    );\n  }\n\n  renderUserText(id) {\n    const user = UserStore.getUser(id);\n\n    if (user.isBot) {\n      return (\n        <div className=\"row\">\n          <div className=\"message__info\">\n            <AvatarItem\n              image={user.avatar}\n              className=\"message__avatar\"\n              placeholder={user.placeholder}\n              size=\"normal\"\n              title={user.name}\n            />\n          </div>\n          <div className=\"message__body col-xs\">\n            <FormattedHTMLMessage id=\"message.welcome.private\" values={{ name: user.name }}/>\n            <p style={{ marginTop: 16 }}>{user.about}</p>\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div className=\"row\">\n        {this.renderWelcomeAvatar()}\n        <div className=\"message__body col-xs\">\n          <FormattedHTMLMessage id=\"message.welcome.private\" values={{ name: user.name }}/>\n        </div>\n      </div>\n    );\n  }\n\n  renderGroupText(id) {\n    const { intl } = this.context;\n    const group = GroupStore.getGroup(id);\n    const myID = UserStore.getMyId();\n    const admin = UserStore.getUser(group.adminId);\n    const creator = group.adminId === myID ? intl.messages['message.welcome.group.you'] : admin.name;\n\n    return (\n      <div className=\"row\">\n        {this.renderWelcomeAvatar()}\n        <div className=\"message__body col-xs\">\n          <FormattedHTMLMessage id=\"message.welcome.group.main\" values={{ name: group.name, creator }}/>\n          <p>\n            {intl.messages['message.welcome.group.actions.start']}\n            <a onClick={this.onInviteClick}>{intl.messages['message.welcome.group.actions.invite']}</a>\n            {intl.messages['message.welcome.group.actions.end']}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  renderText() {\n    const { peer } = this.props;\n\n    switch (peer.type) {\n      case PeerTypes.USER:\n        return this.renderUserText(peer.id);\n      case PeerTypes.GROUP:\n        return this.renderGroupText(peer.id);\n    }\n  }\n\n  render() {\n    return(\n      <div className=\"message message--welcome\">\n        {this.renderText()}\n      </div>\n    )\n  }\n}\n\nexport default Welcome;\n"]}