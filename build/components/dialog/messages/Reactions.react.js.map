{"version":3,"sources":["../../../../src/components/dialog/messages/Reactions.react.js"],"names":[],"mappings":"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","file":"Reactions.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport classnames from 'classnames';\nimport { addons } from 'react/addons';\n\nimport MessageActionCreators from '../../../actions/MessageActionCreators';\n\nconst { CSSTransitionGroup } = addons;\n\nclass MessageReactions extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      canAnimateHeart: true\n    };\n  }\n\n  static propTypes = {\n    peer: PropTypes.object.isRequired,\n    message: PropTypes.object.isRequired\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (this.state.isThisMyReaction) {\n      this.setState({\n        canAnimateHeart: false,\n        isThisMyReaction: false\n      })\n    } else {\n      this.setState({canAnimateHeart: true})\n    }\n  }\n\n  handleAddLike = () => {\n    MessageActionCreators.addLike(this.props.peer, this.props.message.rid);\n    this.setState({isThisMyReaction: true})\n  };\n  handleRemoveLike = () => {\n    MessageActionCreators.removeLike(this.props.peer, this.props.message.rid);\n    this.setState({isThisMyReaction: true})\n  };\n\n  render() {\n    const { message } = this.props;\n    const { canAnimateHeart } = this.state;\n    const hasReactions = message.reactions.length > 0;\n\n    let counter;\n    let icon = <i className=\"icon material-icons\" onClick={this.handleAddLike}>favorite</i>;\n    let reactionsClassName = 'message__actions__like';\n\n    if (hasReactions) {\n      const amILikeThat = message.reactions[0].isOwnSet;\n\n      reactionsClassName = classnames(reactionsClassName, {\n        'message__actions__like--has-reactions': hasReactions,\n        'message__actions__like--liked': amILikeThat,\n        'message__actions__like--with-animations': canAnimateHeart\n      });\n\n      if (amILikeThat) {\n        icon = <i className=\"icon material-icons\" onClick={this.handleRemoveLike}>favorite</i>\n      }\n\n      if (message.reactions[0].uids.length > 0) {\n        counter = <span className=\"counter\" key={1}>{message.reactions[0].uids.length}</span>;\n      } else {\n        counter = null\n      }\n    }\n\n    return (\n      <div className={reactionsClassName}>\n        <CSSTransitionGroup transitionName=\"counter\" transitionEnterTimeout={125} transitionLeaveTimeout={100}>\n          {counter}\n        </CSSTransitionGroup>\n        {icon}\n      </div>\n    )\n  }\n}\n\nexport default MessageReactions;\n"]}