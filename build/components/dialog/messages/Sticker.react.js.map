{"version":3,"sources":["../../../../src/components/dialog/messages/Sticker.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAOA,IAAI,KAAK,GAAG,EAAE;;;;;AAAC;IAKT,OAAO;YAAP,OAAO;;AAQX,WARI,OAAO,CAQC,KAAK,EAAE;0BARf,OAAO;;iDAST,sBAAM,KAAK,CAAC;;UAOd,MAAM,GAAG,YAAM;AACb,YAAK,SAAS,EAAE,CAAC;AACjB,UAAI,CAAC,MAAK,KAAK,CAAC,QAAQ,EAAE;AACxB,cAAK,QAAQ,CAAC,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;OACjC;KACF;;UAED,QAAQ,GAAG;aAAM,KAAK,CAAC,MAAK,KAAK,CAAC,OAAO,CAAC,KAAK,IAAI;KAAA;;UAEnD,SAAS,GAAG;aAAM,KAAK,CAAC,MAAK,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI;KAAA;;AAdhD,UAAK,KAAK,GAAG;AACX,cAAQ,EAAE,MAAK,QAAQ,EAAE;KAC1B,CAAA;;GACF;;AAdG,SAAO,WA2BX,MAAM,qBAAG;iBAC6B,IAAI,CAAC,KAAK;QAAtC,SAAS,UAAT,SAAS;QAAE,CAAC,UAAD,CAAC;QAAE,CAAC,UAAD,CAAC;QAAE,OAAO,UAAP,OAAO;QACxB,QAAQ,GAAK,IAAI,CAAC,KAAK,CAAvB,QAAQ;;AAChB,QAAM,SAAS,GAAG;;QAAK,SAAS,EAAC,WAAW;MAAC,0CAAM;MAAA,0CAAM;MAAA,0CAAM;MAAA,0CAAM;MAAA,0CAAM;KAAM,CAAC;AAClF,QAAM,gBAAgB,GAAG,0BAAW,SAAS,EAAE;AAC7C,uBAAiB,EAAE,QAAQ;KAC5B,CAAC,CAAC;;AAEH,QAAM,SAAS,GAAG,GAAG,CAAC;AACtB,QAAM,UAAU,GAAG,GAAG,CAAC;AACvB,QAAI,KAAK,GAAG,CAAC,CAAC;AACd,QAAI,MAAM,GAAG,CAAC,CAAC;;AAEf,QAAI,KAAK,GAAG,MAAM,EAAE;AAClB,UAAI,KAAK,GAAG,SAAS,EAAE;AACrB,cAAM,IAAI,SAAS,GAAG,KAAK,CAAC;AAC5B,aAAK,GAAG,SAAS,CAAC;OACnB;KACF,MAAM;AACL,UAAI,MAAM,GAAG,UAAU,EAAE;AACvB,aAAK,IAAI,UAAU,GAAG,MAAM,CAAC;AAC7B,cAAM,GAAG,UAAU,CAAC;OACrB;KACF;;AAED,WACE;;QAAK,SAAS,EAAE,SAAS,AAAC;MACxB;;UAAK,SAAS,EAAE,gBAAgB,AAAC,EAAC,KAAK,EAAE,EAAC,KAAK,EAAL,KAAK,EAAE,MAAM,EAAN,MAAM,EAAC,AAAC;QACtD,SAAS;QACV,uCAAK,GAAG,EAAE,OAAO,AAAC;AACb,eAAK,EAAE,KAAK,AAAC;AACb,gBAAM,EAAE,MAAM,AAAC;AACf,gBAAM,EAAE,IAAI,CAAC,MAAM,AAAC,GAAE;OACvB;KACF,CACN;GACH;;SA/DG,OAAO;;;AAAP,OAAO,CACJ,SAAS,GAAG;AACjB,WAAS,EAAE,iBAAU,MAAM;AAC3B,SAAO,EAAE,iBAAU,MAAM;AACzB,GAAC,EAAE,iBAAU,MAAM,CAAC,UAAU;AAC9B,GAAC,EAAE,iBAAU,MAAM,CAAC,UAAU;CAC/B;kBA4DY,OAAO","file":"Sticker.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport classnames from 'classnames';\n\nlet cache = {};\n\n/**\n * Class that represents a component for display sticker message content\n */\nclass Sticker extends Component {\n  static propTypes = {\n    className: PropTypes.string,\n    fileUrl: PropTypes.string,\n    h: PropTypes.number.isRequired,\n    w: PropTypes.number.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoaded: this.isCached()\n    }\n  }\n\n  onLoad = () => {\n    this.setCached();\n    if (!this.state.isLoaded) {\n      this.setState({isLoaded: true});\n    }\n  };\n\n  isCached = () => cache[this.props.fileUrl] === true;\n\n  setCached = () => cache[this.props.fileUrl] = true;\n\n  render() {\n    const { className, w, h, fileUrl} = this.props;\n    const { isLoaded } = this.state;\n    const preloader = <div className=\"preloader\"><div/><div/><div/><div/><div/></div>;\n    const stickerClassName = classnames('sticker', {\n      'sticker--loaded': isLoaded\n    });\n\n    const MAX_WIDTH = 200;\n    const MAX_HEIGHT = 200;\n    let width = w;\n    let height = h;\n\n    if (width > height) {\n      if (width > MAX_WIDTH) {\n        height *= MAX_WIDTH / width;\n        width = MAX_WIDTH;\n      }\n    } else {\n      if (height > MAX_HEIGHT) {\n        width *= MAX_HEIGHT / height;\n        height = MAX_HEIGHT;\n      }\n    }\n\n    return (\n      <div className={className}>\n        <div className={stickerClassName} style={{width, height}}>\n          {preloader}\n          <img src={fileUrl}\n               width={width}\n               height={height}\n               onLoad={this.onLoad}/>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Sticker;\n"]}