{"version":3,"sources":["../../../src/components/dialog/MessagesList.react.js"],"names":[],"mappings":"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","file":"MessagesList.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { isFunction, throttle } from 'lodash';\n\nimport React, { Component, PropTypes } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\nimport { MessageChangeReason } from '../../constants/ActorAppConstants';\n\nimport PeerUtils from '../../utils/PeerUtils';\nimport { getMessageState, isLastMessageMine } from '../../utils/MessageUtils';\nimport Scroller from '../common/Scroller.react';\n\nimport DefaultMessageItem from './messages/MessageItem.react';\nimport DefaultWelcome from './messages/Welcome.react';\nimport Loading from './messages/Loading.react';\n\nclass MessagesList extends Component {\n  static contextTypes = {\n    delegate: PropTypes.object.isRequired\n  };\n\n  static propTypes = {\n    uid: PropTypes.number.isRequired,\n    peer: PropTypes.object.isRequired,\n    messages: PropTypes.shape({\n      messages: PropTypes.array.isRequired,\n      overlay: PropTypes.array.isRequired,\n      count: PropTypes.number.isRequired,\n      isLoaded: PropTypes.bool.isRequired,\n      receiveDate: PropTypes.number.isRequired,\n      readDate: PropTypes.number.isRequired,\n      firstUnreadId: PropTypes.string,\n      selected: PropTypes.object.isRequired,\n      changeReason: PropTypes.oneOf([\n        MessageChangeReason.UNKNOWN,\n        MessageChangeReason.PUSH,\n        MessageChangeReason.UNSHIFT,\n        MessageChangeReason.UPDATE\n      ]).isRequired\n    }).isRequired,\n    isMember: PropTypes.bool.isRequired,\n    editMessage: PropTypes.object.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    onLoadMore: PropTypes.func.isRequired,\n    onEdit: PropTypes.func.isRequired\n  };\n\n  constructor(props, context) {\n    super(props, context);\n\n    const { dialog } = context.delegate.components;\n    if (dialog && dialog.messages) {\n      this.components = {\n        MessageItem: isFunction(dialog.messages.message) ? dialog.messages.message : DefaultMessageItem,\n        Welcome: isFunction(dialog.messages.welcome) ? dialog.messages.welcome : DefaultWelcome\n      };\n    } else {\n      this.components = {\n        MessageItem: DefaultMessageItem,\n        Welcome: DefaultWelcome\n      };\n    }\n\n    this.state = {\n      showScrollToBottom: false\n    };\n\n    this.dimensions = null;\n    this.isLoading = false;\n\n    this.onResize = this.onResize.bind(this);\n    this.onScroll = throttle(this.onScroll.bind(this), 300);\n    this.handleScrollToBottom = this.handleScrollToBottom.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextProps.peer !== this.props.peer ||\n           nextProps.messages !== this.props.messages ||\n           nextProps.isMember !== this.props.isMember ||\n           nextProps.editMessage !== this.props.editMessage ||\n           nextState.showScrollToBottom !== this.state.showScrollToBottom;\n  }\n\n  componentDidMount() {\n    this.restoreScroll();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!PeerUtils.equals(nextProps.peer, this.props.peer)) {\n      console.debug('Peer changed, set dimensions to null');\n      this.dimensions = null;\n      this.isLoading = false;\n    } else {\n      console.debug('Update dimensions due messages will rerender');\n      this.updateDimensions(this.refs.scroller.getDimensions());\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.showScrollToBottom !== this.state.showScrollToBottom) {\n      return;\n    }\n\n    const { dimensions, refs: { scroller }, props: { uid, messages } } = this;\n\n    if (messages.firstUnreadId && messages.firstUnreadId !== prevProps.messages.firstUnreadId) {\n      if (this.refs.unread) {\n        console.debug('Scroll to unread divider');\n        this.refs.scroller.scrollToNode(this.refs.unread);\n      } else {\n        console.debug('Scroll to unread divider impossible');\n      }\n    } else if (messages.changeReason === MessageChangeReason.PUSH) {\n      const _isLastMessageMine = isLastMessageMine(uid, messages);\n      if (!dimensions || _isLastMessageMine) {\n        console.debug('Scroll to bottom due new messages PUSH', { dimensions, _isLastMessageMine });\n        this.scrollToBottom();\n      }\n    } else if (messages.changeReason === MessageChangeReason.UNSHIFT) {\n      this.isLoading = false;\n      if (dimensions) {\n        const nextDimensions = scroller.getDimensions();\n        console.debug('Restore scroll due messages unshift', { dimensions, nextDimensions });\n        scroller.scrollTo(nextDimensions.scrollHeight - dimensions.scrollHeight);\n      } else {\n        console.debug('Scroll to bottom due messages have been UNSHIFT', { dimensions });\n        this.scrollToBottom();\n      }\n    } else {\n      console.debug('Restore scroll due messages UPDATE');\n      this.restoreScroll();\n    }\n  }\n\n  onScroll() {\n    const dimensions = this.refs.scroller.getDimensions();\n    this.updateDimensions(dimensions);\n    if (!this.isLoading && dimensions.scrollTop < 100) {\n      console.debug('Start loading more messages');\n      this.isLoading = true;\n      this.props.onLoadMore();\n    }\n\n    const showScrollToBottom = dimensions.scrollTop < dimensions.scrollHeight - (2 * dimensions.offsetHeight);\n\n    if (showScrollToBottom !== this.state.showScrollToBottom) {\n      this.setState({ showScrollToBottom });\n    }\n  }\n\n  onResize() {\n    const { dimensions, refs: { scroller } } = this;\n    if (dimensions) {\n      const ratio = dimensions.scrollTop / dimensions.scrollHeight;\n      const nextDimensions = scroller.getDimensions();\n      scroller.scrollTo(ratio * nextDimensions.scrollHeight);\n      this.dimensions = nextDimensions;\n      console.debug('Handle resize: fix scroll', { dimensions, ratio, nextDimensions });\n    } else {\n      scroller.scrollToBottom();\n      console.debug('Handle resize: scroll to bottom', { dimensions });\n    }\n  }\n\n  handleScrollToBottom() {\n    this.refs.scroller.scrollToBottom();\n  }\n\n  renderHeader() {\n    const { peer, isMember, messages } = this.props;\n\n    if (!isMember) {\n      return null;\n    }\n\n    if (messages.isLoaded) {\n      const { Welcome } = this.components;\n      return <Welcome peer={peer} key=\"header\" />;\n    }\n\n    if (!messages.messages.length) {\n      return null;\n    }\n\n    return <Loading key=\"header\" />;\n  }\n\n  renderMessages() {\n    const { uid, peer, editMessage, messages: { messages, overlay, count, selected, receiveDate, readDate, firstUnreadId } } = this.props;\n    const { MessageItem } = this.components;\n\n    const result = [];\n    for (let index = messages.length - count; index < messages.length; index++) {\n      const overlayItem = overlay[index];\n      if (overlayItem && overlayItem.dateDivider) {\n        result.push(\n          <div className=\"date-divider\" key={overlayItem.dateDivider}>\n            {overlayItem.dateDivider}\n          </div>\n        );\n      }\n\n      const message = messages[index];\n      if (message.rid === firstUnreadId) {\n        result.push(\n          <div className=\"unread-divider\" ref=\"unread\" key=\"unread\">\n            <FormattedMessage id=\"message.unread\"/>\n          </div>\n        );\n      }\n\n      result.push(\n        <MessageItem\n          peer={peer}\n          message={message}\n          state={getMessageState(message, uid, receiveDate, readDate)}\n          isShort={overlayItem.useShort}\n          isSelected={selected.has(message.rid)}\n          isEditing={message === editMessage.message}\n          onEdit={this.props.onEdit}\n          onSelect={this.props.onSelect}\n          key={message.sortKey}\n        />\n      );\n    }\n\n    return result;\n  }\n\n  renderScrollToBottomButton() {\n    const { showScrollToBottom } = this.state;\n    if (!showScrollToBottom) {\n      return null;\n    }\n\n    return (\n      <div className=\"chat__scroll-to-bottom\" onClick={this.handleScrollToBottom}>\n        <i className=\"material-icons\">keyboard_arrow_down</i>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"chat__container\">\n        <Scroller\n          className=\"chat__messages\"\n          ref=\"scroller\"\n          onScroll={this.onScroll}\n          onResize={this.onResize}\n        >\n          {this.renderHeader()}\n          {this.renderMessages()}\n        </Scroller>\n        {this.renderScrollToBottomButton()}\n      </div>\n    )\n  }\n\n  scrollToBottom() {\n    this.dimensions = null;\n    this.refs.scroller.scrollToBottom();\n  }\n\n  updateDimensions(dimensions) {\n    if (dimensions.scrollHeight === dimensions.scrollTop + dimensions.offsetHeight) {\n      console.debug('Update dimensions: lock scroll to bottom', { dimensions });\n      this.dimensions = null;\n    } else {\n      console.debug('Update dimensions: set new dimensions', { dimensions });\n      this.dimensions = dimensions;\n    }\n  }\n\n  restoreScroll() {\n    const { dimensions, refs: { scroller } } = this;\n\n    if (dimensions) {\n      scroller.scrollTo(dimensions.scrollTop);\n    } else {\n      scroller.scrollToBottom();\n    }\n  }\n}\n\nexport default MessagesList;\n"]}