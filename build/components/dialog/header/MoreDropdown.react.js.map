{"version":3,"sources":["../../../../src/components/dialog/header/MoreDropdown.react.js"],"names":[],"mappings":"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","file":"MoreDropdown.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { FormattedMessage, FormattedHTMLMessage } from 'react-intl';\nimport EventListener from 'fbjs/lib/EventListener';\nimport { PeerTypes, KeyCodes } from '../../../constants/ActorAppConstants';\nimport confirm from '../../../utils/confirm';\n\nimport ContactActionCreators from '../../../actions/ContactActionCreators';\nimport DialogActionCreators from '../../../actions/DialogActionCreators';\nimport BlockedUsersActionCreators from '../../../actions/BlockedUsersActionCreators';\nimport EditGroupActionCreators from '../../../actions/EditGroupActionCreators';\nimport InviteUserActions from '../../../actions/InviteUserActions';\n\nclass MoreDropdown extends Component {\n  static contextTypes = {\n    delegate: PropTypes.object.isRequired\n  }\n\n  static propTypes = {\n    peer: PropTypes.object.isRequired,\n    info: PropTypes.object.isRequired,\n    onClose: PropTypes.func.isRequired\n  }\n\n  constructor(props, context) {\n    super(props, context);\n    console.debug(this.props);\n\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleDocumentClick = this.handleDocumentClick.bind(this);\n    this.handleChatClear = this.handleChatClear.bind(this);\n    this.handleChatDelete = this.handleChatDelete.bind(this);\n    this.handleChatLeave = this.handleChatLeave.bind(this);\n    this.handleRemoveFromContacts = this.handleRemoveFromContacts.bind(this);\n    this.handleAddToContacts = this.handleAddToContacts.bind(this);\n    this.handleBlockUser = this.handleBlockUser.bind(this);\n    this.handleUnlockUser = this.handleUnlockUser.bind(this);\n    this.handleEditGroup = this.handleEditGroup.bind(this);\n    this.handleAddPeople = this.handleAddPeople.bind(this);\n  }\n\n  componentDidMount() {\n    this.setListeners();\n  }\n\n  componentWillUnmount() {\n    this.cleanListeners();\n  }\n\n  setListeners() {\n    this.cleanListeners();\n    this.listeners = [\n      EventListener.listen(document, 'keydown', this.handleKeyDown),\n      EventListener.listen(document, 'click', this.handleDocumentClick)\n    ];\n  }\n\n  cleanListeners() {\n    if (this.listeners) {\n      this.listeners.forEach((listener) => listener.remove());\n      this.listeners = null;\n    }\n  }\n\n  handleDocumentClick(event) {\n    const { onClose } = this.props;\n    onClose(event);\n  }\n\n  handleKeyDown(event) {\n    const { onClose } = this.props;\n\n    if (event.keyCode === KeyCodes.ESC) {\n      event.stopPropagation();\n      event.preventDefault();\n      onClose(event)\n    }\n  }\n\n  handleChatClear() {\n    console.debug('handleChatClear');\n    const { info, peer } = this.props;\n\n    const message = peer.key === PeerTypes.USER\n      ? <FormattedHTMLMessage id=\"modal.confirm.user.clear\" values={{ name: info.name }} />\n      : <FormattedHTMLMessage id=\"modal.confirm.group.clear\" values={{ name: info.name }} />\n\n    confirm(message)\n      .then(\n        () => DialogActionCreators.clearChat(peer),\n        () => {}\n      );\n  }\n\n  handleChatDelete() {\n    console.debug('handleChatDelete');\n    const { info, peer } = this.props;\n\n    const message = peer.key === PeerTypes.USER\n      ? <FormattedHTMLMessage id=\"modal.confirm.user.delete\" values={{ name: info.name }} />\n      : <FormattedHTMLMessage id=\"modal.confirm.group.delete\" values={{ name: info.name }} />\n\n    confirm(message)\n      .then(\n        () => DialogActionCreators.deleteChat(peer),\n        () => {}\n      );\n  }\n\n  handleChatLeave() {\n    console.debug('handleChatLeave');\n    const { peer, info } = this.props;\n\n    confirm(<FormattedHTMLMessage id=\"modal.confirm.group.leave\" values={{ name: info.name }} />)\n      .then(\n        () => DialogActionCreators.leaveGroup(peer.id),\n        () => {}\n      );\n  }\n\n  handleRemoveFromContacts() {\n    const { peer, info } = this.props;\n\n    confirm(<FormattedHTMLMessage id=\"modal.confirm.user.removeContact\" values={{ name: info.name }}/>)\n      .then(\n        () => ContactActionCreators.removeContact(peer.id),\n        () => {}\n      );\n  }\n\n  handleAddToContacts() {\n    const { peer } = this.props;\n    ContactActionCreators.addContact(peer.id);\n  }\n\n  handleBlockUser() {\n    const { peer, info } = this.props;\n\n    confirm(<FormattedHTMLMessage id=\"modal.confirm.user.block\" values={{ name: info.name }} />)\n      .then(\n        () => BlockedUsersActionCreators.blockUser(peer.id),\n        () => {}\n      );\n  }\n\n  handleUnlockUser() {\n    const { peer } = this.props;\n    BlockedUsersActionCreators.unblockUser(peer.id);\n  }\n\n  handleEditGroup() {\n    const { peer } = this.props;\n    EditGroupActionCreators.show(peer.id);\n  }\n\n  handleAddPeople() {\n    const { info } = this.props;\n    InviteUserActions.show(info)\n  }\n\n  renderToggleContact() {\n    const { info: { isContact } } = this.props;\n\n    if (isContact) {\n      return (\n        <li className=\"dropdown__menu__item\" onClick={this.handleRemoveFromContacts}>\n          <FormattedMessage id=\"removeFromContacts\"/>\n        </li>\n      );\n    }\n\n    return (\n      <li className=\"dropdown__menu__item\" onClick={this.handleAddToContacts}>\n        <FormattedMessage id=\"addToContacts\"/>\n      </li>\n    );\n  }\n\n  renderBlockUser() {\n    if (!this.context.delegate.features.blocking) {\n      return null;\n    }\n\n    const { info: { isBlocked } } = this.props;\n\n    if (isBlocked) {\n      return (\n        <li className=\"dropdown__menu__item\" onClick={this.handleUnlockUser}>\n          <FormattedMessage id=\"compose.unblock\" />\n        </li>\n      );\n    }\n\n    return (\n      <li className=\"dropdown__menu__item\" onClick={this.handleBlockUser}>\n        <FormattedMessage id=\"blockUser\"/>\n      </li>\n    );\n  }\n\n  renderUserMenuItems() {\n    return (\n      <div>\n        {this.renderToggleContact()}\n        {this.renderBlockUser()}\n        <li className=\"dropdown__menu__item\" onClick={this.handleChatClear}>\n          <FormattedMessage id=\"clearConversation\"/>\n        </li>\n        <li className=\"dropdown__menu__item\" onClick={this.handleChatDelete}>\n          <FormattedMessage id=\"deleteConversation\"/>\n        </li>\n      </div>\n    );\n  }\n\n  renderGroupMenuItems() {\n    return (\n      <div>\n        <li className=\"dropdown__menu__item\" onClick={this.handleEditGroup}>\n          <i className=\"material-icons\">mode_edit</i>\n          <FormattedMessage id=\"editGroup\"/>\n        </li>\n        {/*<li className=\"dropdown__menu__item\" onClick={this.handleAddPeople}>\n          <i className=\"material-icons\">group_add</i>\n          <FormattedMessage id=\"addPeople\"/>\n        </li>*/}\n        <li className=\"dropdown__menu__item\" onClick={this.handleChatLeave}>\n          <FormattedMessage id=\"leaveGroup\"/>\n        </li>\n        <li className=\"dropdown__menu__item\" onClick={this.handleChatClear}>\n          <FormattedMessage id=\"clearGroup\"/>\n        </li>\n        <li className=\"dropdown__menu__item\" onClick={this.handleChatDelete}>\n          <FormattedMessage id=\"deleteGroup\"/>\n        </li>\n      </div>\n    );\n  }\n\n  renderPeerMenuItems() {\n    const { peer } = this.props;\n\n    switch (peer.type) {\n      case PeerTypes.USER:\n        return this.renderUserMenuItems()\n      case PeerTypes.GROUP:\n        return this.renderGroupMenuItems()\n      default:\n        return null;\n    }\n  }\n\n  renderMediaMenuItems() {\n    return (\n      <div>\n        <li className=\"dropdown__menu__item\">\n          <i className=\"material-icons\">photo</i>\n          Find Photos\n        </li>\n        <li className=\"dropdown__menu__item\">\n          <i className=\"material-icons\">link</i>\n          Find Links\n        </li>\n        <li className=\"dropdown__menu__item\">\n          <i className=\"material-icons\">insert_drive_file</i>\n          Find Documents\n        </li>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <ul className=\"dropdown__menu dropdown__menu--right\" style={{ top: 42 }}>\n        {/*{this.renderMediaMenuItems()}*/}\n        {this.renderPeerMenuItems()}\n      </ul>\n    );\n  }\n}\n\nexport default MoreDropdown;\n"]}