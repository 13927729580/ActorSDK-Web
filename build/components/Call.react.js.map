{"version":3,"sources":["../../src/components/Call.react.js"],"names":[],"mappings":"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","file":"Call.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { Container } from 'flux/utils';\nimport { FormattedMessage } from 'react-intl';\n\nimport { PeerTypes } from '../constants/ActorAppConstants';\n\nimport CallActionCreators from '../actions/CallActionCreators';\n\nimport CallStore from '../stores/CallStore';\nimport UserStore from '../stores/UserStore';\nimport GroupStore from '../stores/GroupStore';\n\nimport CallHeader from './call/CallHeader.react';\nimport CallBody from './call/CallBody.react';\nimport CallControls from './call/CallControls.react';\n\nclass Call extends Component {\n  static getStores = () => [CallStore];\n\n  static calculatePeerInfo() {\n    const peer = CallStore.getPeer();\n    if (peer) {\n      if (peer.type === PeerTypes.USER) {\n        return UserStore.getUser(peer.id);\n      }\n\n      if (peer.type === PeerTypes.GROUP) {\n        return GroupStore.getGroup(peer.id);\n      }\n    }\n\n    return null;\n  }\n\n  static calculateState() {\n    return {\n      isOpen: CallStore.isOpen(),\n      isOutgoing: CallStore.isOutgoing(),\n      callId: CallStore.getId(),\n      callMembers: CallStore.getMembers(),\n      callPeer: CallStore.getPeer(),\n      callState: CallStore.getState(),\n      peerInfo: Call.calculatePeerInfo()\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.onAnswer = this.onAnswer.bind(this);\n    this.onEnd = this.onEnd.bind(this);\n    this.onMuteToggle = this.onMuteToggle.bind(this);\n    this.onClose = this.onClose.bind(this);\n  }\n\n  onAnswer() {\n    CallActionCreators.answerCall(this.state.callId);\n  }\n\n  onEnd() {\n    CallActionCreators.endCall(this.state.callId);\n  }\n\n  onMuteToggle() {\n    CallActionCreators.toggleCallMute(this.state.callId);\n  }\n\n  onClose() {\n    CallActionCreators.hide();\n  }\n\n  onFullscreen() {\n    console.debug('onFullscreen');\n  }\n\n  onUserAdd() {\n    console.debug('onUserAdd');\n  }\n\n  onVideo() {\n    console.debug('onVideo');\n  }\n\n  renderContent() {\n    const {isOpen, callState, peerInfo, isOutgoing} = this.state;\n    if (!isOpen) {\n      return null;\n    }\n\n    return (\n      <div className=\"activity__body\">\n        <section className=\"call\">\n          <CallHeader isOutgoing={isOutgoing} />\n          <CallBody peerInfo={peerInfo} callState={callState}/>\n          <CallControls\n            callState={callState}\n            isOutgoing={isOutgoing}\n            onEnd={this.onEnd}\n            onAnswer={this.onAnswer}\n            onMuteToggle={this.onMuteToggle}\n            onFullscreen={this.onFullscreen}\n            onUserAdd={this.onUserAdd}\n            onVideo={this.onVideo}\n            onClose={this.onClose}\n          />\n      </section>\n      </div>\n    );\n  }\n\n  render() {\n    const className = classNames('activity', {\n      'activity--shown': this.state.isOpen\n    });\n\n    return (\n      <section className={className}>\n        {this.renderContent()}\n      </section>\n    )\n  }\n}\n\nexport default Container.create(Call, {pure: false});\n"]}