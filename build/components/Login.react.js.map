{"version":3,"sources":["../../src/components/Login.react.js"],"names":[],"mappings":"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","file":"Login.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport classnames from 'classnames';\nimport SharedContainer from '../utils/SharedContainer';\nimport { appName, AuthSteps } from '../constants/ActorAppConstants';\nimport { FormattedMessage, FormattedHTMLMessage } from 'react-intl';\n\nimport LoginActionCreators from '../actions/LoginActionCreators';\n\nimport LoginStore from '../stores/LoginStore';\n\nimport TextField from './common/TextField.react';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    const SharedActor = SharedContainer.get();\n    this.appName = SharedActor.appName ? SharedActor.appName : appName;\n  }\n\n  static getStores = () => [LoginStore];\n\n  static calculateState() {\n    return {\n      login: LoginStore.getLogin(),\n      code: LoginStore.getCode(),\n      name: LoginStore.getName(),\n      step: LoginStore.getStep(),\n      errors: LoginStore.getErrors(),\n      isCodeRequested: LoginStore.isCodeRequested(),\n      isCodeSended: LoginStore.isCodeSended(),\n      isSignupStarted: LoginStore.isSignupStarted()\n    }\n  };\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  componentDidMount() {\n    this.handleFocus();\n  }\n\n  componentDidUpdate() {\n    this.handleFocus();\n  }\n\n  // From change handlers\n  onLoginChange = event => {\n    event.preventDefault();\n    LoginActionCreators.changeLogin(event.target.value);\n  };\n  onCodeChange = event => {\n    event.preventDefault();\n    LoginActionCreators.changeCode(event.target.value);\n  };\n  onNameChange = event => {\n    event.preventDefault();\n    LoginActionCreators.changeName(event.target.value);\n  };\n\n  // Form submit handlers\n  onRequestCode = event => {\n    event.preventDefault();\n    LoginActionCreators.requestSms(this.state.login);\n  };\n  onSendCode = event => {\n    event.preventDefault();\n    LoginActionCreators.sendCode(this.state.code);\n  };\n  onSignupRequested = event => {\n    event.preventDefault();\n    LoginActionCreators.sendSignup(this.state.name);\n  };\n\n  handleRestartAuthClick = event => {\n    event.preventDefault();\n    LoginActionCreators.restartAuth();\n  };\n\n  handleFocus = () => {\n    const { step } = this.state;\n\n    switch (step) {\n      case AuthSteps.LOGIN_WAIT:\n        this.refs.login.focus();\n        break;\n      case AuthSteps.CODE_WAIT:\n        this.refs.code.focus();\n        break;\n      case AuthSteps.NAME_WAIT:\n        this.refs.name.focus();\n        break;\n      default:\n    }\n  };\n\n  render() {\n    const { step, errors, login, code, name, isCodeRequested, isCodeSended, isSignupStarted } = this.state;\n    const { intl } = this.context;\n\n    let requestFormClassName = classnames('login-new__forms__form', 'login-new__forms__form--request', {\n      'login-new__forms__form--active': step === AuthSteps.LOGIN_WAIT,\n      'login-new__forms__form--done': step !== AuthSteps.LOGIN_WAIT && isCodeRequested\n    });\n    let checkFormClassName = classnames('login-new__forms__form', 'login-new__forms__form--check', {\n      'login-new__forms__form--active': step === AuthSteps.CODE_WAIT && isCodeRequested,\n      'login-new__forms__form--done': step !== AuthSteps.CODE_WAIT && isCodeSended\n    });\n    let signupFormClassName = classnames('login-new__forms__form', 'login-new__forms__form--signup', {\n      'login-new__forms__form--active': step === AuthSteps.NAME_WAIT\n    });\n\n    const spinner = (\n      <div className=\"spinner\">\n        <div/><div/><div/><div/><div/><div/>\n        <div/><div/><div/><div/><div/><div/>\n      </div>\n    );\n\n    return (\n      <section className=\"login-new row center-xs middle-xs\">\n        <div className=\"login-new__welcome col-xs row center-xs middle-xs\">\n          <img alt={`${this.appName} messenger`}\n               className=\"logo\"\n               src=\"assets/images/logo.png\"\n               srcSet=\"assets/images/logo@2x.png 2x\"/>\n\n          <article>\n            <h1 className=\"login-new__heading\">\n              <FormattedHTMLMessage id=\"login.welcome.header\" values={{appName: this.appName}}/>\n            </h1>\n\n            <FormattedHTMLMessage id=\"login.welcome.text\" values={{appName: this.appName}}/>\n          </article>\n\n          <footer>\n            <div className=\"pull-left\"><FormattedMessage id=\"login.welcome.copyright\" values={{appName: this.appName}}/></div>\n            <div className=\"pull-right\">\n              <a href=\"//actorapp.ghost.io/desktop-apps\">Desktop</a>&nbsp;&nbsp;•&nbsp;&nbsp;\n              <a href=\"//actor.im/ios\">iPhone</a>&nbsp;&nbsp;•&nbsp;&nbsp;\n              <a href=\"//actor.im/android\">Android</a>\n            </div>\n          </footer>\n        </div>\n\n        <div className=\"login-new__forms col-xs-6 col-md-4 row center-xs middle-xs\">\n          <div>\n            <h1 className=\"login-new__heading\"><FormattedMessage id=\"login.signIn\"/></h1>\n\n            <form className={requestFormClassName} onSubmit={this.onRequestCode}>\n              <a className=\"wrong\" onClick={this.handleRestartAuthClick}><FormattedMessage id=\"login.wrong\"/></a>\n              <TextField className=\"login-new__forms__form__input input__material--wide\"\n                         disabled={isCodeRequested || step !== AuthSteps.LOGIN_WAIT}\n                         errorText={errors.login}\n                         floatingLabel={intl.messages['login.phone']}\n                         onChange={this.onLoginChange}\n                         ref=\"login\"\n                         value={login}/>\n              <footer className=\"text-center\">\n                <button className=\"button button--rised button--wide\"\n                        type=\"submit\"\n                        disabled={isCodeRequested}>\n                  <FormattedMessage id=\"button.requestCode\"/>\n                  {isCodeRequested ? spinner : null}\n                </button>\n              </footer>\n            </form>\n\n            <form className={checkFormClassName} onSubmit={this.onSendCode}>\n              <TextField className=\"login-new__forms__form__input input__material--wide\"\n                         disabled={isCodeSended || step !== AuthSteps.CODE_WAIT}\n                         errorText={errors.code}\n                         floatingLabel={intl.messages['login.authCode']}\n                         onChange={this.onCodeChange}\n                         ref=\"code\"\n                         type=\"text\"\n                         value={code}/>\n              <footer className=\"text-center\">\n                <button className=\"button button--rised button--wide\"\n                        type=\"submit\"\n                        disabled={isCodeSended}>\n                  <FormattedMessage id=\"button.checkCode\"/>\n                  {isCodeSended ? spinner : null}\n                </button>\n              </footer>\n            </form>\n\n            <form className={signupFormClassName} onSubmit={this.onSignupRequested}>\n              <TextField className=\"login-new__forms__form__input input__material--wide\"\n                         disabled={isSignupStarted || step === AuthSteps.COMPLETED}\n                         errorText={errors.signup}\n                         floatingLabel={intl.messages['login.yourName']}\n                         onChange={this.onNameChange}\n                         ref=\"name\"\n                         type=\"text\"\n                         value={name}/>\n              <footer className=\"text-center\">\n                <button className=\"button button--rised button--wide\"\n                        type=\"submit\"\n                        disabled={isSignupStarted}>\n                  <FormattedMessage id=\"button.signUp\"/>\n                  {isSignupStarted ? spinner : null}\n                </button>\n              </footer>\n            </form>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default Container.create(Login, {pure: false, withProps: true});\n"]}