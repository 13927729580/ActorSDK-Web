{"version":3,"sources":["../../src/components/Login.react.js"],"names":[],"mappings":"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","file":"Login.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport _ from 'lodash';\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport classnames from 'classnames';\nimport ReactMixin from 'react-mixin';\nimport { IntlMixin } from 'react-intl';\nimport { Styles, TextField } from 'material-ui';\n\nimport { AuthSteps } from '../constants/ActorAppConstants';\n\nimport LoginActionCreators from '../actions/LoginActionCreators';\n\nimport LoginStore from '../stores/LoginStore';\n\nimport ActorTheme from '../constants/ActorTheme';\n\nconst ThemeManager = new Styles.ThemeManager();\n\nclass Login extends Component {\n  constructor(props){\n    super(props);\n  }\n\n  static contextTypes = {\n    router: PropTypes.func\n  };\n\n  static propTypes = {\n    query: PropTypes.object\n  };\n\n  static childContextTypes = {\n    muiTheme: PropTypes.object\n  };\n\n  getChildContext() {\n    return {\n      muiTheme: ThemeManager.getCurrentTheme()\n    }\n  };\n\n  static getStores() {\n    return [LoginStore];\n  }\n\n  static calculateState() {\n    return {\n      login: LoginStore.getLogin(),\n      code: LoginStore.getCode(),\n      name: LoginStore.getName(),\n      step: LoginStore.getStep(),\n      errors: LoginStore.getErrors(),\n      isCodeRequested: LoginStore.isCodeRequested(),\n      isCodeSended: LoginStore.isCodeSended(),\n      isSignupStarted: LoginStore.isSignupStarted()\n    }\n  };\n\n  componentWillMount() {\n    const { query } = this.props;\n\n    ThemeManager.setTheme(ActorTheme);\n  }\n\n  componentDidMount() {\n    this.handleFocus();\n  }\n\n  componentDidUpdate() {\n    this.handleFocus();\n  }\n\n  // From change handlers\n  onLoginChange = event => {\n    event.preventDefault();\n    LoginActionCreators.changeLogin(event.target.value);\n  };\n  onCodeChange = event => {\n    event.preventDefault();\n    LoginActionCreators.changeCode(event.target.value);\n  };\n  onNameChange = event => {\n    event.preventDefault();\n    LoginActionCreators.changeName(event.target.value);\n  };\n\n  // Form submit handlers\n  onRequestCode = event => {\n    event.preventDefault();\n    LoginActionCreators.requestSms(this.state.login);\n  };\n  onSendCode = event => {\n    event.preventDefault();\n    LoginActionCreators.sendCode(this.state.code);\n  };\n  onSignupRequested = event => {\n    event.preventDefault();\n    LoginActionCreators.sendSignup(this.state.name);\n  };\n\n  handleRestartAuthClick = event => {\n    event.preventDefault();\n    LoginActionCreators.restartAuth();\n  };\n\n  handleFocus = () => {\n    const { step } = this.state;\n\n    switch (step) {\n      case AuthSteps.LOGIN_WAIT:\n        this.refs.login.focus();\n        break;\n      case AuthSteps.CODE_WAIT:\n        this.refs.code.focus();\n        break;\n      case AuthSteps.NAME_WAIT:\n        this.refs.name.focus();\n        break;\n      default:\n    }\n  };\n\n  render() {\n    const { step, errors, login, code, name, isCodeRequested, isCodeSended, isSignupStarted } = this.state;\n\n    let requestFormClassName = classnames('login__form', 'login__form--request', {\n      'login__form--active': step === AuthSteps.LOGIN_WAIT,\n      'login__form--done': step !== AuthSteps.LOGIN_WAIT && isCodeRequested\n    });\n    let checkFormClassName = classnames('login__form', 'login__form--check', {\n      'login__form--active': step === AuthSteps.CODE_WAIT && isCodeRequested,\n      'login__form--done': step !== AuthSteps.CODE_WAIT && isCodeSended\n    });\n    let signupFormClassName = classnames('login__form', 'login__form--signup', {\n      'login__form--active': step === AuthSteps.NAME_WAIT\n    });\n\n    const spinner = (\n      <div className=\"spinner\">\n        <div/><div/><div/><div/><div/><div/>\n        <div/><div/><div/><div/><div/><div/>\n      </div>\n    );\n\n    return (\n      <section className=\"login-new row center-xs middle-xs\">\n        <div className=\"login-new__welcome col-xs row center-xs middle-xs\">\n          <img alt=\"Actor messenger\"\n               className=\"logo\"\n               src=\"assets/images/logo.png\"\n               srcSet=\"assets/images/logo@2x.png 2x\"/>\n\n          <article>\n            <h1 className=\"login-new__heading\">Welcome to <strong>Actor</strong></h1>\n            <p>\n              Actor Messenger brings all your business network connections into one place,\n              makes it easily accessible wherever you go.\n            </p>\n            <p>\n              Our aim is to make your work easier, reduce your email amount,\n              make the business world closer by reducing time to find right contacts.\n            </p>\n          </article>\n\n          <footer>\n            <div className=\"pull-left\">Actor Messenger © 2015</div>\n            <div className=\"pull-right\">\n              <a href=\"//actorapp.ghost.io/desktop-apps\">Desktop</a>&nbsp;&nbsp;•&nbsp;&nbsp;\n              <a href=\"//actor.im/ios\">iPhone</a>&nbsp;&nbsp;•&nbsp;&nbsp;\n              <a href=\"//actor.im/android\">Android</a>\n            </div>\n          </footer>\n        </div>\n\n        <div className=\"login-new__form col-xs-6 col-md-4 row center-xs middle-xs\">\n          <div>\n            <h1 className=\"login-new__heading\">{this.getIntlMessage('login.signIn')}</h1>\n\n            <form className={requestFormClassName} onSubmit={this.onRequestCode}>\n              <a className=\"wrong\" onClick={this.handleRestartAuthClick}>{this.getIntlMessage('login.wrong')}</a>\n              <TextField className=\"login__form__input\"\n                         disabled={isCodeRequested || step !== AuthSteps.LOGIN_WAIT}\n                         errorText={errors.login}\n                         floatingLabelText={this.getIntlMessage('login.phone')}\n                         onChange={this.onLoginChange}\n                         ref=\"login\"\n                         value={login}/>\n\n              <footer className=\"text-center\">\n                <button className=\"button button--rised button--wide\"\n                        type=\"submit\"\n                        disabled={isCodeRequested}>\n                  {this.getIntlMessage('button.requestCode')}\n                  {isCodeRequested ? spinner : null}\n                </button>\n              </footer>\n            </form>\n\n            <form className={checkFormClassName} onSubmit={this.onSendCode}>\n              <TextField className=\"login__form__input\"\n                         disabled={isCodeSended || step !== AuthSteps.CODE_WAIT}\n                         errorText={errors.code}\n                         floatingLabelText={this.getIntlMessage('login.authCode')}\n                         onChange={this.onCodeChange}\n                         ref=\"code\"\n                         type=\"text\"\n                         value={code}/>\n\n              <footer className=\"text-center\">\n                <button className=\"button button--rised button--wide\"\n                        type=\"submit\"\n                        disabled={isCodeSended}>\n                  {this.getIntlMessage('button.checkCode')}\n                  {isCodeSended ? spinner : null}\n                </button>\n              </footer>\n            </form>\n\n            <form className={signupFormClassName} onSubmit={this.onSignupRequested}>\n              <TextField className=\"login__form__input\"\n                         disabled={isSignupStarted || step === AuthSteps.COMPLETED}\n                         errorText={errors.signup}\n                         floatingLabelText={this.getIntlMessage('login.yourName')}\n                         onChange={this.onNameChange}\n                         ref=\"name\"\n                         type=\"text\"\n                         value={name}/>\n\n              <footer className=\"text-center\">\n                <button className=\"button button--rised button--wide\"\n                        type=\"submit\"\n                        disabled={isSignupStarted}>\n                  {this.getIntlMessage('button.signUp')}\n                  {isSignupStarted ? spinner : null}\n                </button>\n              </footer>\n            </form>\n\n            <a href=\"https://corp.actor.im\">{this.getIntlMessage('login.enterpriseUser')}</a>\n\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nReactMixin.onClass(Login, IntlMixin);\n\nexport default Container.create(Login, {pure: false});\n"]}