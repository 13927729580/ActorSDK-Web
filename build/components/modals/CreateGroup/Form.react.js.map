{"version":3,"sources":["../../../../src/components/modals/CreateGroup/Form.react.js"],"names":[],"mappings":"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","file":"Form.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport _ from 'lodash';\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport ReactMixin from 'react-mixin';\nimport { IntlMixin, FormattedMessage } from 'react-intl';\nimport { CreateGroupSteps } from '../../../constants/ActorAppConstants';\n\nimport CreateGroupActionCreators from '../../../actions/CreateGroupActionCreators';\n\nimport ContactStore from '../../../stores/PeopleStore';\nimport CreateGroupStore from '../../../stores/CreateGroupStore';\n\nimport ContactItem from './ContactItem.react';\n\nimport TextField from '../../common/TextField.react';\n\nclass CreateGroupForm extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static getStores() {\n    return [ContactStore, CreateGroupStore];\n  }\n\n  static calculateState() {\n    return {\n      step: CreateGroupStore.getCurrentStep(),\n      name: CreateGroupStore.getGroupName(),\n      selectedUserIds: CreateGroupStore.getSelectedUserIds(),\n      contacts: ContactStore.getList()\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.step === CreateGroupSteps.NAME_INPUT) {\n      this.refs.groupName.focus();\n    }\n  }\n\n  onContactToggle = (contact, isSelected) => {\n    const { selectedUserIds } = this.state;\n\n    if (isSelected) {\n      CreateGroupActionCreators.setSelectedUserIds(selectedUserIds.add(contact.uid));\n    } else {\n      CreateGroupActionCreators.setSelectedUserIds(selectedUserIds.remove(contact.uid));\n    }\n  };\n\n  handleNameChange = event => {\n    event.preventDefault();\n\n    this.setState({name: event.target.value});\n  };\n\n  handleNameSubmit = event => {\n    event.preventDefault();\n\n    const { name } = this.state;\n    const trimmedName = name.trim();\n\n    if (trimmedName.length > 0) {\n      CreateGroupActionCreators.setGroupName(trimmedName);\n    }\n  };\n\n  handleCreateGroup = event => {\n    const { name, selectedUserIds } = this.state;\n\n    event.preventDefault();\n    CreateGroupActionCreators.createGroup(name, null, selectedUserIds.toJS());\n  };\n\n  render() {\n    const { step, name, selectedUserIds, contacts } = this.state;\n    let stepForm;\n\n    switch (step) {\n      case CreateGroupSteps.NAME_INPUT:\n        stepForm = (\n          <form className=\"group-name\">\n            <div className=\"modal-new__body\">\n              <TextField className=\"input__material--wide\"\n                         floatingLabel={this.getIntlMessage('modal.createGroup.groupName')}\n                         ref=\"groupName\"\n                         onChange={this.handleNameChange}\n                         value={name}/>\n            </div>\n\n            <footer className=\"modal-new__footer text-right\">\n              <button className=\"button button--lightblue\"\n                      onClick={this.handleNameSubmit}>\n                {this.getIntlMessage('button.addMembers')}\n              </button>\n            </footer>\n\n          </form>\n        );\n        break;\n\n      case CreateGroupSteps.CONTACTS_SELECTION:\n      case CreateGroupSteps.CREATION_STARTED:\n        let contactList = _.map(contacts, (contact, i) => {\n          return (\n            <ContactItem contact={contact} key={i} onToggle={this.onContactToggle}/>\n          );\n        });\n        stepForm = (\n          <form className=\"group-members\">\n            <div className=\"count\">\n              <FormattedMessage message={this.getIntlMessage('members')} numMembers={selectedUserIds.size}/>\n            </div>\n\n            <div className=\"modal-new__body\">\n              <ul className=\"contacts__list\">\n                {contactList}\n              </ul>\n            </div>\n\n            <footer className=\"modal-new__footer text-right\">\n              {\n                step === CreateGroupSteps.CREATION_STARTED\n                  ? <button className=\"button button--lightblue\"\n                            disabled>{this.getIntlMessage('button.createGroup')}</button>\n                  : <button className=\"button button--lightblue\"\n                            onClick={this.handleCreateGroup}>{this.getIntlMessage('button.createGroup')}</button>\n              }\n\n            </footer>\n\n          </form>\n        );\n        break;\n      default:\n    }\n\n    return stepForm;\n  }\n}\n\nReactMixin.onClass(CreateGroupForm, IntlMixin);\n\nexport default Container.create(CreateGroupForm, {pure: false});\n"]}