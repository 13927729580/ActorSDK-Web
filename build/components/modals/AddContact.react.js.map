{"version":3,"sources":["../../../src/components/modals/AddContact.react.js"],"names":[],"mappings":";;;;;;AAIA;;AACA;;;;AACA;;AACA;;;;AACA;;AACA;;AAEA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;;;;;;;;;IAEM,U;;;aACG,S,wBAAY;AACjB,WAAO,2BAAP;AACD,G;;aAEM,c,6BAAiB;AACtB,WAAO;AACL,eAAS,0BAAgB,UAAhB,EADJ;AAEL,mBAAa,0BAAgB,WAAhB;AAFR,KAAP;AAID,G;;AAMD,sBAAY,KAAZ,EAAmB,OAAnB,EAA4B;AAAA;;AAAA,iDAC1B,sBAAM,KAAN,EAAa,OAAb,CAD0B;;AAG1B,UAAK,WAAL,GAAmB,MAAK,WAAL,CAAiB,IAAjB,OAAnB;AACA,UAAK,iBAAL,GAAyB,MAAK,iBAAL,CAAuB,IAAvB,OAAzB;AACA,UAAK,SAAL,GAAiB,sBAAS,MAAK,SAAd,EAAyB,GAAzB,EAA8B,EAAE,UAAU,IAAZ,EAA9B,CAAjB;AACA,UAAK,UAAL,GAAkB,MAAK,UAAL,CAAgB,IAAhB,OAAlB;AACA,UAAK,aAAL,GAAqB,MAAK,aAAL,CAAmB,IAAnB,OAArB;AACA,UAAK,YAAL,GAAoB,MAAK,YAAL,CAAkB,IAAlB,OAApB;AAR0B;AAS3B;;uBAED,kB,iCAAqB;AACnB,aAAS,gBAAT,CAA0B,SAA1B,EAAqC,KAAK,aAA1C,EAAyD,KAAzD;AACD,G;;uBAED,iB,gCAAoB;AAClB,SAAK,IAAL,CAAU,KAAV,CAAgB,KAAhB;AACD,G;;uBAED,oB,mCAAuB;AACrB,aAAS,mBAAT,CAA6B,SAA7B,EAAwC,KAAK,aAA7C,EAA4D,KAA5D;AACD,G;;uBAED,W,0BAAc;AACZ,uCAAyB,KAAzB;AACD,G;;uBAED,iB,8BAAkB,K,EAAO;AACvB,QAAM,QAAQ,MAAM,MAAN,CAAa,KAA3B;AACA,SAAK,QAAL,CAAc,EAAE,YAAF,EAAd;AACA,SAAK,SAAL,CAAe,KAAf;AACD,G;;uBAED,S,sBAAU,K,EAAO;AACf,uCAAyB,SAAzB,CAAmC,KAAnC;AACD,G;;uBAED,U,yBAAa;AACX,uCAAyB,SAAzB,CAAmC,KAAK,KAAL,CAAW,KAA9C;AACD,G;;uBAED,a,0BAAc,K,EAAO;AACnB,QAAI,MAAM,OAAN,KAAkB,4BAAS,KAA/B,EAAsC;AACpC,YAAM,cAAN;AACA,WAAK,UAAL;AACD;AACF,G;;uBAED,Y,yBAAa,G,EAAK,S,EAAW;AAC3B,uCAAyB,aAAzB,CAAuC,GAAvC,EAA4C,SAA5C;AACA,SAAK,WAAL;AACD,G;;uBAED,qB,oCAAwB;AAAA,QACd,KADc,GACJ,KAAK,KADD,CACd,KADc;;AAEtB,WACE;AACE,iBAAU,uBADZ;AAEE,qBAAe,6DAAkB,IAAG,wBAArB,GAFjB;AAGE,gBAAU,KAAK,iBAHjB;AAIE,WAAI,OAJN;AAKE,aAAO,KALT,GADF;AAQD,G;;uBAED,uB,sCAA0B;AAAA;;AAAA,iBACG,KAAK,KADR;AAAA,QAChB,KADgB,UAChB,KADgB;AAAA,QACT,OADS,UACT,OADS;;;AAGxB,QAAI,CAAC,KAAD,IAAU,MAAM,MAAN,KAAiB,EAA/B,EAAmC;AACjC,aACE;AAAA;AAAA,UAAI,WAAU,kEAAd;AACE,qEAAkB,IAAG,wBAArB;AADF,OADF;AAKD;;;;;;;;;;;AAWD,QAAI,QAAQ,MAAR,KAAmB,CAAvB,EAA0B;AACxB,aACE;AAAA;AAAA,UAAI,WAAU,kEAAd;AACE,qEAAkB,IAAG,2BAArB;AADF,OADF;AAKD;;AAED,WAAO,QAAQ,GAAR,CAAY,UAAC,MAAD,EAAS,KAAT,EAAmB;AACpC,aAAO,gEAAa,KAAK,KAAlB,IAA6B,MAA7B,IAAqC,UAAU,OAAK,YAApD,IAAP;AACD,KAFM,CAAP;AAGD,G;;uBAED,M,qBAAS;AACP,WACE;AAAA;AAAA;AACE,0BAAiB,eADnB;AAEE,mBAAU,OAFZ;AAGE,wBAAgB,KAAK,WAHvB;AAIE,oBAJF;AAME;AAAA;AAAA,UAAK,WAAU,aAAf;AACE;AAAA;AAAA,YAAK,WAAU,gBAAf;AAEE;AAAA;AAAA,cAAQ,WAAU,eAAlB;AACE,yEAAkB,IAAG,wBAArB,EAA8C,SAAQ,IAAtD,GADF;AAEE;AAAA;AAAA,gBAAG,WAAU,qCAAb;AACG,yBAAS,KAAK,WADjB;AAAA;AAAA;AAFF,WAFF;AAQE;AAAA;AAAA,cAAK,WAAU,aAAf;AACG,iBAAK,qBAAL;AADH,WARF;AAYE;AAAA;AAAA,cAAQ,WAAU,eAAlB;AACE;AAAA;AAAA,gBAAI,WAAU,sBAAd;AACG,mBAAK,uBAAL;AADH;AADF;AAZF;AADF;AANF,KADF;AA+BD,G;;;;;AAlJG,U,CAYG,Y,GAAe;AACpB,QAAM,iBAAU;AADI,C;kBAyIT,iBAAU,MAAV,CAAiB,UAAjB,C","file":"AddContact.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { debounce } from 'lodash';\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport Modal from 'react-modal';\nimport { FormattedMessage } from 'react-intl';\nimport { KeyCodes } from '../../constants/ActorAppConstants';\n\nimport AddContactActionCreators from '../../actions/AddContactActionCreators';\n\nimport AddContactStore from '../../stores/AddContactStore';\n\nimport TextField from '../common/TextField.react';\nimport ContactItem from './addContact/ContactItem.react';\n\nclass AddContact extends Component {\n  static getStores() {\n    return [AddContactStore];\n  }\n\n  static calculateState() {\n    return {\n      results: AddContactStore.getResults(),\n      isSearching: AddContactStore.isSearching()\n    };\n  }\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.handleClose = this.handleClose.bind(this);\n    this.handleQueryChange = this.handleQueryChange.bind(this);\n    this.findUsers = debounce(this.findUsers, 300, { trailing: true });\n    this.addContact = this.addContact.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n  }\n\n  componentWillMount() {\n    document.addEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  componentDidMount() {\n    this.refs.query.focus();\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  handleClose() {\n    AddContactActionCreators.close();\n  }\n\n  handleQueryChange(event) {\n    const query = event.target.value;\n    this.setState({ query });\n    this.findUsers(query);\n  }\n\n  findUsers(query) {\n    AddContactActionCreators.findUsers(query);\n  }\n\n  addContact() {\n    AddContactActionCreators.findUsers(this.state.query)\n  }\n\n  handleKeyDown(event) {\n    if (event.keyCode === KeyCodes.ENTER) {\n      event.preventDefault();\n      this.addContact()\n    }\n  }\n\n  handleSelect(uid, isContact) {\n    AddContactActionCreators.addToContacts(uid, isContact);\n    this.handleClose();\n  }\n\n  renderUserSearchInput() {\n    const { query } = this.state;\n    return (\n      <TextField\n        className=\"input__material--wide\"\n        floatingLabel={<FormattedMessage id=\"modal.addContact.query\"/>}\n        onChange={this.handleQueryChange}\n        ref=\"query\"\n        value={query}/>\n    );\n  }\n\n  renderUserSearchResults() {\n    const { query, results } = this.state;\n\n    if (!query || query.length === '') {\n      return (\n        <li className=\"add-contact__results__item add-contact__results__item--searching\">\n          <FormattedMessage id=\"modal.addContact.empty\"/>\n        </li>\n      );\n    }\n\n    // Disabled becouse searching is very fast and this message is blinking\n    // if (isSearching) {\n    //   return (\n    //     <li className=\"add-contact__results__item add-contact__results__item--searching\">\n    //       <FormattedMessage id=\"modal.addContact.searching\" values={{query}}/>\n    //     </li>\n    //   );\n    // }\n\n    if (results.length === 0) {\n      return (\n        <li className=\"add-contact__results__item add-contact__results__item--not-found\">\n          <FormattedMessage id=\"modal.addContact.notFound\"/>\n        </li>\n      );\n    }\n\n    return results.map((result, index) => {\n      return <ContactItem key={index} {...result} onSelect={this.handleSelect}/>\n    });\n  }\n\n  render() {\n    return (\n      <Modal\n        overlayClassName=\"modal-overlay\"\n        className=\"modal\"\n        onRequestClose={this.handleClose}\n        isOpen>\n\n        <div className=\"add-contact\">\n          <div className=\"modal__content\">\n\n            <header className=\"modal__header\">\n              <FormattedMessage id=\"modal.addContact.title\" tagName=\"h1\"/>\n              <a className=\"modal__header__close material-icons\"\n                 onClick={this.handleClose}>clear</a>\n            </header>\n\n            <div className=\"modal__body\">\n              {this.renderUserSearchInput()}\n            </div>\n\n            <footer className=\"modal__footer\">\n              <ul className=\"add-contact__results\">\n                {this.renderUserSearchResults()}\n              </ul>\n            </footer>\n\n          </div>\n        </div>\n\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(AddContact);\n"]}