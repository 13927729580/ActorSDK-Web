{"version":3,"sources":["../../../src/components/modals/AddContact.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAkBM,UAAU;YAAV,UAAU;;AACd,WADI,UAAU,CACF,KAAK,EAAE;0BADf,UAAU;;iDAEZ,sBAAM,KAAK,CAAC;;UA6Bd,WAAW,GAAG;aAAM,mCAAyB,KAAK,EAAE;KAAA;;UAEpD,iBAAiB,GAAG,UAAC,KAAK,EAAK;AAC7B,UAAM,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;AACjC,YAAK,QAAQ,CAAC,EAAC,KAAK,EAAL,KAAK,EAAC,CAAC,CAAC;AACvB,YAAK,SAAS,CAAC,KAAK,CAAC,CAAC;KACvB;;UAED,SAAS,GAAG,sBAAS,UAAC,KAAK,EAAK;AAC9B,yCAAyB,SAAS,CAAC,KAAK,CAAC,CAAC;KAC3C,EAAE,GAAG,EAAE,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC;;UAEzB,UAAU,GAAG;aAAM,mCAAyB,SAAS,CAAC,MAAK,KAAK,CAAC,KAAK,CAAC;KAAA;;UAEvE,aAAa,GAAG,UAAC,KAAK,EAAK;AACzB,UAAI,KAAK,CAAC,OAAO,KAAK,4BAAS,GAAG,EAAE;AAClC,aAAK,CAAC,cAAc,EAAE,CAAC;AACvB,cAAK,WAAW,EAAE,CAAC;OACpB,MAAM,IAAI,KAAK,CAAC,OAAO,KAAK,4BAAS,KAAK,EAAE;AAC3C,aAAK,CAAC,cAAc,EAAE,CAAC;AACvB,cAAK,UAAU,EAAE,CAAA;OAClB;KACF;;UAED,YAAY,GAAG,UAAC,GAAG,EAAE,SAAS,EAAK;AACjC,yCAAyB,aAAa,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;AACvD,YAAK,WAAW,EAAE,CAAC;KACpB;;;GAvDA;;AAHG,YAAU,CAOP,cAAc,6BAAG;AACtB,WAAO;AACL,YAAM,EAAE,0BAAgB,MAAM,EAAE;AAChC,aAAO,EAAE,0BAAgB,UAAU,EAAE;AACrC,iBAAW,EAAE,0BAAgB,WAAW,EAAE;KAC3C,CAAC;GACH;;AAbG,YAAU,WAmBd,kBAAkB,iCAAG;AACnB,YAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;GACjE;;AArBG,YAAU,WAuBd,iBAAiB,gCAAG;AAClB,QAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;GACzB;;AAzBG,YAAU,WA2Bd,oBAAoB,mCAAG;AACrB,YAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;GACpE;;AA7BG,YAAU,WA4Dd,MAAM,qBAAG;;;iBACyC,IAAI,CAAC,KAAK;QAAlD,MAAM,UAAN,MAAM;QAAE,WAAW,UAAX,WAAW;QAAE,KAAK,UAAL,KAAK;QAAE,OAAO,UAAP,OAAO;QACnC,IAAI,GAAK,IAAI,CAAC,OAAO,CAArB,IAAI;;AACZ,QAAM,YAAY,GAAG,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,KAAK,EAAE,CAAC;;AAEnD,QAAM,cAAc,GAAG,iBAAI,OAAO,EAAE,UAAC,MAAM,EAAE,KAAK;aAAK,gEAAa,GAAG,EAAE,KAAK,AAAC,IAAK,MAAM,IAAE,QAAQ,EAAE,OAAK,YAAY,AAAC,IAAE;KAAA,CAAC,CAAC;;AAE5H,QAAI,cAAc,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,YAAY,EAAE;AAChD,oBAAc,CAAC,IAAI,CACjB;;UAAI,SAAS,EAAC,kEAAkE;QAC7E,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC;OACxC,CACN,CAAC;KACH;;AAED,QAAM,UAAU,GAAG;AACjB,aAAO,EAAG;AACR,gBAAQ,EAAE,IAAI;AACd,WAAG,EAAE,IAAI;AACT,YAAI,EAAE,IAAI;AACV,aAAK,EAAE,IAAI;AACX,cAAM,EAAE,IAAI;AACZ,cAAM,EAAE,IAAI;AACZ,kBAAU,EAAE,IAAI;AAChB,gBAAQ,EAAE,IAAI;AACd,eAAO,EAAE,IAAI;AACb,eAAO,EAAE,IAAI;AACb,oBAAY,EAAE,IAAI;AAClB,aAAK,EAAE,GAAG;OACX;KACF,CAAC;;AAEF,WACE;;QAAO,SAAS,EAAC,8CAA8C;AACxD,sBAAc,EAAE,GAAG,AAAC;AACpB,cAAM,EAAE,MAAM,AAAC;AACf,aAAK,EAAE,UAAU,AAAC;MAEvB;;UAAQ,SAAS,EAAC,mBAAmB;QACnC;;YAAI,SAAS,EAAC,0BAA0B;UAAE,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC;SAAM;QACvF;;YAAG,SAAS,EAAC,4EAA4E;AACtF,mBAAO,EAAE,IAAI,CAAC,WAAW,AAAC;;SAAU;OAChC;MAET;;UAAK,SAAS,EAAC,iBAAiB;QAC9B,qDAAW,SAAS,EAAC,uBAAuB;AACjC,uBAAa,EAAE,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,AAAC;AACvD,kBAAQ,EAAE,IAAI,CAAC,iBAAiB,AAAC;AACjC,aAAG,EAAC,OAAO;AACX,eAAK,EAAE,KAAK,AAAC,GAAE;OACtB;MAEN;;UAAQ,SAAS,EAAC,mBAAmB;QACnC;;YAAI,SAAS,EAAC,sBAAsB;UAElC,YAAY,GACR;;cAAI,SAAS,EAAC,kEAAkE;YAC7E,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC;WACrC,GACL,cAAc;;;;;;;;AAAA;SASf;OACE;KAEH,CACR;GACH;;SArIG,UAAU;;;AAAV,UAAU,CAKP,SAAS,GAAG;SAAM,2BAAiB;CAAA;;AALtC,UAAU,CAeP,YAAY,GAAG;AACpB,MAAI,EAAE,iBAAU,MAAM;CACvB;kBAuHY,iBAAU,MAAM,CAAC,UAAU,CAAC","file":"AddContact.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { map, debounce } from 'lodash';\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport Modal from 'react-modal';\nimport { FormattedMessage } from 'react-intl';\nimport { KeyCodes } from '../../constants/ActorAppConstants';\n\nimport AddContactActionCreators from '../../actions/AddContactActionCreators';\n\nimport AddContactStore from '../../stores/AddContactStore';\n\nimport TextField from '../common/TextField.react';\nimport ContactItem from './add-contact/ContactItem.react';\n\nclass AddContact extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static getStores = () => [AddContactStore];\n\n  static calculateState() {\n    return {\n      isOpen: AddContactStore.isOpen(),\n      results: AddContactStore.getResults(),\n      isSearching: AddContactStore.isSearching()\n    };\n  }\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  componentWillMount() {\n    document.addEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  componentDidMount() {\n    this.refs.query.focus();\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  handleClose = () => AddContactActionCreators.close();\n\n  handleQueryChange = (event) => {\n    const query = event.target.value;\n    this.setState({query});\n    this.findUsers(query);\n  };\n\n  findUsers = debounce((query) => {\n    AddContactActionCreators.findUsers(query);\n  }, 300, {trailing: true});\n\n  addContact = () => AddContactActionCreators.findUsers(this.state.query);\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === KeyCodes.ESC) {\n      event.preventDefault();\n      this.handleClose();\n    } else if (event.keyCode === KeyCodes.ENTER) {\n      event.preventDefault();\n      this.addContact()\n    }\n  };\n\n  handleSelect = (uid, isContact) => {\n    AddContactActionCreators.addToContacts(uid, isContact);\n    this.handleClose();\n  };\n\n  render() {\n    const { isOpen, isSearching, query, results } = this.state;\n    const { intl } = this.context;\n    const isQueryEmpty = !query || query.length === '';\n\n    const resultContacts = map(results, (result, index) => <ContactItem key={index} {...result} onSelect={this.handleSelect}/>);\n\n    if (resultContacts.length === 0 && !isQueryEmpty) {\n      resultContacts.push(\n        <li className=\"add-contact__results__item add-contact__results__item--not-found\">\n          {intl.messages['modal.addContact.notFound']}\n        </li>\n      );\n    }\n\n    const modalStyle = {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 360\n      }\n    };\n\n    return (\n      <Modal className=\"modal-new modal-new--add-contact add-contact\"\n             closeTimeoutMS={150}\n             isOpen={isOpen}\n             style={modalStyle}>\n\n        <header className=\"modal-new__header\">\n          <h3 className=\"modal-new__header__title\">{intl.messages['modal.addContact.title']}</h3>\n          <a className=\"modal-new__header__close modal-new__header__icon material-icons pull-right\"\n             onClick={this.handleClose}>clear</a>\n        </header>\n\n        <div className=\"modal-new__body\">\n          <TextField className=\"input__material--wide\"\n                     floatingLabel={intl.messages['modal.addContact.query']}\n                     onChange={this.handleQueryChange}\n                     ref=\"query\"\n                     value={query}/>\n        </div>\n\n        <footer className=\"modal-new__footer\">\n          <ul className=\"add-contact__results\">\n          {\n            isQueryEmpty\n              ? <li className=\"add-contact__results__item add-contact__results__item--searching\">\n                  {intl.messages['modal.addContact.empty']}\n                </li>\n              : resultContacts\n\n              // Search is too fast for showing searching status.\n              //: isSearching\n              //  ? <li className=\"add-contact__results__item add-contact__results__item--searching\">\n              //      <FormattedMessage id=\"modal.addContact.searching\" values={{query}}/>\n              //    </li>\n              //  : resultContacts\n          }\n          </ul>\n        </footer>\n\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(AddContact);\n"]}