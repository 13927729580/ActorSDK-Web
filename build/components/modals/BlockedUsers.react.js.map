{"version":3,"sources":["../../../src/components/modals/BlockedUsers.react.js"],"names":[],"mappings":"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","file":"BlockedUsers.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport Modal from 'react-modal';\nimport { Container } from 'flux/utils';\nimport fuzzaldrin from 'fuzzaldrin';\n\nimport { KeyCodes } from '../../constants/ActorAppConstants';\nimport BlockedUsersActionCreators from '../../actions/BlockedUsersActionCreators';\nimport BlockedUsersStore from '../../stores/BlockedUsersStore';\n\nimport ContactItem from '../common/ContactItem.react';\n\nclass BlockedUsers extends Component {\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [BlockedUsersStore];\n  }\n\n  static calculateState() {\n    return BlockedUsersStore.getState();\n  }\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.onClose = this.onClose.bind(this);\n    this.onQueryChange = this.onQueryChange.bind(this);\n    this.onUnblock = this.onUnblock.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextState.isOpen && !this.state.isOpen) {\n      document.addEventListener('keydown', this.onKeyDown, false);\n    } else if (!nextState.isOpen && this.state.isOpen) {\n      document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n  }\n\n  onClose() {\n    BlockedUsersActionCreators.hide();\n  }\n\n  onQueryChange(event) {\n    BlockedUsersActionCreators.setQuery(event.target.value);\n  }\n\n  onUnblock(uid) {\n    BlockedUsersActionCreators.unblockUser(uid, true);\n  }\n\n  onReload() {\n    BlockedUsersActionCreators.loadUsers();\n  }\n\n  onKeyDown(event) {\n    if (event.keyCode === KeyCodes.ESC) {\n      event.preventDefault();\n      this.onClose();\n    }\n  }\n\n  getUsers() {\n    const { users, query } = this.state;\n\n    if (!query) {\n      return users;\n    }\n\n    return users.filter((user) => {\n      const score = fuzzaldrin.score(user.name, query);\n      return score > 0;\n    });\n  }\n\n  renderUsers() {\n    const { intl } = this.context;\n    const { users } = this.state;\n\n    if (!users.length) {\n      return (\n        <li className=\"contacts__list__item contacts__list__item--empty text-center\">\n          {intl.messages['blockedUsersNotExists']}\n        </li>\n      );\n    }\n\n    const filtredUsers = this.getUsers();\n\n    if (!filtredUsers.length) {\n      return (\n        <li className=\"contacts__list__item contacts__list__item--empty text-center\">\n          {intl.messages['blockedUsersNotFound']}\n        </li>\n      );\n    }\n\n    return filtredUsers.map((user) => {\n      return (\n        <ContactItem\n          uid={user.id}\n          name={user.name}\n          placeholder={user.placeholder}\n          avatar={user.avatar}\n          key={user.id}\n        >\n          <button className=\"button button--lightblue\" onClick={() => this.onUnblock(user.id)}>\n            {intl.messages['blockedUsersUnblock']}\n          </button>\n        </ContactItem>\n      );\n    });\n  }\n\n  getStyles() {\n    return {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 440\n      }\n    };\n  }\n\n  render() {\n    const { isOpen, query } = this.state;\n    const { intl } = this.context;\n\n    if (!isOpen) {\n      return null;\n    }\n\n\n    return (\n      <Modal\n        className=\"modal-new modal-new--invite contacts\"\n        closeTimeoutMS={150}\n        isOpen={isOpen}\n        style={this.getStyles()}\n      >\n        <header className=\"modal-new__header\">\n          <a className=\"modal-new__header__icon material-icons\">block</a>\n          <h3 className=\"modal-new__header__title\">{intl.messages['blockedUsersTitle']}</h3>\n\n          <div className=\"pull-right\">\n            <button className=\"button button--lightblue\" onClick={this.onClose}>\n              {intl.messages['button.done']}\n            </button>\n          </div>\n        </header>\n\n        <div className=\"modal-new__body\">\n          <div className=\"modal-new__search\">\n            <i className=\"material-icons\">search</i>\n            <input\n              className=\"input input--search\"\n              type=\"search\"\n              value={query}\n              placeholder={intl.messages['blockedUsersSearch']}\n              onChange={this.onQueryChange}\n            />\n          </div>\n        </div>\n\n        <div className=\"contacts__body\">\n          <ul className=\"contacts__list\">\n            {this.renderUsers()}\n          </ul>\n        </div>\n\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(BlockedUsers);\n"]}