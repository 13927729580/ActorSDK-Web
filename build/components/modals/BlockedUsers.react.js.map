{"version":3,"sources":["../../../src/components/modals/BlockedUsers.react.js"],"names":[],"mappings":"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","file":"BlockedUsers.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport Modal from 'react-modal';\nimport { Container } from 'flux/utils';\nimport fuzzaldrin from 'fuzzaldrin';\n\nimport { KeyCodes } from '../../constants/ActorAppConstants';\nimport BlockedUsersActionCreators from '../../actions/BlockedUsersActionCreators';\nimport BlockedUsersStore from '../../stores/BlockedUsersStore';\n\nimport ContactItem from '../common/ContactItem.react';\n\nclass BlockedUsers extends Component {\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [BlockedUsersStore];\n  }\n\n  static calculateState() {\n    return BlockedUsersStore.getState();\n  }\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.onClose = this.onClose.bind(this);\n    this.onQueryChange = this.onQueryChange.bind(this);\n    this.onUnblock = this.onUnblock.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextState.isOpen && !this.state.isOpen) {\n      document.addEventListener('keydown', this.onKeyDown, false);\n    } else if (!nextState.isOpen && this.state.isOpen) {\n      document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n  }\n\n  onClose() {\n    BlockedUsersActionCreators.hide();\n  }\n\n  onQueryChange(event) {\n    BlockedUsersActionCreators.setQuery(event.target.value);\n  }\n\n  onUnblock(uid) {\n    BlockedUsersActionCreators.unblockUser(uid, true);\n  }\n\n  onReload() {\n    BlockedUsersActionCreators.loadUsers();\n  }\n\n  onKeyDown(event) {\n    if (event.keyCode === KeyCodes.ESC) {\n      event.preventDefault();\n      this.onClose();\n    }\n  }\n\n  getUsers() {\n    const { users, query } = this.state;\n\n    if (!query) {\n      return users;\n    }\n\n    return users.filter((user) => {\n      const score = fuzzaldrin.score(user.name, query);\n      return score > 0;\n    });\n  }\n\n  renderUsers() {\n    const { intl } = this.context;\n    const { users } = this.state;\n\n    if (!users.length) {\n      return (\n        <li className=\"contacts__list__item contacts__list__item--empty text-center\">\n          {intl.messages['blockedUsersNotExists']}\n        </li>\n      );\n    }\n\n    const filtredUsers = this.getUsers();\n\n    if (!filtredUsers.length) {\n      return (\n        <li className=\"contacts__list__item contacts__list__item--empty text-center\">\n          {intl.messages['blockedUsersNotFound']}\n        </li>\n      );\n    }\n\n    return filtredUsers.map((user) => {\n      return (\n        <ContactItem\n          uid={user.id}\n          name={user.name}\n          placeholder={user.placeholder}\n          avatar={user.avatar}\n          key={user.id}\n        >\n          <button className=\"button button--lightblue\" onClick={() => this.onUnblock(user.id)}>\n            {intl.messages['blockedUsersUnblock']}\n          </button>\n        </ContactItem>\n      );\n    });\n  }\n\n  getStyles() {\n    return {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 440\n      }\n    };\n  }\n\n  render() {\n    const { isOpen, query } = this.state;\n    const { intl } = this.context;\n\n    if (!isOpen) {\n      return null;\n    }\n\n\n    return (\n      <Modal\n        className=\"modal-new modal-new--invite contacts\"\n        closeTimeoutMS={150}\n        isOpen={isOpen}\n        style={this.getStyles()}\n      >\n        <header className=\"modal-new__header\">\n          <a className=\"modal-new__header__icon material-icons\">block</a>\n          <h3 className=\"modal-new__header__title\">{intl.messages['blockedUsersTitle']}</h3>\n\n          <div className=\"pull-right\">\n            <button className=\"button button--lightblue\" onClick={this.onClose}>\n              {intl.messages['button.done']}\n            </button>\n          </div>\n        </header>\n\n        <div className=\"modal-new__body\">\n          <div className=\"modal-new__search\">\n            <i className=\"material-icons\">search</i>\n            <input\n              className=\"input input--search\"\n              type=\"search\"\n              value={query}\n              placeholder={intl.messages['blockedUsersSearch']}\n              onChange={this.onQueryChange}\n            />\n          </div>\n        </div>\n\n        <div className=\"contacts__body\">\n          <ul className=\"contacts__list\">\n            {this.renderUsers()}\n          </ul>\n        </div>\n\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(BlockedUsers);\n"]}