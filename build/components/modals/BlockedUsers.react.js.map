{"version":3,"sources":["../../../src/components/modals/BlockedUsers.react.js"],"names":[],"mappings":"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","file":"BlockedUsers.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport Modal from 'react-modal';\nimport { Container } from 'flux/utils';\nimport fuzzaldrin from 'fuzzaldrin';\nimport { FormattedMessage } from 'react-intl';\n\nimport BlockedUsersActionCreators from '../../actions/BlockedUsersActionCreators';\n\nimport BlockedUsersStore from '../../stores/BlockedUsersStore';\n\nimport ContactItem from '../common/ContactItem.react';\n\nclass BlockedUsers extends Component {\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [BlockedUsersStore];\n  }\n\n  static calculateState() {\n    return BlockedUsersStore.getState();\n  }\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.handleClose = this.handleClose.bind(this);\n    this.onQueryChange = this.onQueryChange.bind(this);\n    this.onUnblock = this.onUnblock.bind(this);\n  }\n\n  handleClose() {\n    BlockedUsersActionCreators.hide();\n  }\n\n  onQueryChange(event) {\n    BlockedUsersActionCreators.setQuery(event.target.value);\n  }\n\n  onUnblock(uid) {\n    BlockedUsersActionCreators.unblockUser(uid, true);\n  }\n\n  onReload() {\n    BlockedUsersActionCreators.loadUsers();\n  }\n\n  getUsers() {\n    const { users, query } = this.state;\n\n    if (!query || query === '') return users;\n\n    return users.filter((user) => {\n      const score = fuzzaldrin.score(user.name, query);\n      return score > 0;\n    });\n  }\n\n  renderUsers() {\n    const { users } = this.state;\n\n    if (!users.length) {\n      return (\n        <div className=\"contacts__list__item contacts__list__item--empty text-center\">\n          <FormattedMessage id=\"modal.blockedUsers.notExists\"/>\n        </div>\n      );\n    }\n\n    const filtredUsers = this.getUsers();\n\n    if (!filtredUsers.length) {\n      return (\n        <div className=\"contacts__list__item contacts__list__item--empty text-center\">\n          <FormattedMessage id=\"modal.blockedUsers.notFound\"/>\n        </div>\n      );\n    }\n\n    return filtredUsers.map((user) => {\n      return (\n        <ContactItem\n          uid={user.id}\n          name={user.name}\n          placeholder={user.placeholder}\n          avatar={user.avatar}\n          key={user.id}\n        >\n          <button className=\"button button--lightblue\" onClick={() => this.onUnblock(user.id)}>\n            <FormattedMessage id=\"modal.blockedUsers.unblock\"/>\n          </button>\n        </ContactItem>\n      );\n    });\n  }\n\n  renderSearch() {\n    const { intl } = this.context;\n    const { query } = this.state;\n\n    return (\n      <div className=\"small-search\">\n        <i className=\"material-icons\">search</i>\n        <input\n          className=\"input\"\n          type=\"search\"\n          value={query}\n          placeholder={intl.messages['modal.blockedUsers.search']}\n          onChange={this.onQueryChange}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Modal\n        overlayClassName=\"modal-overlay\"\n        className=\"modal\"\n        onRequestClose={this.handleClose}\n        isOpen>\n\n        <div className=\"blocked-users\">\n          <div className=\"modal__content\">\n\n            <header className=\"modal__header\">\n              <a className=\"modal__header__icon material-icons\">block</a>\n              <FormattedMessage id=\"modal.blockedUsers.title\" tagName=\"h1\"/>\n              <button className=\"button button--lightblue\" onClick={this.handleClose}>\n                <FormattedMessage id=\"button.done\"/>\n              </button>\n            </header>\n\n            <div className=\"modal__body\">\n              {this.renderSearch()}\n            </div>\n\n            <div className=\"contacts__list\">\n              {this.renderUsers()}\n            </div>\n\n          </div>\n        </div>\n\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(BlockedUsers);\n"]}