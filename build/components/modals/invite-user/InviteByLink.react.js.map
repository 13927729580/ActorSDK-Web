{"version":3,"sources":["../../../../src/components/modals/invite-user/InviteByLink.react.js"],"names":[],"mappings":"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","file":"InviteByLink.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { assign } from 'lodash';\nimport React, { Component, PropTypes } from 'react';\nimport Modal from 'react-modal';\nimport ReactMixin from 'react-mixin';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport { FormattedMessage } from 'react-intl';\nimport { escapeWithEmoji } from '../../../utils/EmojiUtils'\n\nimport { KeyCodes } from '../../../constants/ActorAppConstants';\n\nimport InviteUserByLinkActions from '../../../actions/InviteUserByLinkActions';\nimport InviteUserActions from '../../../actions/InviteUserActions';\n\nimport InviteUserStore from '../../../stores/InviteUserStore';\n\nconst getStateFromStores = () => {\n  return {\n    isOpen: InviteUserStore.isInviteWithLinkModalOpen(),\n    group: InviteUserStore.getGroup(),\n    inviteUrl: InviteUserStore.getInviteUrl()\n  };\n};\n\nclass InviteByLink extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = getStateFromStores();\n\n    InviteUserStore.addChangeListener(this.onChange);\n  }\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  componentWillUnmount() {\n    InviteUserStore.removeChangeListener(this.onChange);\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextState.isOpen && !this.state.isOpen) {\n      document.addEventListener('keydown', this.onKeyDown, false);\n    } else if (this.state.isOpen && !nextState.isOpen) {\n      document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n  }\n\n  onChange = () => this.setState(getStateFromStores());\n  onClose = () => InviteUserByLinkActions.hide();\n  onInviteLinkClick = event => event.target.select();\n\n  onBackClick = () => {\n    const { group } = this.state;\n\n    this.onClose();\n    InviteUserActions.show(group);\n  };\n\n  onKeyDown = (event) => {\n    if (event.keyCode === KeyCodes.ESC) {\n      event.preventDefault();\n      this.onClose();\n    }\n  };\n\n  render() {\n    const { group, inviteUrl, isOpen } = this.state;\n    const { intl } = this.context;\n\n    const groupName = (group !== null) ? <b dangerouslySetInnerHTML={{__html: escapeWithEmoji(group.name)}}/> : null;\n\n    const modalStyle = {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 440\n      }\n    };\n\n    if (isOpen) {\n      return (\n        <Modal className=\"modal-new modal-new--invite-by-link\"\n               closeTimeoutMS={150}\n               isOpen={isOpen}\n               style={modalStyle}>\n\n          <header className=\"modal-new__header\">\n            <svg className=\"modal-new__header__icon icon icon--blue\"\n                 dangerouslySetInnerHTML={{__html: '<use xlink:href=\"assets/images/icons.svg#back\"/>'}}\n                 onClick={this.onBackClick}/>\n\n            <h3 className=\"modal-new__header__title\">\n              {intl.messages['inviteByLinkModalTitle']}\n            </h3>\n\n            <div className=\"pull-right\">\n              <button className=\"button button--lightblue\" onClick={this.onClose}>{intl.messages['button.done']}</button>\n            </div>\n          </header>\n\n          <div className=\"modal-new__body\">\n            <FormattedMessage id=\"inviteByLinkModalDescription\" values={{groupName}}/>\n            <textarea className=\"textarea\" onClick={this.onInviteLinkClick} readOnly row=\"3\" value={inviteUrl}/>\n          </div>\n\n          <footer className=\"modal-new__footer\">\n            <button className=\"button button--rised pull-left hide\">\n              {intl.messages['inviteByLinkModalRevokeButton']}\n            </button>\n            <button className=\"button button--rised pull-right hide\">\n              {intl.messages['inviteByLinkModalCopyButton']}\n            </button>\n          </footer>\n        </Modal>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nReactMixin.onClass(InviteByLink, PureRenderMixin);\n\nexport default InviteByLink;\n"]}