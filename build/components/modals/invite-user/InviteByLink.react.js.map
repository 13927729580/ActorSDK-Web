{"version":3,"sources":["../../../../src/components/modals/invite-user/InviteByLink.react.js"],"names":[],"mappings":"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","file":"InviteByLink.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport Modal from 'react-modal';\nimport { FormattedMessage } from 'react-intl';\nimport { Container } from 'flux/utils';\n\nimport { escapeWithEmoji } from '../../../utils/EmojiUtils'\n\nimport { KeyCodes } from '../../../constants/ActorAppConstants';\n\nimport SvgIcon from '../../common/SvgIcon.react';\n\nimport InviteUserByLinkActions from '../../../actions/InviteUserByLinkActions';\nimport InviteUserActions from '../../../actions/InviteUserActions';\n\nimport InviteUserStore from '../../../stores/InviteUserStore';\n\nclass InviteByLink extends Component {\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [InviteUserStore];\n  }\n\n  static calculateState() {\n    return {\n      isOpen: InviteUserStore.isInviteWithLinkModalOpen(),\n      group: InviteUserStore.getGroup(),\n      inviteUrl: InviteUserStore.getInviteUrl()\n    };\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextState.isOpen && !this.state.isOpen) {\n      document.addEventListener('keydown', this.onKeyDown, false);\n    } else if (this.state.isOpen && !nextState.isOpen) {\n      document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n  }\n\n  onClose = () => InviteUserByLinkActions.hide();\n  onInviteLinkClick = event => event.target.select();\n\n  onBackClick = () => {\n    const { group } = this.state;\n\n    this.onClose();\n    InviteUserActions.show(group);\n  };\n\n  onKeyDown = (event) => {\n    if (event.keyCode === KeyCodes.ESC) {\n      event.preventDefault();\n      this.onClose();\n    }\n  };\n\n  render() {\n    const { group, inviteUrl, isOpen } = this.state;\n    const { intl } = this.context;\n\n    const groupName = (group !== null) ? <b dangerouslySetInnerHTML={{ __html: escapeWithEmoji(group.name) }}/> : null;\n\n    const modalStyle = {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 440\n      }\n    };\n\n    if (isOpen) {\n      return (\n        <Modal className=\"modal-new modal-new--invite-by-link\"\n               closeTimeoutMS={150}\n               isOpen={isOpen}\n               style={modalStyle}>\n\n          <header className=\"modal-new__header\">\n\n            <SvgIcon\n              className=\"modal-new__header__icon icon icon--blue\"\n              glyph=\"back\"\n              onClick={this.onBackClick}\n            />\n\n            <h3 className=\"modal-new__header__title\">\n              {intl.messages['inviteByLinkModalTitle']}\n            </h3>\n\n            <div className=\"pull-right\">\n              <button className=\"button button--lightblue\" onClick={this.onClose}>{intl.messages['button.done']}</button>\n            </div>\n          </header>\n\n          <div className=\"modal-new__body\">\n            <FormattedMessage id=\"inviteByLinkModalDescription\" values={{ groupName }}/>\n            <textarea className=\"textarea\" onClick={this.onInviteLinkClick} readOnly row=\"3\" value={inviteUrl}/>\n          </div>\n\n          <footer className=\"modal-new__footer\">\n            <button className=\"button button--rised pull-left hide\">\n              {intl.messages['inviteByLinkModalRevokeButton']}\n            </button>\n            <button className=\"button button--rised pull-right hide\">\n              {intl.messages['inviteByLinkModalCopyButton']}\n            </button>\n          </footer>\n        </Modal>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default Container.create(InviteByLink);\n"]}