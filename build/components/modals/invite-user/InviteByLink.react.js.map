{"version":3,"sources":["../../../../src/components/modals/invite-user/InviteByLink.react.js"],"names":[],"mappings":"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","file":"InviteByLink.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport Modal from 'react-modal';\nimport { FormattedMessage } from 'react-intl';\nimport { Container } from 'flux/utils';\n\nimport { escapeWithEmoji } from '../../../utils/EmojiUtils'\n\nimport { KeyCodes } from '../../../constants/ActorAppConstants';\n\nimport SvgIcon from '../../common/SvgIcon.react';\n\nimport InviteUserByLinkActions from '../../../actions/InviteUserByLinkActions';\nimport InviteUserActions from '../../../actions/InviteUserActions';\n\nimport InviteUserStore from '../../../stores/InviteUserStore';\n\nclass InviteByLink extends Component {\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [InviteUserStore];\n  }\n\n  static calculateState() {\n    return {\n      isOpen: InviteUserStore.isInviteWithLinkModalOpen(),\n      group: InviteUserStore.getGroup(),\n      inviteUrl: InviteUserStore.getInviteUrl()\n    };\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextState.isOpen && !this.state.isOpen) {\n      document.addEventListener('keydown', this.onKeyDown, false);\n    } else if (this.state.isOpen && !nextState.isOpen) {\n      document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n  }\n\n  onClose = () => InviteUserByLinkActions.hide();\n  onInviteLinkClick = event => event.target.select();\n\n  onBackClick = () => {\n    const { group } = this.state;\n\n    this.onClose();\n    InviteUserActions.show(group);\n  };\n\n  onKeyDown = (event) => {\n    if (event.keyCode === KeyCodes.ESC) {\n      event.preventDefault();\n      this.onClose();\n    }\n  };\n\n  render() {\n    const { group, inviteUrl, isOpen } = this.state;\n    const { intl } = this.context;\n\n    const groupName = (group !== null) ? <b dangerouslySetInnerHTML={{__html: escapeWithEmoji(group.name)}}/> : null;\n\n    const modalStyle = {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 440\n      }\n    };\n\n    if (isOpen) {\n      return (\n        <Modal className=\"modal-new modal-new--invite-by-link\"\n               closeTimeoutMS={150}\n               isOpen={isOpen}\n               style={modalStyle}>\n\n          <header className=\"modal-new__header\">\n\n            <SvgIcon\n              className=\"modal-new__header__icon icon icon--blue\"\n              glyph=\"back\"\n              onClick={this.onBackClick}\n            />\n\n            <h3 className=\"modal-new__header__title\">\n              {intl.messages['inviteByLinkModalTitle']}\n            </h3>\n\n            <div className=\"pull-right\">\n              <button className=\"button button--lightblue\" onClick={this.onClose}>{intl.messages['button.done']}</button>\n            </div>\n          </header>\n\n          <div className=\"modal-new__body\">\n            <FormattedMessage id=\"inviteByLinkModalDescription\" values={{groupName}}/>\n            <textarea className=\"textarea\" onClick={this.onInviteLinkClick} readOnly row=\"3\" value={inviteUrl}/>\n          </div>\n\n          <footer className=\"modal-new__footer\">\n            <button className=\"button button--rised pull-left hide\">\n              {intl.messages['inviteByLinkModalRevokeButton']}\n            </button>\n            <button className=\"button button--rised pull-right hide\">\n              {intl.messages['inviteByLinkModalCopyButton']}\n            </button>\n          </footer>\n        </Modal>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default Container.create(InviteByLink);\n"]}