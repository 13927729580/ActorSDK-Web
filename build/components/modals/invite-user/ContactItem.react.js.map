{"version":3,"sources":["../../../../src/components/modals/invite-user/ContactItem.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAkBiB,eAAe,oBAAzB,MAAM,CAAI,eAAe;;AAEhC,IAAM,iBAAiB,GAAG,SAApB,iBAAiB,CAAI,KAAK,EAAK;MAC3B,OAAO,GAAK,KAAK,CAAjB,OAAO;;AAEf,SAAO;AACL,mBAAe,EAAE,0BAAgB,kBAAkB,CAAC,OAAO,CAAC,GAAG,CAAC;GACjE,CAAA;CACF,CAAC;;IAEI,WAAW;YAAX,WAAW;;AAOf,WAPI,WAAW,CAOH,KAAK,EAAE;0BAPf,WAAW;;uEAAX,WAAW,aAQP,KAAK;;UAUb,QAAQ,GAAG,YAAM;wBACe,MAAK,KAAK;UAAhC,OAAO,eAAP,OAAO;UAAE,QAAQ,eAAR,QAAQ;;AAEzB,gCAAgB,iBAAiB,CAAC,MAAK,QAAQ,CAAC,CAAC;AACjD,cAAQ,CAAC,OAAO,CAAC,CAAC;KACnB;;UAED,QAAQ,GAAG,YAAM;AACf,YAAK,QAAQ,CAAC,iBAAiB,CAAC,MAAK,KAAK,CAAC,CAAC,CAAC;;AAE7C,gBAAU,CAAC,YAAM;YACP,eAAe,GAAK,MAAK,KAAK,CAA9B,eAAe;;AACvB,YAAI,eAAe,KAAK,qCAAkB,OAAO,IAAI,eAAe,KAAK,qCAAkB,OAAO,EAAE;AAClG,oCAAgB,oBAAoB,CAAC,MAAK,QAAQ,CAAC,CAAC;SACrD;OACF,EAAE,CAAC,CAAC,CAAC;KACP;;AAxBC,UAAK,KAAK,GAAG,iBAAiB,CAAC,KAAK,CAAC,CAAC;;GACvC;;eAXG,WAAW;;2CAaQ;UACb,OAAO,GAAK,IAAI,CAAC,KAAK,CAAtB,OAAO;;AACf,gCAAgB,oBAAoB,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;KACnD;;;6BAoBQ;mBACuB,IAAI,CAAC,KAAK;UAAhC,OAAO,UAAP,OAAO;UAAE,QAAQ,UAAR,QAAQ;UACjB,eAAe,GAAK,IAAI,CAAC,KAAK,CAA9B,eAAe;;AAEvB,UAAM,gBAAgB,GAAG,0BAAW,0BAA0B,EAAE;AAC9D,sCAA8B,EAAE,QAAQ;OACzC,CAAC,CAAC;;AAEH,UAAM,QAAQ,GAAG,QAAQ,GACrB;;UAAG,SAAS,EAAC,gBAAgB;;OAAU,GACvC;2BAAU,IAAI;UAAC,YAAY,EAAE,eAAe,AAAC;QAC3C;6BAAU,OAAO;;UACf;;cAAG,SAAS,EAAC,gBAAgB,EAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,AAAC;;WAAe;SACnD;QACnB;6BAAU,UAAU;;UAClB;;cAAG,SAAS,EAAC,qBAAqB;;WAAc;SAC5B;QACtB;6BAAU,OAAO;;UACf;;cAAG,SAAS,EAAC,gBAAgB;;WAAU;SACtB;QACnB;6BAAU,OAAO;;UACf;;cAAG,SAAS,EAAC,gBAAgB;;WAAY;SACxB;OACL,CAAC;;AAErB,aACE;;UAAI,SAAS,EAAE,gBAAgB,AAAC;QAC9B,sDAAY,KAAK,EAAE,OAAO,CAAC,MAAM,AAAC;AACtB,qBAAW,EAAE,OAAO,CAAC,WAAW,AAAC;AACjC,cAAI,EAAC,OAAO;AACZ,eAAK,EAAE,OAAO,CAAC,IAAI,AAAC,GAAE;QAElC;;YAAK,SAAS,EAAC,QAAQ;UACrB,wCAAM,SAAS,EAAC,OAAO,EAAC,uBAAuB,EAAE,EAAC,MAAM,EAAE,iCAAgB,OAAO,CAAC,IAAI,CAAC,EAAC,AAAC,GAAE;SACvF;QAEN;;YAAK,SAAS,EAAC,UAAU;UACtB,QAAQ;SACL;OACH,CACL;KACH;;;SA7EG,WAAW;GAAS,gBAAM,SAAS;;AAAnC,WAAW,CACR,SAAS,GAAG;AACjB,SAAO,EAAE,gBAAM,SAAS,CAAC,MAAM;AAC/B,UAAQ,EAAE,gBAAM,SAAS,CAAC,IAAI;AAC9B,UAAQ,EAAE,gBAAM,SAAS,CAAC,IAAI;CAC/B;;AA2EH,qBAAW,OAAO,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;;kBAElC,WAAW","file":"ContactItem.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport React from 'react';\nimport ReactMixin from 'react-mixin';\nimport addons from 'react/addons';\nimport classnames from 'classnames';\n\nimport InviteUserStore from '../../../stores/InviteUserStore';\n\nimport { AsyncActionStates } from '../../../constants/ActorAppConstants';\n\nimport AvatarItem from '../../common/AvatarItem.react';\nimport Stateful from '../../common/Stateful';\n\nimport { escapeWithEmoji } from '../../../utils/EmojiUtils';\n\nconst {addons: { PureRenderMixin }} = addons;\n\nconst getStateFromStore = (props) => {\n  const { contact } = props;\n\n  return {\n    inviteUserState: InviteUserStore.getInviteUserState(contact.uid)\n  }\n};\n\nclass ContactItem extends React.Component {\n  static propTypes = {\n    contact: React.PropTypes.object,\n    onSelect: React.PropTypes.func,\n    isMember: React.PropTypes.bool\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = getStateFromStore(props);\n  }\n\n  componentWillUnmount() {\n    const { contact } = this.props;\n    InviteUserStore.resetInviteUserState(contact.uid);\n  }\n\n  onSelect = () => {\n    const { contact, onSelect } = this.props;\n\n    InviteUserStore.addChangeListener(this.onChange);\n    onSelect(contact);\n  };\n\n  onChange = () => {\n    this.setState(getStateFromStore(this.props));\n\n    setTimeout(() => {\n      const { inviteUserState } = this.state;\n      if (inviteUserState === AsyncActionStates.SUCCESS || inviteUserState === AsyncActionStates.FAILURE) {\n        InviteUserStore.removeChangeListener(this.onChange);\n      }\n    }, 0);\n  };\n\n  render() {\n    const { contact, isMember } = this.props;\n    const { inviteUserState } = this.state;\n\n    const contactClassName = classnames('contacts__list__item row', {\n      'contacts__list__item--member': isMember\n    });\n\n    const controls = isMember\n      ? <i className=\"material-icons\">check</i>\n      : <Stateful.Root currentState={inviteUserState}>\n          <Stateful.Pending>\n            <a className=\"material-icons\" onClick={this.onSelect}>person_add</a>\n          </Stateful.Pending>\n          <Stateful.Processing>\n            <i className=\"material-icons spin\">autorenew</i>\n          </Stateful.Processing>\n          <Stateful.Success>\n            <i className=\"material-icons\">check</i>\n          </Stateful.Success>\n          <Stateful.Failure>\n            <i className=\"material-icons\">warning</i>\n          </Stateful.Failure>\n        </Stateful.Root>;\n\n    return (\n      <li className={contactClassName}>\n        <AvatarItem image={contact.avatar}\n                    placeholder={contact.placeholder}\n                    size=\"small\"\n                    title={contact.name}/>\n\n        <div className=\"col-xs\">\n          <span className=\"title\" dangerouslySetInnerHTML={{__html: escapeWithEmoji(contact.name)}}/>\n        </div>\n\n        <div className=\"controls\">\n          {controls}\n        </div>\n      </li>\n    );\n  }\n}\n\nReactMixin.onClass(ContactItem, PureRenderMixin);\n\nexport default ContactItem;\n"]}