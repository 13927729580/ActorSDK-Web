{"version":3,"sources":["../../../../src/components/modals/invite-user/ContactItem.react.js"],"names":[],"mappings":"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","file":"ContactItem.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport ReactMixin from 'react-mixin';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport classnames from 'classnames';\n\nimport InviteUserStore from '../../../stores/InviteUserStore';\n\nimport { AsyncActionStates } from '../../../constants/ActorAppConstants';\n\nimport AvatarItem from '../../common/AvatarItem.react';\nimport Stateful from '../../common/Stateful';\n\nimport { escapeWithEmoji } from '../../../utils/EmojiUtils';\n\nconst getStateFromStore = (props) => {\n  const { contact } = props;\n\n  return {\n    inviteUserState: InviteUserStore.getInviteUserState(contact.uid)\n  }\n};\n\nclass ContactItem extends Component {\n  static propTypes = {\n    contact: PropTypes.object,\n    onSelect: PropTypes.func,\n    isMember: PropTypes.bool\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = getStateFromStore(props);\n  }\n\n  componentWillUnmount() {\n    const { contact } = this.props;\n    InviteUserStore.resetInviteUserState(contact.uid);\n  }\n\n  onSelect = () => {\n    const { contact, onSelect } = this.props;\n\n    InviteUserStore.addChangeListener(this.onChange);\n    onSelect(contact);\n  };\n\n  onChange = () => {\n    this.setState(getStateFromStore(this.props));\n\n    setTimeout(() => {\n      const { inviteUserState } = this.state;\n      if (inviteUserState === AsyncActionStates.SUCCESS || inviteUserState === AsyncActionStates.FAILURE) {\n        InviteUserStore.removeChangeListener(this.onChange);\n      }\n    }, 0);\n  };\n\n  render() {\n    const { contact, isMember } = this.props;\n    const { inviteUserState } = this.state;\n\n    const contactClassName = classnames('contacts__list__item row', {\n      'contacts__list__item--member': isMember\n    });\n\n    const controls = isMember\n      ? <i className=\"material-icons\">check</i>\n      : <Stateful.Root currentState={inviteUserState}>\n          <Stateful.Pending>\n            <a className=\"material-icons\" onClick={this.onSelect}>person_add</a>\n          </Stateful.Pending>\n          <Stateful.Processing>\n            <i className=\"material-icons spin\">autorenew</i>\n          </Stateful.Processing>\n          <Stateful.Success>\n            <i className=\"material-icons\">check</i>\n          </Stateful.Success>\n          <Stateful.Failure>\n            <i className=\"material-icons\">warning</i>\n          </Stateful.Failure>\n        </Stateful.Root>;\n\n    return (\n      <li className={contactClassName}>\n        <AvatarItem image={contact.avatar}\n                    placeholder={contact.placeholder}\n                    size=\"small\"\n                    title={contact.name}/>\n\n        <div className=\"col-xs\">\n          <span className=\"title\" dangerouslySetInnerHTML={{__html: escapeWithEmoji(contact.name)}}/>\n        </div>\n\n        <div className=\"controls\">\n          {controls}\n        </div>\n      </li>\n    );\n  }\n}\n\nReactMixin.onClass(ContactItem, PureRenderMixin);\n\nexport default ContactItem;\n"]}