{"version":3,"sources":["../../../../src/components/modals/preferences/BlockedUsers.react.js"],"names":[],"mappings":"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","file":"BlockedUsers.react.js","sourcesContent":["/*\n * Copyright (C) 2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport fuzzaldrin from 'fuzzaldrin';\nimport { FormattedMessage } from 'react-intl';\n\nimport BlockedUsersActionCreators from '../../../actions/BlockedUsersActionCreators';\n\nimport BlockedUsersStore from '../../../stores/BlockedUsersStore';\n\nimport ContactItem from '../../common/ContactItem.react';\n\nclass BlockedUsers extends Component {\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [BlockedUsersStore];\n  }\n\n  static calculateState() {\n    return BlockedUsersStore.getState();\n  }\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.handleQueryChange = this.handleQueryChange.bind(this);\n    this.handleUnblock = this.handleUnblock.bind(this);\n  }\n\n  componentWillMount() {\n    BlockedUsersActionCreators.loadUsers();\n  }\n\n  handleQueryChange(event) {\n    BlockedUsersActionCreators.setQuery(event.target.value);\n  }\n\n  handleUnblock(uid) {\n    BlockedUsersActionCreators.unblockUser(uid, true);\n  }\n\n  getUsers() {\n    const { users, query } = this.state;\n\n    if (!query || query === '') return users;\n\n    return users.filter((user) => {\n      const score = fuzzaldrin.score(user.name, query);\n      return score > 0;\n    });\n  }\n\n  renderUsers() {\n    const { users } = this.state;\n\n    if (!users.length) {\n      return (\n        <div className=\"contacts__list__item contacts__list__item--empty text-center\">\n          <FormattedMessage id=\"preferences.blocked.notExists\"/>\n        </div>\n      );\n    }\n\n    const filtredUsers = this.getUsers();\n\n    if (!filtredUsers.length) {\n      return (\n        <div className=\"contacts__list__item contacts__list__item--empty text-center\">\n          <FormattedMessage id=\"preferences.blocked.notFound\"/>\n        </div>\n      );\n    }\n\n    return filtredUsers.map((user) => {\n      return (\n        <ContactItem\n          uid={user.id}\n          name={user.name}\n          placeholder={user.placeholder}\n          avatar={user.avatar}\n          key={user.id}\n        >\n          <button className=\"button button--lightblue\" onClick={() => this.handleUnblock(user.id)}>\n            <FormattedMessage id=\"preferences.blocked.unblock\"/>\n          </button>\n        </ContactItem>\n      );\n    });\n  }\n\n  renderSearch() {\n    const { intl } = this.context;\n    const { query } = this.state;\n\n    return (\n      <div className=\"small-search\">\n        <i className=\"material-icons\">search</i>\n        <input\n          className=\"input\"\n          type=\"search\"\n          value={query}\n          placeholder={intl.messages['preferences.blocked.search']}\n          onChange={this.handleQueryChange}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"preferences__tabs__content blocked-users\">\n        <ul>\n          <li>\n            <i className=\"icon material-icons\">block</i>\n            <FormattedMessage id=\"preferences.blocked.title\" tagName=\"h4\"/>\n            {this.renderSearch()}\n            {this.renderUsers()}\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default Container.create(BlockedUsers);\n"]}