{"version":3,"sources":["../../../../src/components/modals/SendAttachment/Modal.react.js"],"names":[],"mappings":"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","file":"Modal.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport { findDOMNode } from 'react-dom';\nimport Modal from 'react-modal';\n\nimport { KeyCodes } from '../../../constants/ActorAppConstants';\n\nimport AttachmentsActionCreators from '../../../actions/AttachmentsActionCreators';\n\nimport AttachmentStore from '../../../stores/AttachmentStore';\n\nimport Attachment from './Attachment.react';\nimport Pagination from './Pagination.react';\n\nclass SendAttachment extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static getStores() {\n    return [AttachmentStore];\n  }\n\n  static calculateState() {\n    return {\n      isOpen: AttachmentStore.isOpen(),\n      attachments: AttachmentStore.getAllAttachments(),\n      selectedIndex: AttachmentStore.getSelectedIndex()\n    }\n  }\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  componentWillMount() {\n    document.addEventListener('keydown', this.handleKeyDown, false);\n  }\n  componentDidMount() {\n    findDOMNode(this.refs.send).focus()\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  handleClose = () => AttachmentsActionCreators.hide();\n\n  handleKeyDown = (event) => {\n    event.preventDefault();\n    switch (event.keyCode) {\n      case KeyCodes.ESC:\n        this.handleClose();\n        break;\n      case KeyCodes.ENTER:\n        if (event.shiftKey) {\n          this.handleSendAll();\n        } else {\n          this.handleSend();\n        }\n        break;\n    }\n  };\n\n  handleSelect = (index) => AttachmentsActionCreators.selectAttachment(index);\n\n  handleCancel = () => AttachmentsActionCreators.deleteAttachment();\n\n  handleSend = () => AttachmentsActionCreators.sendAttachment(AttachmentStore.getAttachment(), this.state.selectedIndex);\n\n  handleSendAll = () => AttachmentsActionCreators.sendAll(this.state.attachments);\n\n  render() {\n    const { isOpen, attachments, selectedIndex } = this.state;\n    const { intl } = this.context;\n    const isSingleFile = attachments.length > 1;\n    const modalStyle = {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 700\n      }\n    };\n\n    return (\n      <Modal className=\"modal-new modal-new--attachments\"\n             closeTimeoutMS={150}\n             isOpen={isOpen}\n             style={modalStyle}>\n\n        <header className=\"modal-new__header\">\n          <h3 className=\"modal-new__header__title\">{intl.messages['modal.attachments.title']}</h3>\n          {\n            isSingleFile\n              ? <button className=\"button button--lightblue pull-right\"\n                        onClick={this.handleSendAll}>{intl.messages['button.sendAll']}</button>\n              : null\n          }\n        </header>\n\n        <section className=\"modal-new__body\">\n          <Attachment attachment={attachments[selectedIndex]}/>\n        </section>\n\n        <footer className=\"modal-new__footer row\">\n          <div className=\"col-xs\">\n            {\n              isSingleFile\n                ? <Pagination current={selectedIndex}\n                              total={attachments.length - 1}\n                              onChange={this.handleSelect}/>\n                : null\n            }\n          </div>\n\n          <div className=\"col-xs text-right\">\n            <button className=\"button\"\n                    onClick={this.handleCancel}>{intl.messages['button.cancel']}</button>\n            <button className=\"button button--rised\" ref=\"send\"\n                    onClick={this.handleSend}>{intl.messages['button.send']}</button>\n          </div>\n        </footer>\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(SendAttachment, { pure: false });\n"]}