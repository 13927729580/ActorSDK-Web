{"version":3,"sources":["../../../../src/components/modals/SendAttachment/Modal.react.js"],"names":[],"mappings":"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","file":"Modal.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { forEach } from 'lodash';\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport { findDOMNode } from 'react-dom';\nimport Modal from 'react-modal';\n\nimport { KeyCodes } from '../../../constants/ActorAppConstants';\n\nimport AttachmentsActionCreators from '../../../actions/AttachmentsActionCreators';\n\nimport AttachmentStore from '../../../stores/AttachmentStore';\n\nimport Attachment from './Attachment.react';\nimport Pagination from './Pagination.react';\n\nclass SendAttachment extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static getStores = () => [AttachmentStore];\n\n  static calculateState() {\n    return {\n      isOpen: AttachmentStore.isOpen(),\n      attachments: AttachmentStore.getAllAttachments(),\n      selectedIndex: AttachmentStore.getSelectedIndex()\n    }\n  }\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  componentWillMount() {\n    document.addEventListener('keydown', this.handleKeyDown, false);\n  }\n  componentDidMount() {\n    findDOMNode(this.refs.send).focus()\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  handleClose = () => AttachmentsActionCreators.hide();\n\n  handleKeyDown = (event) => {\n    event.preventDefault();\n    switch (event.keyCode) {\n      case KeyCodes.ESC:\n        this.handleClose();\n        break;\n      case KeyCodes.ENTER:\n        if (event.shiftKey) {\n          this.handleSendAll();\n        } else {\n          this.handleSend();\n        }\n        break;\n    }\n  };\n\n  handleSelect = (index) => AttachmentsActionCreators.selectAttachment(index);\n\n  handleCancel = () => AttachmentsActionCreators.deleteAttachment();\n\n  handleSend = () => AttachmentsActionCreators.sendAttachment(AttachmentStore.getAttachment(), this.state.selectedIndex);\n\n  handleSendAll = () => AttachmentsActionCreators.sendAll(this.state.attachments);\n\n  render() {\n    const { isOpen, attachments, selectedIndex } = this.state;\n    const { intl } = this.context;\n    const isSingleFile = attachments.length > 1;\n    const modalStyle = {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 700\n      }\n    };\n\n    return (\n      <Modal className=\"modal-new modal-new--attachments\"\n             closeTimeoutMS={150}\n             isOpen={isOpen}\n             style={modalStyle}>\n\n        <header className=\"modal-new__header\">\n          <h3 className=\"modal-new__header__title\">{intl.messages['modal.attachments.title']}</h3>\n          {\n            isSingleFile\n              ? <button className=\"button button--lightblue pull-right\"\n                        onClick={this.handleSendAll}>{intl.messages['button.sendAll']}</button>\n              : null\n          }\n        </header>\n\n        <section className=\"modal-new__body\">\n          <Attachment attachment={attachments[selectedIndex]}/>\n        </section>\n\n        <footer className=\"modal-new__footer row\">\n          <div className=\"col-xs\">\n            {\n              isSingleFile\n                ? <Pagination current={selectedIndex}\n                              total={attachments.length - 1}\n                              onChange={this.handleSelect}/>\n                : null\n            }\n          </div>\n\n          <div className=\"col-xs text-right\">\n            <button className=\"button\"\n                    onClick={this.handleCancel}>{intl.messages['button.cancel']}</button>\n            <button className=\"button button--rised\" ref=\"send\"\n                    onClick={this.handleSend}>{intl.messages['button.send']}</button>\n          </div>\n        </footer>\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(SendAttachment, {pure: false});\n"]}