{"version":3,"sources":["../../../src/components/modals/EditGroup.react.js"],"names":[],"mappings":"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","file":"EditGroup.react.js","sourcesContent":["/*\n * Copyright (C) 2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component } from 'react';\nimport { Container } from 'flux/utils';\nimport { FormattedMessage } from 'react-intl';\nimport Modal from 'react-modal';\nimport { ModalTypes } from '../../constants/ActorAppConstants';\n\nimport EditGroupStore from '../../stores/EditGroupStore';\n\nimport EditGroupActionCreators from '../../actions/EditGroupActionCreators';\n\nimport TextField from '../common/TextField.react';\nimport PictureChanger from './profile/PictureChanger.react';\n\nclass EditGroup extends Component {\n  static getStores() {\n    return [EditGroupStore];\n  }\n\n  static calculateState() {\n    return {\n      group: EditGroupStore.getGroup(),\n      isAdmin: EditGroupStore.isAdmin(),\n      title: EditGroupStore.getTitle(),\n      about: EditGroupStore.getAbout()\n    }\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleClose = this.handleClose.bind(this);\n    this.handleTitleChange = this.handleTitleChange.bind(this);\n    this.handleAboutChange = this.handleAboutChange.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleChangeGroupAvatar = this.handleChangeGroupAvatar.bind(this);\n    this.handleRemoveGroupPicture = this.handleRemoveGroupPicture.bind(this);\n  }\n\n\n  handleClose() {\n    EditGroupActionCreators.hide();\n  }\n\n  handleTitleChange(event) {\n    this.setState({ title: event.target.value });\n  }\n\n  handleAboutChange(event) {\n    this.setState({ about: event.target.value });\n  }\n\n  handleSave() {\n    const { group, title, about, isAdmin } = this.state;\n    EditGroupActionCreators.editGroupTitle(group.id, title);\n    if (isAdmin) {\n      EditGroupActionCreators.editGroupAbout(group.id, about);\n    }\n    this.handleClose();\n  }\n\n  handleChangeGroupAvatar(croppedImage) {\n    const { group } = this.state;\n    EditGroupActionCreators.changeGroupAvatar(group.id, croppedImage);\n  }\n\n  handleRemoveGroupPicture() {\n    const { group } = this.state;\n    EditGroupActionCreators.removeGroupAvatar(group.id);\n  }\n\n  renderTitle() {\n    const { title } = this.state;\n\n    return (\n      <TextField\n        className=\"input__material--wide\"\n        floatingLabel={<FormattedMessage id=\"modal.group.name\"/>}\n        onChange={this.handleTitleChange}\n        ref=\"name\"\n        value={title}/>\n    );\n  }\n\n  renderAbout() {\n    const { isAdmin, about } = this.state;\n    if (!isAdmin) return null;\n\n    return (\n      <div className=\"about\">\n        <label htmlFor=\"about\"><FormattedMessage id=\"modal.group.about\"/></label>\n        <textarea className=\"textarea\" value={about} onChange={this.handleAboutChange} id=\"about\"/>\n      </div>\n    );\n  }\n\n  render() {\n    const { group } = this.state;\n\n    return (\n      <Modal\n        overlayClassName=\"modal-overlay\"\n        className=\"modal\"\n        onRequestClose={this.handleClose}\n        isOpen>\n\n        <div className=\"edit-group\">\n          <div className=\"modal__content\">\n\n            <header className=\"modal__header\">\n              <i className=\"modal__header__icon material-icons\">edit</i>\n              <FormattedMessage id=\"modal.group.title\" tagName=\"h1\"/>\n              <button className=\"button button--lightblue\" onClick={this.handleSave}>\n                <FormattedMessage id=\"button.done\"/>\n              </button>\n            </header>\n\n            <div className=\"modal__body row\">\n              <div className=\"col-xs\">\n                {this.renderTitle()}\n                {this.renderAbout()}\n              </div>\n\n              <PictureChanger {...group}\n                small\n                fromModal={ModalTypes.EDIT_GROUP}\n                onRemove={this.handleRemoveGroupPicture}\n                onChange={this.handleChangeGroupAvatar}/>\n            </div>\n\n          </div>\n        </div>\n\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(EditGroup, { pure: false });\n"]}