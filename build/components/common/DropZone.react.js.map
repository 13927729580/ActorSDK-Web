{"version":3,"sources":["../../../src/components/common/DropZone.react.js"],"names":[],"mappings":"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","file":"DropZone.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { union, without } from 'lodash';\nimport React, { Component } from 'react';\nimport classnames from 'classnames';\n\nlet targetCollection = [];\n\nexport default class DropZone extends Component {\n  static propTypes = {\n    children: React.PropTypes.node,\n\n    onDropComplete: React.PropTypes.func.isRequired,\n\n    // Callbacks\n    onDragEnterCallback: React.PropTypes.func,\n    onDragLeaveCallback: React.PropTypes.func,\n    onDropCallback: React.PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isActive: false,\n      isHovered: false\n    };\n\n    window.addEventListener('dragenter', this.onWindowDragEnter, false);\n    window.addEventListener('dragover', this.onWindowDragOver, false);\n    window.addEventListener('dragleave', this.onWindowDragLeave, false);\n    window.addEventListener('drop', this.onWindowDragLeave, false);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('dragenter', this.onWindowDragEnter, false);\n    window.removeEventListener('dragover', this.onWindowDragOver, false);\n    window.removeEventListener('dragleave', this.onWindowDragLeave, false);\n    window.removeEventListener('drop', this.onWindowDragLeave, false);\n  }\n\n  onWindowDragEnter = (event) => {\n    event.preventDefault();\n\n    if (targetCollection.length === 0) {\n      this.setState({isActive: true});\n      this.props.onDragEnterCallback && this.props.onDragEnterCallback();\n    }\n\n    targetCollection = union(targetCollection, [event.target]);\n  };\n  onWindowDragOver = (event) => event.preventDefault();\n  onWindowDragLeave = (event) => {\n    event.preventDefault();\n\n    targetCollection = without(targetCollection, event.target);\n\n    if (targetCollection.length === 0) {\n      this.setState({isActive: false});\n      this.props.onDragLeaveCallback && this.props.onDragLeaveCallback();\n    }\n  };\n\n  onDragEnter = () => this.setState({isHovered: true});\n  onDragLeave = () => this.setState({isHovered: false});\n  onDrop = (event) => {\n    this.onDragLeave();\n    this.onWindowDragLeave(event);\n    this.props.onDropCallback && this.props.onDropCallback();\n    this.props.onDropComplete(event.dataTransfer.files);\n  };\n\n  render() {\n    const { isActive, isHovered } = this.state;\n\n    const dropzoneClassName = classnames('dropzone', {\n      'dropzone--hover': isHovered\n    });\n\n    if (isActive) {\n      return (\n        <div className={dropzoneClassName}\n             onDragEnter={this.onDragEnter}\n             onDragLeave={this.onDragLeave}\n             onDrop={this.onDrop}>\n          {this.props.children || 'Drop here'}\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n"]}