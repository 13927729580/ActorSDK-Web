{"version":3,"sources":["../../../src/components/common/DropZone.react.js"],"names":[],"mappings":"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","file":"DropZone.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport classnames from 'classnames';\n\nclass DropZone extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    onDropComplete: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.dragging = false;\n    this.state = {\n      isActive: false,\n      isHovered: false\n    };\n\n    this.onWindowDragEnter = this.onWindowDragEnter.bind(this);\n    this.onWindowDragOver = this.onWindowDragOver.bind(this);\n    this.onWindowDragLeave = this.onWindowDragLeave.bind(this);\n\n    this.onDrop = this.onDrop.bind(this);\n    this.onDragEnter = this.onDragEnter.bind(this);\n    this.onDragLeave = this.onDragLeave.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener('dragenter', this.onWindowDragEnter, false);\n    window.addEventListener('dragover', this.onWindowDragOver, false);\n    window.addEventListener('dragleave', this.onWindowDragLeave, false);\n  }\n\n  componentWillUnmount() {\n    window.addEventListener('dragenter', this.onWindowDragEnter, false);\n    window.addEventListener('dragover', this.onWindowDragOver, false);\n    window.addEventListener('dragleave', this.onWindowDragLeave, false);\n  }\n\n  onWindowDragEnter() {\n    this.dragging = true;\n    if (this.state.isActive) {\n      return;\n    }\n\n    this.setState({isActive: true});\n  }\n\n  onWindowDragOver() {\n    this.dragging = true;\n  }\n\n  onWindowDragLeave() {\n    this.dragging = false;\n    clearTimeout(this.timeout);\n    this.timeout = setTimeout(() => {\n      if (!this.dragging) {\n        this.setState({isActive: false});\n      }\n    }, 300);\n  }\n\n  onDrop(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.onDragLeave();\n    this.props.onDropComplete(event.dataTransfer.files);\n  }\n\n  onDragOver(event) {\n    // Makes it possible to drag files from chrome's download bar\n    // http://stackoverflow.com/questions/19526430/drag-and-drop-file-uploads-from-chrome-downloads-bar\n    try {\n      const effect = event.dataTransfer.effectAllowed;\n      if (effect === 'move' || effect === 'linkMove') {\n        event.dataTransfer.dropEffect = 'move';\n      } else {\n        event.dataTransfer.dropEffect = 'copy';\n      }\n    } catch (e) {\n      // do nothing\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  onDragEnter() {\n    this.setState({isHovered: true});\n  }\n\n  onDragLeave() {\n    this.setState({isHovered: false});\n  }\n\n  render() {\n    const { isActive, isHovered } = this.state;\n\n    if (!isActive) {\n      return null;\n    }\n\n    const className = classnames('dropzone', {\n      'dropzone--hover': isHovered\n    });\n\n    return (\n      <div\n        className={className}\n        onDrop={this.onDrop}\n        onDragOver={this.onDragOver}\n        onDragEnter={this.onDragEnter}\n        onDragLeave={this.onDragLeave}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default DropZone;\n"]}