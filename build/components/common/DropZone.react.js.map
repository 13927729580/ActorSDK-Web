{"version":3,"sources":["../../../src/components/common/DropZone.react.js"],"names":[],"mappings":"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","file":"DropZone.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { union, without } from 'lodash';\nimport React, { Component, PropTypes } from 'react';\nimport classnames from 'classnames';\n\nlet targetCollection = [];\n\nexport default class DropZone extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n\n    onDropComplete: PropTypes.func.isRequired,\n\n    // Callbacks\n    onDragEnterCallback: PropTypes.func,\n    onDragLeaveCallback: PropTypes.func,\n    onDropCallback: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isActive: false,\n      isHovered: false\n    };\n\n    window.addEventListener('dragenter', this.onWindowDragEnter, false);\n    window.addEventListener('dragover', this.onWindowDragOver, false);\n    window.addEventListener('dragleave', this.onWindowDragLeave, false);\n    window.addEventListener('drop', this.onWindowDragLeave, false);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('dragenter', this.onWindowDragEnter, false);\n    window.removeEventListener('dragover', this.onWindowDragOver, false);\n    window.removeEventListener('dragleave', this.onWindowDragLeave, false);\n    window.removeEventListener('drop', this.onWindowDragLeave, false);\n  }\n\n  onWindowDragEnter = (event) => {\n    const { onDragEnterCallback } = this.props;\n    event.preventDefault();\n\n    if (targetCollection.length === 0) {\n      this.setState({isActive: true});\n      onDragEnterCallback && onDragEnterCallback();\n    }\n\n    targetCollection = union(targetCollection, [event.target]);\n  };\n  onWindowDragOver = (event) => event.preventDefault();\n  onWindowDragLeave = (event) => {\n    const { onDragLeaveCallback } = this.props;\n    event.preventDefault();\n\n    targetCollection = without(targetCollection, event.target);\n\n    if (targetCollection.length === 0) {\n      this.setState({isActive: false});\n      onDragLeaveCallback && onDragLeaveCallback();\n    }\n  };\n\n  onDragEnter = () => this.setState({isHovered: true});\n  onDragLeave = () => this.setState({isHovered: false});\n  onDrop = (event) => {\n    const { onDropCallback, onDropComplete } = this.props;\n    this.onDragLeave();\n    this.onWindowDragLeave(event);\n    onDropCallback && onDropCallback();\n    onDropComplete(event.dataTransfer.files);\n  };\n\n  render() {\n    const { isActive, isHovered } = this.state;\n\n    const dropzoneClassName = classnames('dropzone', {\n      'dropzone--hover': isHovered\n    });\n\n    if (isActive) {\n      return (\n        <div className={dropzoneClassName}\n             onDragEnter={this.onDragEnter}\n             onDragLeave={this.onDragLeave}\n             onDrop={this.onDrop}>\n          {this.props.children || 'Drop here'}\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n"]}