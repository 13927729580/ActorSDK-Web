{"version":3,"sources":["../../../src/components/common/SelectList.react.js"],"names":[],"mappings":";;;;;AAIA;;;;AACA;;;;;;;;;;;;AAEO,IAAM,gDAAoB,iBAAU,KAAV,CAAgB;AAC/C,WAAS,iBAAU,MAAV,CAAiB,UADqB;AAE/C,cAAY,iBAAU,IAAV,CAAe;AAFoB,CAAhB,CAA1B;;IAKD,U;;;AAYJ,sBAAY,KAAZ,EAAmB;AAAA;;AAAA,iDACjB,sBAAM,KAAN,CADiB;;AAGjB,UAAK,KAAL,GAAa;AACX,eAAS;AADE,KAAb;;AAIA,UAAK,UAAL,GAAkB,MAAK,UAAL,CAAgB,IAAhB,OAAlB;AACA,UAAK,aAAL,GAAqB,MAAK,aAAL,CAAmB,IAAnB,OAArB;AARiB;AASlB;;uBAED,qB,kCAAsB,S,EAAW,S,EAAW;AAC1C,WAAO,UAAU,OAAV,KAAsB,KAAK,KAAL,CAAW,OAAjC,IACA,UAAU,QAAV,KAAuB,KAAK,KAAL,CAAW,QADlC,IAEA,UAAU,GAAV,KAAkB,KAAK,KAAL,CAAW,GAF7B,IAGA,UAAU,SAAV,KAAwB,KAAK,KAAL,CAAW,SAH1C;AAID,G;;uBAED,e,8BAAkB;AAChB,WAAO;AACL,cAAQ;AACN,iBAAS,KAAK,KAAL,CAAW,OADd;AAEN,oBAAY,KAAK;AAFX;AADH,KAAP;AAMD,G;;uBAED,iB,gCAAoB;AAClB,aAAS,gBAAT,CAA0B,SAA1B,EAAqC,KAAK,aAA1C,EAAyD,KAAzD;AACD,G;;uBAED,oB,mCAAuB;AACrB,aAAS,mBAAT,CAA6B,SAA7B,EAAwC,KAAK,aAA7C,EAA4D,KAA5D;AACD,G;;uBAED,Y,2BAAe;AACb,SAAK,KAAL,CAAW,QAAX,CAAoB,KAAK,KAAL,CAAW,OAA/B;AACD,G;;uBAED,U,yBAAa;AACX,QAAM,OAAO,KAAK,KAAL,CAAW,OAAX,GAAqB,CAAlC;AACA,SAAK,UAAL,CAAgB,OAAO,KAAK,KAAL,CAAW,GAAlB,GAAwB,CAAxB,GAA4B,IAA5C;AACD,G;;uBAED,c,6BAAiB;AACf,QAAM,OAAO,KAAK,KAAL,CAAW,OAAX,GAAqB,CAAlC;AACA,SAAK,UAAL,CAAgB,OAAO,CAAP,GAAW,KAAK,KAAL,CAAW,GAAtB,GAA4B,IAA5C;AACD,G;;uBAED,a,0BAAc,K,EAAO;AACnB,YAAQ,MAAM,OAAd;AACE,WAAK,4BAAS,KAAd;AACE,aAAK,YAAL;AACA;;AAEF,WAAK,4BAAS,QAAd;AACE,aAAK,cAAL;AACA;;AAEF,WAAK,4BAAS,GAAd;AACA,WAAK,4BAAS,UAAd;AACE,aAAK,UAAL;AACA;;AAEF;AACE;AAfJ;;AAkBA,UAAM,eAAN;AACA,UAAM,cAAN;AACD,G;;uBAED,M,qBAAS;AACP,YAAQ,KAAR,CAAc,KAAK,KAAnB;AACA,WACE;AAAA;MAAA,EAAK,WAAW,KAAK,KAAL,CAAW,SAA3B;MACG,KAAK,KAAL,CAAW;AADd,KADF;AAKD,G;;uBAED,U,uBAAW,O,EAAS;AAClB,SAAK,QAAL,CAAc,EAAE,gBAAF,EAAd;AACD,G;;;;;AA/FG,U,CACG,iB,GAAoB;AACzB,UAAQ;AADiB,C;AADvB,U,CAKG,S,GAAY;AACjB,aAAW,iBAAU,MADJ;AAEjB,OAAK,iBAAU,MAAV,CAAiB,UAFL;AAGjB,YAAU,iBAAU,IAAV,CAAe,UAHR;AAIjB,YAAU,iBAAU,IAAV,CAAe;AAJR,C;kBA6FN,U","file":"SelectList.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { KeyCodes } from '../../constants/ActorAppConstants';\n\nexport const SelectContextType = PropTypes.shape({\n  current: PropTypes.number.isRequired,\n  setCurrent: PropTypes.func.isRequired\n});\n\nclass SelectList extends Component {\n  static childContextTypes = {\n    select: SelectContextType\n  };\n\n  static propTypes = {\n    className: PropTypes.string,\n    max: PropTypes.number.isRequired,\n    children: PropTypes.node.isRequired,\n    onSelect: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      current: 0\n    };\n\n    this.setCurrent = this.setCurrent.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.current !== this.state.current ||\n           nextProps.children !== this.props.children ||\n           nextProps.max !== this.props.max ||\n           nextProps.className !== this.props.className;\n  }\n\n  getChildContext() {\n    return {\n      select: {\n        current: this.state.current,\n        setCurrent: this.setCurrent\n      }\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  handleSelect() {\n    this.props.onSelect(this.state.current);\n  }\n\n  handleNext() {\n    const next = this.state.current + 1;\n    this.setCurrent(next > this.props.max ? 0 : next);\n  }\n\n  handlePrevious() {\n    const next = this.state.current - 1;\n    this.setCurrent(next < 0 ? this.props.max : next);\n  }\n\n  handleKeyDown(event) {\n    switch (event.keyCode) {\n      case KeyCodes.ENTER:\n        this.handleSelect();\n        break;\n\n      case KeyCodes.ARROW_UP:\n        this.handlePrevious();\n        break;\n\n      case KeyCodes.TAB:\n      case KeyCodes.ARROW_DOWN:\n        this.handleNext();\n        break;\n\n      default:\n        return;\n    }\n\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  render() {\n    console.debug(this.state);\n    return (\n      <div className={this.props.className}>\n        {this.props.children}\n      </div>\n    )\n  }\n\n  setCurrent(current) {\n    this.setState({ current });\n  }\n}\n\nexport default SelectList;\n"]}