{"version":3,"sources":["../../../src/components/common/VoiceRecorder.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAQM,aAAa;YAAb,aAAa;;AAKjB,WALI,aAAa,CAKL,KAAK,EAAE;0BALf,aAAa;;uEAAb,aAAa,aAMT,KAAK;;UAYb,iBAAiB,GAAG,YAAM;AACxB,YAAK,QAAQ,CAAC,UAAU,EAAE,CAAC;KAC5B;;UAED,gBAAgB,GAAG,YAAM;AACvB,YAAK,QAAQ,CAAC,IAAI,EAAE,CAAC;AACrB,YAAK,QAAQ,CAAC;AACZ,mBAAW,EAAE,KAAK;AAClB,gBAAQ,EAAE,MAAM;OACjB,CAAC,CAAC;KACJ;;UAED,gBAAgB,GAAG,UAAC,KAAK,EAAK;UACpB,QAAQ,GAAK,MAAK,KAAK,CAAvB,QAAQ;;AAChB,cAAQ,IAAI,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;KACpC;;UAED,iBAAiB,GAAG,YAAM;AACxB,YAAK,QAAQ,CAAC,KAAK,EAAE,CAAA;AACrB,YAAK,QAAQ,CAAC,EAAC,WAAW,EAAE,IAAI,EAAC,CAAC,CAAC;KACpC;;UAED,oBAAoB,GAAG,UAAC,KAAK;aAAK,MAAK,QAAQ,CAAC,EAAC,QAAQ,EAAE,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAC,CAAC;KAAA;;AAhClF,UAAK,KAAK,GAAG;AACX,iBAAW,EAAE,KAAK;KACnB,CAAA;;AAED,UAAK,QAAQ,GAAG,4BAAc,CAAC;AAC/B,UAAK,QAAQ,CAAC,gBAAgB,CAAC,UAAU,EAAE,MAAK,oBAAoB,CAAC,CAAC;AACtE,UAAK,QAAQ,CAAC,gBAAgB,CAAC,aAAa,EAAE,MAAK,iBAAiB,CAAC,CAAC;AACtE,UAAK,QAAQ,CAAC,gBAAgB,CAAC,eAAe,EAAE,MAAK,gBAAgB,CAAC,CAAC;;GACxE;;eAhBG,aAAa;;6BA0CR;mBAC2B,IAAI,CAAC,KAAK;UAApC,WAAW,UAAX,WAAW;UAAE,QAAQ,UAAR,QAAQ;;AAE7B,UAAM,sBAAsB,GAAG,0BAAW,gBAAgB,EAAE;AAC1D,mCAA2B,EAAE,WAAW;OACzC,CAAC,CAAC;;AAEH,aACE;;UAAK,SAAS,EAAE,sBAAsB,AAAC;QACrC;;YAAG,SAAS,EAAC,qBAAqB;AAC/B,uBAAW,EAAE,IAAI,CAAC,iBAAiB,AAAC;AACpC,qBAAS,EAAE,IAAI,CAAC,gBAAgB,AAAC;;SAAQ;QAC3C;;YAAK,SAAS,EAAC,UAAU;UACvB;;cAAK,SAAS,EAAC,8BAA8B;;YACZ,QAAQ;WACnC;SACF;OACH,CACN;KACH;;;SA7DG,aAAa;UAJH,SAAS;;AAInB,aAAa,CACV,SAAS,GAAG;AACjB,UAAQ,EAAE,OANa,SAAS,CAMZ,IAAI,CAAC,UAAU;CACpC;kBA6DY,aAAa","file":"VoiceRecorder.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport classnames from 'classnames';\nimport Recorder from 'opus-recorder';\n\nclass VoiceRecorder extends Component {\n  static propTypes = {\n    onFinish: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isRecording: false\n    }\n\n    this.recorder = new Recorder();\n    this.recorder.addEventListener('duration', this.handleChangeDuration);\n    this.recorder.addEventListener('streamReady', this.handleStreamReady);\n    this.recorder.addEventListener('dataAvailable', this.handleSendRecord);\n  }\n\n  handleStartRecord = () => {\n    this.recorder.initStream();\n  };\n\n  handleStopRecord = () => {\n    this.recorder.stop();\n    this.setState({\n      isRecording: false,\n      duration: '0:00'\n    });\n  };\n\n  handleSendRecord = (event) => {\n    const { onFinish } = this.props;\n    onFinish && onFinish(event.detail);\n  };\n\n  handleStreamReady = () => {\n    this.recorder.start()\n    this.setState({isRecording: true});\n  };\n\n  handleChangeDuration = (event) => this.setState({duration: event.detail.toFixed(2)});\n\n  render() {\n    const { isRecording, duration } = this.state;\n\n    const voiceRecorderClassName = classnames('voice-recorder', {\n      'voice-recorder--recording': isRecording\n    });\n\n    return (\n      <div className={voiceRecorderClassName}>\n        <i className=\"material-icons icon\"\n           onMouseDown={this.handleStartRecord}\n           onMouseUp={this.handleStopRecord}>mic</i>\n         <div className=\"duration\">\n           <div className=\"fill row middle-xs center-xs\">\n             Voice message duration:&nbsp; {duration}\n           </div>\n         </div>\n      </div>\n    );\n  }\n}\n\nexport default VoiceRecorder;\n"]}