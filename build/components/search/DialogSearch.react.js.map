{"version":3,"sources":["../../../src/components/search/DialogSearch.react.js"],"names":[],"mappings":";;;;AAIA;;;;AACA;;;;;;;;;;;;IAEM,Y;;;AAQJ,wBAAY,KAAZ,EAAmB;AAAA;;AAAA,iDACjB,sBAAM,KAAN,CADiB;;AAGjB,UAAK,YAAL,GAAoB,MAAK,YAAL,CAAkB,IAAlB,OAApB;AACA,UAAK,aAAL,GAAqB,MAAK,aAAL,CAAmB,IAAnB,OAArB;AACA,UAAK,iBAAL,GAAyB,MAAK,iBAAL,CAAuB,IAAvB,OAAzB;AALiB;AAMlB;;yBAED,qB,kCAAsB,S,EAAW;AAC/B,WAAO,UAAU,MAAV,KAAqB,KAAK,KAAL,CAAW,MAAhC,IACA,UAAU,KAAV,KAAoB,KAAK,KAAL,CAAW,KADtC;AAED,G;;yBAED,kB,+BAAmB,S,EAAW;AAC5B,QAAI,KAAK,KAAL,CAAW,MAAX,IAAqB,CAAC,UAAU,MAApC,EAA4C;AAC1C,WAAK,aAAL;AACD;AACF,G;;yBAED,Y,2BAAe;AACb,SAAK,KAAL,CAAW,QAAX;AACD,G;;yBAED,a,0BAAc,K,EAAO;AACnB,QAAI,MAAM,OAAN,KAAkB,4BAAS,GAA/B,EAAoC;AAClC,YAAM,cAAN;AACA,WAAK,YAAL;AACD;AACF,G;;yBAED,iB,8BAAkB,K,EAAO;AACvB,SAAK,KAAL,CAAW,QAAX,CAAoB,MAAM,MAAN,CAAa,KAAjC;AACD,G;;yBAED,a,4BAAgB;AAAA,QACN,KADM,GACI,KAAK,KADT,CACN,KADM;;;AAGd,WACE;AAAA;MAAA,EAAK,WAAU,oBAAf;MACE;AACE,mBAAU,uBADZ;AAEE,cAAK,QAFP;AAGE,aAAI,OAHN;AAIE,qBAAY,gCAJd;AAKE,eAAO,KALT;AAME,kBAAU,KAAK,iBANjB;AAOE,mBAAW,KAAK;AAPlB,QADF;MAUE;AAAA;QAAA,EAAK,WAAU,0BAAf;QACE;AAAA;UAAA,EAAG,WAAU,wCAAb,EAAsD,SAAS,KAAK,YAApE;UAAA;AAAA;AADF;AAVF,KADF;AAkBD,G;;yBAED,M,qBAAS;AAAA,QACC,MADD,GACY,KAAK,KADjB,CACC,MADD;;;AAGP,WACE;AAAA;MAAA,EAAK,WAAU,2BAAf;MACG,SAAS,KAAK,aAAL,EAAT,GAAgC;AADnC,KADF;AAKD,G;;yBAED,K,oBAAQ;AAAA,QACE,KADF,GACY,KAAK,IADjB,CACE,KADF;;AAEN,QAAI,KAAJ,EAAW;AACT,YAAM,KAAN;AACD;AACF,G;;yBAED,a,4BAAgB;AAAA,QACN,KADM,GACI,KAAK,IADT,CACN,KADM;;AAEd,QAAI,KAAJ,EAAW;AACT,YAAM,KAAN;AACA,YAAM,cAAN,GAAuB,MAAM,YAAN,GAAqB,MAAM,KAAN,CAAY,MAAxD;AACD;AACF,G;;;;;AAxFG,Y,CACG,S,GAAY;AACjB,UAAQ,iBAAU,IAAV,CAAe,UADN;AAEjB,SAAO,iBAAU,MAAV,CAAiB,UAFP;AAGjB,YAAU,iBAAU,IAAV,CAAe,UAHR;AAIjB,YAAU,iBAAU,IAAV,CAAe;AAJR,C;kBA0FN,Y","file":"DialogSearch.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { KeyCodes } from '../../constants/ActorAppConstants';\n\nclass DialogSearch extends Component {\n  static propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    query: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleQueryChange = this.handleQueryChange.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return nextProps.isOpen !== this.props.isOpen ||\n           nextProps.query !== this.props.query;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isOpen && !prevProps.isOpen) {\n      this.setCaretToEnd();\n    }\n  }\n\n  handleCancel() {\n    this.props.onCancel();\n  }\n\n  handleKeyDown(event) {\n    if (event.keyCode === KeyCodes.ESC) {\n      event.preventDefault();\n      this.handleCancel();\n    }\n  }\n\n  handleQueryChange(event) {\n    this.props.onChange(event.target.value);\n  }\n\n  renderContent() {\n    const { query } = this.props;\n\n    return (\n      <div className=\"dialog__search row\">\n        <input\n          className=\"dialog__search__input\"\n          type=\"search\"\n          ref=\"input\"\n          placeholder=\"Search messages in this dialog\"\n          value={query}\n          onChange={this.handleQueryChange}\n          onKeyDown={this.handleKeyDown}\n        />\n        <div className=\"dialog__search__controls\">\n          <a className=\"dialog__search__cancel link link--blue\" onClick={this.handleCancel}>\n            Cancel\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { isOpen } = this.props;\n\n    return (\n      <div className=\"dialog__search__container\">\n        {isOpen ? this.renderContent() : null}\n      </div>\n    );\n  }\n\n  focus() {\n    const { input } = this.refs;\n    if (input) {\n      input.focus();\n    }\n  }\n\n  setCaretToEnd() {\n    const { input } = this.refs;\n    if (input) {\n      input.focus();\n      input.selectionStart = input.selectionEnd = input.value.length;\n    }\n  }\n}\n\nexport default DialogSearch;\n"]}