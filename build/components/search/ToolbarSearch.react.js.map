{"version":3,"sources":["../../../src/components/search/ToolbarSearch.react.js"],"names":[],"mappings":";;;;AAIA;;;;AACA;;AACA;;;;AACA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;IAEM,a;;;gBACG,S,wBAAY;AACjB,WAAO,uBAAP;AACD,G;;gBAEM,c,6BAAiB;AACtB,WAAO,sBAAY,QAAZ,EAAP;AACD,G;;AAED,yBAAY,KAAZ,EAAmB;AAAA;;AAAA,iDACjB,sBAAM,KAAN,CADiB;;AAGjB,UAAK,kBAAL,GAA0B,MAAK,kBAAL,CAAwB,IAAxB,OAA1B;AACA,UAAK,kBAAL,GAA0B,MAAK,kBAAL,CAAwB,IAAxB,OAA1B;AACA,UAAK,iBAAL,GAAyB,MAAK,iBAAL,CAAuB,IAAvB,OAAzB;AACA,UAAK,cAAL,GAAsB,MAAK,cAAL,CAAoB,IAApB,OAAtB;AANiB;AAOlB;;0BAED,kB,iCAAqB;AACnB,mCAAqB,KAArB;AACD,G;;0BAED,iB,gCAAoB;AAClB,mCAAqB,KAArB;AACD,G;;0BAED,kB,+BAAmB,K,EAAO;AACxB,mCAAqB,YAArB,CAAkC,KAAlC;AACD,G;;0BAED,c,2BAAe,K,EAAO;AAAA,QACZ,OADY,GACA,KAAK,KADL,CACZ,OADY;;AAEpB,QAAI,UAAU,QAAQ,MAAtB,EAA8B;AAC5B,qCAAqB,kBAArB,CAAwC,KAAK,KAAL,CAAW,KAAnD;AACD,KAFD,MAEO;AACL,UAAM,UAAU,QAAQ,KAAR,CAAhB;AACA,qCAAqB,WAArB,CAAiC,OAAjC;AACD;AACF,G;;0BAED,2B,0CAA8B;AAAA,iBACU,KAAK,KADf;AAAA,QACpB,SADoB,UACpB,SADoB;AAAA,QACT,KADS,UACT,KADS;AAAA,QACF,OADE,UACF,OADE;;;AAG5B,QAAI,CAAC,SAAL,EAAgB;AACd,aAAO,IAAP;AACD;;AAED,QAAI,CAAC,MAAM,MAAX,EAAmB;AACjB,aACE;AAAA;QAAA,EAAK,WAAU,2BAAf;QACE;AAAA;UAAA,EAAK,WAAU,MAAf;UACE,iEAAsB,IAAG,aAAzB;AADF;AADF,OADF;AAOD;;AAED,WACE;AAAA;MAAA,EAAY,WAAU,2BAAtB,EAAkD,KAAK,QAAQ,MAA/D,EAAuE,UAAU,KAAK,cAAtF;MACE,gEAAsB,OAAO,KAA7B,EAAmC,SAAS,OAA5C,GADF;MAEE;AAAA;QAAA,EAAgB,OAAO,QAAQ,MAA/B;QACE;AAAA;UAAA,EAAQ,WAAU,yBAAlB;UACE,6DAAkB,IAAG,iBAArB,GADF;UAAA;UAC2C;AAAA;YAAA,EAAG,WAAU,gBAAb;YAAA;AAAA;AAD3C;AADF;AAFF,KADF;AAUD,G;;0BAED,M,qBAAS;AAAA,kBACsB,KAAK,KAD3B;AAAA,QACC,KADD,WACC,KADD;AAAA,QACQ,SADR,WACQ,SADR;;AAEP,QAAM,yBAAyB,0BAAW,qBAAX,EAAkC;AAC/D,kCAA4B;AADmC,KAAlC,CAA/B;;AAIA,WACE;AAAA;MAAA,EAAK,WAAW,sBAAhB,EAAwC,SAAS,KAAK,wBAAtD;MACE;AAAA;QAAA,EAAK,WAAU,KAAf;QACE;AAAA;UAAA,EAAG,WAAU,4BAAb;UAAA;AAAA,SADF;QAEE;AACE,iBAAO,KADT;AAEE,mBAAS,KAAK,iBAFhB;AAGE,mBAAS,KAAK,kBAHhB;AAIE,oBAAU,KAAK;AAJjB;AAFF,OADF;MAUG,KAAK,2BAAL;AAVH,KADF;AAcD,G;;;;;kBAGY,iBAAU,MAAV,CAAiB,aAAjB,C","file":"ToolbarSearch.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component } from 'react';\nimport { Container } from 'flux/utils';\nimport classnames from 'classnames';\nimport { FormattedMessage, FormattedHTMLMessage } from 'react-intl';\n\nimport SearchStore from '../../stores/SearchStore';\nimport SearchActionCreators from '../../actions/SearchActionCreators';\n\nimport SearchInput from './SearchInput.react';\nimport SelectList from '../common/SelectList.react';\nimport SelectListItem from '../common/SelectListItem.react';\nimport ToolbarSearchResults from './ToolbarSearchResults.react';\n\nclass ToolbarSearch extends Component {\n  static getStores() {\n    return [SearchStore];\n  }\n\n  static calculateState() {\n    return SearchStore.getState();\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleSearchChange = this.handleSearchChange.bind(this);\n    this.handlerSearchClear = this.handlerSearchClear.bind(this);\n    this.handleSearchFocus = this.handleSearchFocus.bind(this);\n    this.onResultSelect = this.onResultSelect.bind(this);\n  }\n\n  handlerSearchClear() {\n    SearchActionCreators.clear();\n  }\n\n  handleSearchFocus() {\n    SearchActionCreators.focus();\n  }\n\n  handleSearchChange(query) {\n    SearchActionCreators.handleSearch(query);\n  }\n\n  onResultSelect(index) {\n    const { results } = this.state;\n    if (index === results.length) {\n      SearchActionCreators.goToMessagesSearch(this.state.query);\n    } else {\n      const contact = results[index];\n      SearchActionCreators.goToContact(contact);\n    }\n  }\n\n  renderSearchResultsDropdown() {\n    const { isFocused, query, results } = this.state;\n\n    if (!isFocused) {\n      return null\n    }\n\n    if (!query.length) {\n      return (\n        <div className=\"toolbar__search__dropdown\">\n          <div className=\"hint\">\n            <FormattedHTMLMessage id=\"search.hint\"/>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <SelectList className=\"toolbar__search__dropdown\" max={results.length} onSelect={this.onResultSelect}>\n        <ToolbarSearchResults query={query}results={results} />\n        <SelectListItem index={results.length}>\n          <footer className=\"toolbar__search__footer\">\n            <FormattedMessage id=\"search.inDialog\"/> <i className=\"material-icons\">arrow_forward</i>\n          </footer>\n        </SelectListItem>\n      </SelectList>\n    );\n  }\n\n  render() {\n    const { query, isFocused } = this.state;\n    const toolbarSearchClassName = classnames('toolbar__search row', {\n      'toolbar__search--focused': isFocused\n    });\n\n    return (\n      <div className={toolbarSearchClassName} onClick={this.handleToolbarSearchClick}>\n        <div className=\"row\">\n          <i className=\"search-icon material-icons\">search</i>\n          <SearchInput\n            value={query}\n            onFocus={this.handleSearchFocus}\n            onClear={this.handlerSearchClear}\n            onChange={this.handleSearchChange}\n          />\n        </div>\n        {this.renderSearchResultsDropdown()}\n      </div>\n    );\n  }\n}\n\nexport default Container.create(ToolbarSearch);\n"]}