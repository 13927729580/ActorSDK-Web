{"version":3,"sources":["../../../src/components/search/SearchInput.react.js"],"names":[],"mappings":"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","file":"SearchInput.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport EventListener from 'fbjs/lib/EventListener';\nimport classnames from 'classnames';\nimport { KeyCodes } from '../../constants/ActorAppConstants';\n\nclass SearchInput extends Component {\n  static contextTypes = {\n    intl: PropTypes.object.isRequired\n  };\n\n  static propTypes = {\n    className: PropTypes.string,\n    value: PropTypes.string.isRequired,\n    onClear: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onToggleFocus: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleFocus = this.handleFocus.bind(this);\n    this.handleClear = this.handleClear.bind(this);\n  }\n\n  componentDidMount() {\n    this.listeners = [\n      EventListener.listen(document, 'keydown', this.handleKeyDown)\n    ];\n  }\n\n  componentWillUnmount() {\n    this.listeners.forEach((listener) => listener.remove());\n    this.listeners = null;\n  }\n\n  handleBlur() {\n    this.props.onToggleFocus(false);\n  }\n\n  handleFocus() {\n    this.props.onToggleFocus(true);\n  }\n\n  handleChange(event) {\n    this.props.onChange(event.target.value);\n  }\n\n  handleClear() {\n    this.props.onClear();\n    this.props.onChange('');\n    this.props.onToggleFocus(false);\n  }\n\n  handleKeyDown(event) {\n    if (event.keyCode === KeyCodes.K && event.metaKey || event.ctrlKey) {\n      event.preventDefault();\n      this.focus();\n    }\n\n    if (event.keyCode === KeyCodes.ESC && this.isFocused()) {\n      event.preventDefault();\n      this.handleClear();\n    }\n  }\n\n  renderInput() {\n    const { value } = this.props;\n    const { intl } = this.context;\n\n    return (\n      <input\n        className=\"input input--search col-xs\"\n        type=\"search\"\n        ref=\"search\"\n        tabIndex=\"1\"\n        value={value}\n        placeholder={intl.messages['search.placeholder']}\n        onBlur={this.handleBlur}\n        onFocus={this.handleFocus}\n        onChange={this.handleChange}\n      />\n    );\n  }\n\n  renderClear() {\n    const { value } = this.props;\n\n    if (!value || !value.length) {\n      return null;\n    }\n\n    return (\n      <i className=\"close-icon material-icons\" onClick={this.handleClear}>close</i>\n    );\n  }\n\n  render() {\n    const { className } = this.props;\n    const searchClassName = classnames('row', className);\n\n    return (\n      <div className={searchClassName}>\n        {this.renderInput()}\n        {this.renderClear()}\n      </div>\n    );\n  }\n\n  focus() {\n    if (this.refs.search) {\n      this.refs.search.focus();\n    }\n  }\n\n  isFocused() {\n    return document.activeElement === this.refs.search;\n  }\n}\n\nexport default SearchInput;\n"]}