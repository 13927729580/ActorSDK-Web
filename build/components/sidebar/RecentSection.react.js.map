{"version":3,"sources":["../../../src/components/sidebar/RecentSection.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeA,IAAM,uBAAuB,GAAG,GAAG,CAAC;;AAEpC,IAAM,iBAAiB,GAAG,SAApB,iBAAiB,GAAS;AAC9B,SAAO;AACL,WAAO,EAAE,0BAAgB,aAAa,EAAE;GACzC,CAAC;CACH,CAAC;;IAEI,aAAa;YAAb,aAAa;;AACjB,WADI,aAAa,CACL,KAAK,EAAE;0BADf,aAAa;;uEAAb,aAAa,aAET,KAAK;;UAOb,QAAQ,GAAG;aAAM,MAAK,QAAQ,CAAC,iBAAiB,EAAE,CAAC;KAAA;;UAEnD,QAAQ,GAAG,UAAA,KAAK,EAAI;0BACgC,KAAK,CAAC,MAAM;UAAtD,YAAY,iBAAZ,YAAY;UAAE,SAAS,iBAAT,SAAS;UAAE,YAAY,iBAAZ,YAAY;;AAE7C,UAAI,YAAY,GAAG,SAAS,GAAG,YAAY,IAAI,uBAAuB,EAAE;AACtE,uCAAqB,YAAY,EAAE,CAAC;OACrC;KACF;;AAbC,UAAK,KAAK,GAAG,iBAAiB,EAAE,CAAC;;AAEjC,8BAAgB,WAAW,CAAC,MAAK,QAAQ,CAAC,CAAC;;GAC5C;;eAPG,aAAa;;6BAmBR;UACC,OAAO,GAAK,IAAI,CAAC,KAAK,CAAtB,OAAO;;AAEf,UAAM,UAAU,GAAG,iBAAI,OAAO,EAAE,UAAC,MAAM,EAAE,KAAK;eAAK,6DAAmB,MAAM,EAAE,MAAM,AAAC,EAAC,GAAG,EAAE,KAAK,AAAC,GAAE;OAAA,CAAC,CAAC;;AAErG,aACE;;UAAS,SAAS,EAAC,iBAAiB;QAClC;;YAAW,QAAQ,EAAE,IAAI,CAAC,QAAQ,AAAC;UACjC;;cAAI,SAAS,EAAC,eAAe;YAC1B,UAAU;WACR;SACK;OACJ,CACV;KACH;;;SAjCG,aAAa;;;kBAoCJ,aAAa","file":"RecentSection.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { map } from 'lodash';\n\nimport React, { Component } from 'react';\nimport Scrollbar from '../common/Scrollbar.react';\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\n\nimport AllDialogsStore from '../../stores/AllDialogsStore';\n\nimport RecentSectionItem from './RecentSectionItem.react';\n\nconst LoadDialogsScrollBottom = 100;\n\nconst getStateFromStore = () => {\n  return {\n    dialogs: AllDialogsStore.getAllDialogs()\n  };\n};\n\nclass RecentSection extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = getStateFromStore();\n\n    AllDialogsStore.addListener(this.onChange);\n  }\n\n  onChange = () => this.setState(getStateFromStore());\n\n  onScroll = event => {\n    const { scrollHeight, scrollTop, clientHeight } = event.target;\n\n    if (scrollHeight - scrollTop - clientHeight <= LoadDialogsScrollBottom) {\n      DialogActionCreators.onDialogsEnd();\n    }\n  };\n\n  render() {\n    const { dialogs } = this.state;\n\n    const dialogList = map(dialogs, (dialog, index) => <RecentSectionItem dialog={dialog} key={index}/>);\n\n    return (\n      <section className=\"sidebar__recent\">\n        <Scrollbar onScroll={this.onScroll}>\n          <ul className=\"sidebar__list\">\n            {dialogList}\n          </ul>\n        </Scrollbar>\n      </section>\n    );\n  }\n}\n\nexport default RecentSection;\n"]}