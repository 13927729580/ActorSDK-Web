{"version":3,"sources":["../../../src/components/sidebar/RecentSection.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBA,IAAM,uBAAuB,GAAG,GAAG,CAAC;;IAE9B,aAAa;YAAb,aAAa;;AACjB,WADI,aAAa,CACL,KAAK,EAAE;0BADf,aAAa;;uEAAb,aAAa,aAET,KAAK;;UA2Bb,QAAQ,GAAG,UAAC,KAAK,EAAK;0BAC8B,KAAK,CAAC,MAAM;UAAtD,YAAY,iBAAZ,YAAY;UAAE,SAAS,iBAAT,SAAS;UAAE,YAAY,iBAAZ,YAAY;;AAE7C,UAAI,YAAY,GAAG,SAAS,GAAG,YAAY,IAAI,uBAAuB,EAAE;AACtE,uCAAqB,YAAY,EAAE,CAAC;OACrC;KACF;;UAED,sBAAsB,GAAG;aAAM,oCAA0B,IAAI,EAAE;KAAA;;UAC/D,oBAAoB,GAAG;aAAM,mCAAyB,IAAI,EAAE;KAAA;;;GAnC3D;;eAHG,aAAa;;yCAiBI;UACX,OAAO,GAAK,IAAI,CAAC,KAAK,CAAtB,OAAO;;AACf,UAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AACxB,YAAM,QAAQ,GAAG,2BAAY,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,qBAAqB,EAAE,CAAC;AACrE,YAAM,UAAU,GAAG,2BAAY,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,qBAAqB,EAAE,CAAC;;AAEzE,YAAI,QAAQ,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,EAAE;AACvC,yCAAqB,YAAY,EAAE,CAAC;SACrC;OACF;KACF;;;6BAaQ;UACC,OAAO,GAAK,IAAI,CAAC,KAAK,CAAtB,OAAO;UACP,IAAI,GAAK,IAAI,CAAC,OAAO,CAArB,IAAI;;AAEZ,UAAM,UAAU,GAAG,iBAAI,OAAO,EAAE,UAAC,MAAM,EAAE,KAAK;eAAK,6DAAmB,MAAM,EAAE,MAAM,AAAC,EAAC,GAAG,EAAE,KAAK,AAAC,GAAE;OAAA,CAAC,CAAC;;AAErG,aACE;;UAAS,SAAS,EAAC,iBAAiB,EAAC,GAAG,EAAC,QAAQ;QAE7C,UAAU,CAAC,MAAM,KAAK,CAAC,GACnB;;YAAW,QAAQ,EAAE,IAAI,CAAC,QAAQ,AAAC;UACjC;;cAAI,SAAS,EAAC,eAAe,EAAC,GAAG,EAAC,MAAM;YACrC,UAAU;WACR;SACK,GACZ;;YAAK,SAAS,EAAC,gDAAgD;UAC7D;;;YACE;;;cAAI,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC;aAAK;YACrD;;;cACG,IAAI,CAAC,QAAQ,CAAC,oCAAoC,CAAC;cACpD;;kBAAG,OAAO,EAAE,IAAI,CAAC,sBAAsB,AAAC;gBAAE,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC;eAAK;cACxF,IAAI,CAAC,QAAQ,CAAC,iCAAiC,CAAC;cACjD;;kBAAG,OAAO,EAAE,IAAI,CAAC,oBAAoB,AAAC;gBAAE,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC;eAAK;cACtF,IAAI,CAAC,QAAQ,CAAC,kCAAkC,CAAC;aAChD;WACA;SACF;OAEJ,CACV;KACH;;;qCA/DuB;AACtB,aAAO;AACL,eAAO,EAAE,0BAAgB,aAAa,EAAE;OACzC,CAAC;KACH;;;SAXG,aAAa;;;AAAb,aAAa,CAKV,SAAS,GAAG;SAAM,2BAAiB;CAAA;;AALtC,aAAa,CAaV,YAAY,GAAG;AACpB,MAAI,EAAE,iBAAU,MAAM;CACvB;kBA0DY,iBAAU,MAAM,CAAC,aAAa,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC","file":"RecentSection.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { map } from 'lodash';\n\nimport React, { Component, PropTypes } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { Container } from 'flux/utils';\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport CreateGroupActionCreators from '../../actions/CreateGroupActionCreators';\nimport AddContactActionCreators from '../../actions/AddContactActionCreators';\n\nimport AllDialogsStore from '../../stores/AllDialogsStore';\n\nimport Scrollbar from '../common/Scrollbar.react';\nimport RecentSectionItem from './RecentSectionItem.react';\n\nconst LoadDialogsScrollBottom = 100;\n\nclass RecentSection extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static getStores = () => [AllDialogsStore];\n\n  static calculateState() {\n    return {\n      dialogs: AllDialogsStore.getAllDialogs()\n    };\n  }\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  componentDidUpdate() {\n    const { dialogs } = this.state;\n    if (dialogs.length !== 0) {\n      const listRect = findDOMNode(this.refs.list).getBoundingClientRect();\n      const recentRect = findDOMNode(this.refs.recent).getBoundingClientRect();\n\n      if (listRect.height < recentRect.height) {\n        DialogActionCreators.onDialogsEnd();\n      }\n    }\n  }\n\n  onScroll = (event) => {\n    const { scrollHeight, scrollTop, clientHeight } = event.target;\n\n    if (scrollHeight - scrollTop - clientHeight <= LoadDialogsScrollBottom) {\n      DialogActionCreators.onDialogsEnd();\n    }\n  };\n\n  handleCreateGroupClick = () => CreateGroupActionCreators.open();\n  handleAddPeopleClick = () => AddContactActionCreators.open();\n\n  render() {\n    const { dialogs } = this.state;\n    const { intl } = this.context;\n\n    const dialogList = map(dialogs, (dialog, index) => <RecentSectionItem dialog={dialog} key={index}/>);\n\n    return (\n      <section className=\"sidebar__recent\" ref=\"recent\">\n        {\n          dialogList.length !== 0\n            ? <Scrollbar onScroll={this.onScroll}>\n                <ul className=\"sidebar__list\" ref=\"list\">\n                  {dialogList}\n                </ul>\n              </Scrollbar>\n            : <div className=\"sidebar__recent__empty row center-xs middle-xs\">\n                <div>\n                  <p>{intl.messages['sidebar.recents.empty.first']}</p>\n                  <p>\n                    {intl.messages['sidebar.recents.empty.second.start']}\n                    <a onClick={this.handleCreateGroupClick}>{intl.messages['sidebar.recents.newDialog']}</a>\n                    {intl.messages['sidebar.recents.empty.second.or']}\n                    <a onClick={this.handleAddPeopleClick}>{intl.messages['sidebar.recents.addPeople']}</a>\n                    {intl.messages['sidebar.recents.empty.second.end']}\n                  </p>\n                </div>\n              </div>\n        }\n      </section>\n    );\n  }\n}\n\nexport default Container.create(RecentSection, { pure: false });\n"]}