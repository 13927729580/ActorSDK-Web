{"version":3,"sources":["../../../src/components/sidebar/RecentSection.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoBA,IAAM,uBAAuB,GAAG,GAAG,CAAC;;IAE9B,aAAa;YAAb,aAAa;;AACjB,WADI,aAAa,CACL,KAAK,EAAE;0BADf,aAAa;;uEAAb,aAAa,aAET,KAAK;;UAuBb,QAAQ,GAAG,UAAC,KAAK,EAAK;0BAC8B,KAAK,CAAC,MAAM;UAAtD,YAAY,iBAAZ,YAAY;UAAE,SAAS,iBAAT,SAAS;UAAE,YAAY,iBAAZ,YAAY;;AAE7C,UAAI,YAAY,GAAG,SAAS,GAAG,YAAY,IAAI,uBAAuB,EAAE;AACtE,uCAAqB,YAAY,EAAE,CAAC;OACrC;KACF;;UAED,sBAAsB,GAAG;aAAM,oCAA0B,IAAI,EAAE;KAAA;;UAC/D,oBAAoB,GAAG;aAAM,mCAAyB,IAAI,EAAE;KAAA;;;GA/B3D;;eAHG,aAAa;;yCAaI;UACX,OAAO,GAAK,IAAI,CAAC,KAAK,CAAtB,OAAO;;AACf,UAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AACxB,YAAM,QAAQ,GAAG,gBAAM,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,qBAAqB,EAAE,CAAC;AAC3E,YAAM,UAAU,GAAG,gBAAM,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,qBAAqB,EAAE,CAAC;;AAE/E,YAAI,QAAQ,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,EAAE;AACvC,yCAAqB,YAAY,EAAE,CAAC;SACrC;OACF;KACF;;;6BAaQ;UACC,OAAO,GAAK,IAAI,CAAC,KAAK,CAAtB,OAAO;;AAEf,UAAM,UAAU,GAAG,iBAAI,OAAO,EAAE,UAAC,MAAM,EAAE,KAAK;eAAK,6DAAmB,MAAM,EAAE,MAAM,AAAC,EAAC,GAAG,EAAE,KAAK,AAAC,GAAE;OAAA,CAAC,CAAC;AACrG,aACE;;UAAS,SAAS,EAAC,iBAAiB,EAAC,GAAG,EAAC,QAAQ;QAE7C,UAAU,CAAC,MAAM,KAAK,CAAC,GACnB;;YAAW,QAAQ,EAAE,IAAI,CAAC,QAAQ,AAAC;UACjC;;cAAI,SAAS,EAAC,eAAe,EAAC,GAAG,EAAC,MAAM;YACrC,UAAU;WACR;SACK,GACZ;;YAAK,SAAS,EAAC,gDAAgD;UAC7D;;;YACE;;;cAAI,IAAI,CAAC,cAAc,CAAC,6BAA6B,CAAC;aAAK;YAC3D;;;cACG,IAAI,CAAC,cAAc,CAAC,oCAAoC,CAAC;cAC1D;;kBAAG,OAAO,EAAE,IAAI,CAAC,sBAAsB,AAAC;gBAAE,IAAI,CAAC,cAAc,CAAC,2BAA2B,CAAC;eAAK;cAC9F,IAAI,CAAC,cAAc,CAAC,iCAAiC,CAAC;cACvD;;kBAAG,OAAO,EAAE,IAAI,CAAC,oBAAoB,AAAC;gBAAE,IAAI,CAAC,cAAc,CAAC,2BAA2B,CAAC;eAAK;cAC5F,IAAI,CAAC,cAAc,CAAC,kCAAkC,CAAC;aACtD;WACA;SACF;OAEJ,CACV;KACH;;;qCAzDuB;AACtB,aAAO;AACL,eAAO,EAAE,0BAAgB,aAAa,EAAE;OACzC,CAAC;KACH;;;SAXG,aAAa;;;AAAb,aAAa,CAKV,SAAS,GAAG;SAAM,2BAAiB;CAAA;;AA8D5C,qBAAW,OAAO,CAAC,aAAa,uBAAY,CAAC;;kBAE9B,iBAAU,MAAM,CAAC,aAAa,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC","file":"RecentSection.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { map } from 'lodash';\n\nimport React, { Component } from 'react';\nimport Scrollbar from '../common/Scrollbar.react';\nimport { Container } from 'flux/utils';\nimport ReactMixin from 'react-mixin';\nimport { IntlMixin } from 'react-intl'\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport CreateGroupActionCreators from '../../actions/CreateGroupActionCreators';\nimport AddContactActionCreators from '../../actions/AddContactActionCreators';\n\nimport AllDialogsStore from '../../stores/AllDialogsStore';\n\nimport RecentSectionItem from './RecentSectionItem.react';\n\nconst LoadDialogsScrollBottom = 100;\n\nclass RecentSection extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static getStores = () => [AllDialogsStore];\n\n  static calculateState() {\n    return {\n      dialogs: AllDialogsStore.getAllDialogs()\n    };\n  }\n\n  componentDidUpdate() {\n    const { dialogs } = this.state;\n    if (dialogs.length !== 0) {\n      const listRect = React.findDOMNode(this.refs.list).getBoundingClientRect();\n      const recentRect = React.findDOMNode(this.refs.recent).getBoundingClientRect();\n\n      if (listRect.height < recentRect.height) {\n        DialogActionCreators.onDialogsEnd();\n      }\n    }\n  }\n\n  onScroll = (event) => {\n    const { scrollHeight, scrollTop, clientHeight } = event.target;\n\n    if (scrollHeight - scrollTop - clientHeight <= LoadDialogsScrollBottom) {\n      DialogActionCreators.onDialogsEnd();\n    }\n  };\n\n  handleCreateGroupClick = () => CreateGroupActionCreators.open();\n  handleAddPeopleClick = () => AddContactActionCreators.open();\n\n  render() {\n    const { dialogs } = this.state;\n\n    const dialogList = map(dialogs, (dialog, index) => <RecentSectionItem dialog={dialog} key={index}/>);\n    return (\n      <section className=\"sidebar__recent\" ref=\"recent\">\n        {\n          dialogList.length !== 0\n            ? <Scrollbar onScroll={this.onScroll}>\n                <ul className=\"sidebar__list\" ref=\"list\">\n                  {dialogList}\n                </ul>\n              </Scrollbar>\n            : <div className=\"sidebar__recent__empty row center-xs middle-xs\">\n                <div>\n                  <p>{this.getIntlMessage('sidebar.recents.empty.first')}</p>\n                  <p>\n                    {this.getIntlMessage('sidebar.recents.empty.second.start')}\n                    <a onClick={this.handleCreateGroupClick}>{this.getIntlMessage('sidebar.recents.newDialog')}</a>\n                    {this.getIntlMessage('sidebar.recents.empty.second.or')}\n                    <a onClick={this.handleAddPeopleClick}>{this.getIntlMessage('sidebar.recents.addPeople')}</a>\n                    {this.getIntlMessage('sidebar.recents.empty.second.end')}\n                  </p>\n                </div>\n              </div>\n        }\n      </section>\n    );\n  }\n}\n\nReactMixin.onClass(RecentSection, IntlMixin);\n\nexport default Container.create(RecentSection, { pure: false });\n"]}