{"version":3,"sources":["../../../src/components/sidebar/RecentSection.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoBA,IAAM,uBAAuB,GAAG,GAAG,CAAC;;AAEpC,IAAM,iBAAiB,GAAG,SAApB,iBAAiB,GAAS;AAC9B,SAAO;AACL,WAAO,EAAE,sBAAY,MAAM,EAAE;AAC7B,qBAAiB,EAAE,2BAAiB,MAAM,EAAE;GAC7C,CAAC;CACH,CAAC;;IAEI,aAAa;YAAb,aAAa;;AACjB,WADI,aAAa,CACL,KAAK,EAAE;0BADf,aAAa;;uEAAb,aAAa,aAET,KAAK;;UAYb,QAAQ,GAAG;aAAM,MAAK,QAAQ,CAAC,iBAAiB,EAAE,CAAC;KAAA;;UAEnD,QAAQ,GAAG,UAAA,KAAK,EAAI;0BACgC,KAAK,CAAC,MAAM;UAAtD,YAAY,iBAAZ,YAAY;UAAE,SAAS,iBAAT,SAAS;UAAE,YAAY,iBAAZ,YAAY;;AAE7C,UAAI,YAAY,GAAG,SAAS,GAAG,YAAY,IAAI,uBAAuB,EAAE;AACtE,uCAAqB,YAAY,EAAE,CAAC;OACrC;KACF;;UAED,eAAe,GAAG;aAAM,oCAA0B,IAAI,EAAE;KAAA;;AApBtD,UAAK,KAAK,GAAG,iBAAiB,EAAE,CAAC;;AAEjC,0BAAY,iBAAiB,CAAC,MAAK,QAAQ,CAAC,CAAC;AAC7C,+BAAiB,WAAW,CAAC,MAAK,QAAQ,CAAC,CAAC;;GAC7C;;eARG,aAAa;;2CAUM;AACrB,4BAAY,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACjD;;;6BAcQ;mBACgC,IAAI,CAAC,KAAK;UAAzC,OAAO,UAAP,OAAO;UAAE,iBAAiB,UAAjB,iBAAiB;;AAElC,UAAM,UAAU,GAAG,YAtDd,GAAG,EAsDe,OAAO,EAAE,UAAC,MAAM,EAAE,KAAK,EAAK;AACjD,eACE,6DAAmB,MAAM,EAAE,MAAM,AAAC,EAAC,GAAG,EAAE,KAAK,AAAC,GAAE,CAChD;OACH,EAAE,IAAI,CAAC,CAAC;;AAET,aACE;;UAAS,SAAS,EAAC,iBAAiB;QAClC;;YAAK,SAAS,EAAC,mCAAmC,EAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,AAAC;UACzE;;cAAI,SAAS,EAAC,eAAe;YAC1B,UAAU;WACR;SACD;QAEN;;;UACE;;cAAG,SAAS,EAAC,+BAA+B,EAAC,OAAO,EAAE,IAAI,CAAC,eAAe,AAAC;YACzE;;gBAAK,SAAS,EAAC,aAAa;cAC1B;;kBAAG,SAAS,EAAC,gBAAgB;;eAAW;aACpC;;WAEJ;SACG;QAER,iBAAiB,GAAG,0DAAc,GAAG,IAAI;OAElC,CACV;KACH;;;SAxDG,aAAa;UAvBH,SAAS;;AAkFzB,qBAAW,OAAO,CAAC,aAAa,aAhFvB,SAAS,CAgF0B,CAAC;;kBAE9B,aAAa","file":"RecentSection.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { map } from 'lodash';\n\nimport React, { Component } from 'react';\nimport ReactMixin from 'react-mixin';\nimport { IntlMixin } from 'react-intl';\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport QuickSearchActionCreators from '../../actions/QuickSearchActionCreators';\n\nimport DialogStore from '../../stores/DialogStore';\nimport QuickSearchStore from '../../stores/QuickSearchStore';\n\nimport RecentSectionItem from './RecentSectionItem.react';\nimport ContactsSectionItem from './ContactsSectionItem.react';\nimport QuickSearch from '../modals/QuickSearch.react';\n\nconst LoadDialogsScrollBottom = 100;\n\nconst getStateFromStore = () => {\n  return {\n    dialogs: DialogStore.getAll(),\n    isQuickSearchOpen: QuickSearchStore.isOpen()\n  };\n};\n\nclass RecentSection extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = getStateFromStore();\n\n    DialogStore.addChangeListener(this.onChange);\n    QuickSearchStore.addListener(this.onChange);\n  }\n\n  componentWillUnmount() {\n    DialogStore.removeChangeListener(this.onChange);\n  }\n\n  onChange = () => this.setState(getStateFromStore());\n\n  onScroll = event => {\n    const { scrollHeight, scrollTop, clientHeight } = event.target;\n\n    if (scrollHeight - scrollTop - clientHeight <= LoadDialogsScrollBottom) {\n      DialogActionCreators.onDialogsEnd();\n    }\n  };\n\n  openQuickSearch = () => QuickSearchActionCreators.show();\n\n  render() {\n    const { dialogs, isQuickSearchOpen } = this.state;\n\n    const dialogList = map(dialogs, (dialog, index) => {\n      return (\n        <RecentSectionItem dialog={dialog} key={index}/>\n      );\n    }, this);\n\n    return (\n      <section className=\"sidebar__recent\">\n        <div className=\"sidebar__recent__scroll-container\" onScroll={this.onScroll}>\n          <ul className=\"sidebar__list\">\n            {dialogList}\n          </ul>\n        </div>\n\n        <footer>\n          <a className=\"sidebar__recent__quick-search\" onClick={this.openQuickSearch}>\n            <div className=\"icon-holder\">\n              <i className=\"material-icons\">search</i>\n            </div>\n            Quick Search\n          </a>\n        </footer>\n\n        {isQuickSearchOpen ? <QuickSearch/> : null}\n\n      </section>\n    );\n  }\n}\n\nReactMixin.onClass(RecentSection, IntlMixin);\n\nexport default RecentSection;\n"]}