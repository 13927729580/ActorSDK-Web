{"version":3,"sources":["../../../src/components/sidebar/RecentItem.react.js"],"names":[],"mappings":"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","file":"RecentItem.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport classnames from 'classnames';\nimport { FormattedMessage } from 'react-intl';\nimport PeerUtils from '../../utils/PeerUtils';\nimport { escapeWithEmoji } from '../../utils/EmojiUtils';\nimport confirm from '../../utils/confirm';\nimport { Link } from 'react-router';\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport FavoriteActionCreators from '../../actions/FavoriteActionCreators';\nimport ArchiveActionCreators from '../../actions/ArchiveActionCreators';\n\nimport UserStore from '../../stores/UserStore';\nimport ArchiveStore from '../../stores/ArchiveStore';\n\nimport AvatarItem from '../common/AvatarItem.react';\nimport Stateful from '../common/Stateful';\n\nclass RecentItem extends Component {\n  constructor(props){\n    super(props);\n  }\n\n  static propTypes = {\n    dialog: PropTypes.object.isRequired,\n    type: PropTypes.string\n  };\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [ArchiveStore];\n  }\n\n  static calculateState(prevState, nextProps) {\n    return {\n      archiveChatState: ArchiveStore.getArchiveChatState(nextProps.dialog.peer.peer.id)\n    };\n  }\n\n  onClick = () => DialogActionCreators.selectDialogPeer(this.props.dialog.peer.peer);\n\n  // handleHideChat = (event) => {\n  //   event.stopPropagation();\n  //   event.preventDefault();\n  //   const { dialog } = this.props;\n  //   const { intl } = this.context;\n  //\n  //   if (UserStore.isContact(dialog.peer.peer.id)) {\n  //     DialogActionCreators.hideChat(dialog.peer.peer);\n  //   } else {\n  //     confirm(intl.messages['modal.confirm.nonContactHide.title'], {\n  //       description: <FormattedMessage id=\"modal.confirm.nonContactHide.body\"\n  //                                      values={{name: dialog.peer.title}}/>\n  //     }).then(\n  //       () => DialogActionCreators.hideChat(dialog.peer.peer),\n  //       () => {}\n  //     );\n  //   }\n  // };\n\n  handleAddToArchive = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    const { peer } = this.props.dialog.peer;\n    ArchiveActionCreators.archiveChat(peer);\n  }\n\n  render() {\n    const { dialog, type } = this.props;\n    const { archiveChatState } = this.state;\n    const toPeer = PeerUtils.peerToString(dialog.peer.peer);\n\n    const recentClassName = classnames('sidebar__list__item', 'row', {\n      'sidebar__list__item--unread': dialog.counter > 0\n    });\n\n    return (\n      <li>\n        <Link to={`/im/${toPeer}`} className={recentClassName} activeClassName=\"sidebar__list__item--active\">\n\n          <AvatarItem image={dialog.peer.avatar}\n                      placeholder={dialog.peer.placeholder}\n                      size=\"tiny\"\n                      title={dialog.peer.title}/>\n\n          <div className=\"title col-xs\" dangerouslySetInnerHTML={{__html: escapeWithEmoji(dialog.peer.title)}}/>\n\n          {\n            dialog.counter > 0\n              ? <span className=\"counter\">{dialog.counter}</span>\n              : null\n          }\n\n          <Stateful.Root currentState={archiveChatState}>\n            <Stateful.Pending>\n              <div className=\"archive\" onClick={this.handleAddToArchive}>\n                <i className=\"icon material-icons\">archive</i>\n              </div>\n            </Stateful.Pending>\n            <Stateful.Processing>\n              <div className=\"archive archive--in-progress\">\n                <i className=\"icon material-icons spin\">autorenew</i>\n              </div>\n            </Stateful.Processing>\n            <Stateful.Success>\n              <div className=\"archive archive--in-progress\">\n                <i className=\"icon material-icons\">check</i>\n              </div>\n            </Stateful.Success>\n            <Stateful.Failure>\n              <div className=\"archive archive--failure\">\n                <i className=\"icon material-icons\">warning</i>\n              </div>\n            </Stateful.Failure>\n          </Stateful.Root>\n\n        </Link>\n      </li>\n    );\n  }\n}\n\nexport default Container.create(RecentItem, {pure: false, withProps: true});\n"]}