{"version":3,"sources":["../../../src/components/sidebar/RecentItem.react.js"],"names":[],"mappings":"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","file":"RecentItem.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { Container } from 'flux/utils';\nimport classnames from 'classnames';\nimport { FormattedMessage } from 'react-intl';\nimport PeerUtils from '../../utils/PeerUtils';\nimport { escapeWithEmoji } from '../../utils/EmojiUtils';\nimport confirm from '../../utils/confirm';\nimport { Link } from 'react-router';\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport DropdownActionCreators from '../../actions/DropdownActionCreators';\n\nimport UserStore from '../../stores/UserStore';\nimport ArchiveStore from '../../stores/ArchiveStore';\n\nimport AvatarItem from '../common/AvatarItem.react';\nimport Stateful from '../common/Stateful';\n\nclass RecentItem extends Component {\n  static propTypes = {\n    dialog: PropTypes.object.isRequired,\n    type: PropTypes.string\n  };\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [ArchiveStore];\n  }\n\n  static calculateState(prevState, nextProps) {\n    return {\n      archiveChatState: ArchiveStore.getArchiveChatState(nextProps.dialog.peer.peer.id)\n    };\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n    const { peer } = this.props.dialog.peer;\n    const contextPos = {\n      x: event.pageX || event.clientX,\n      y: event.pageY || event.clientY\n    };\n    DropdownActionCreators.openRecentContextMenu(contextPos, peer);\n  }\n\n  render() {\n    const { dialog, type } = this.props;\n    const { archiveChatState } = this.state;\n    const toPeer = PeerUtils.peerToString(dialog.peer.peer);\n\n    const recentClassName = classnames('sidebar__list__item', 'row', {\n      'sidebar__list__item--unread': dialog.counter > 0\n    });\n\n    return (\n      <li onContextMenu={this.onContextMenu}>\n        <Link to={`/im/${toPeer}`} className={recentClassName} activeClassName=\"sidebar__list__item--active\">\n\n          <AvatarItem image={dialog.peer.avatar}\n                      placeholder={dialog.peer.placeholder}\n                      size=\"tiny\"\n                      title={dialog.peer.title}/>\n\n          <div className=\"title col-xs\" dangerouslySetInnerHTML={{__html: escapeWithEmoji(dialog.peer.title)}}/>\n\n          {\n            dialog.counter > 0\n              ? <span className=\"counter\">{dialog.counter}</span>\n              : null\n          }\n\n          <Stateful.Root currentState={archiveChatState}>\n            <Stateful.Processing>\n              <div className=\"archive archive--in-progress\">\n                <i className=\"icon material-icons spin\">autorenew</i>\n              </div>\n            </Stateful.Processing>\n            <Stateful.Success>\n              <div className=\"archive archive--in-progress\">\n                <i className=\"icon material-icons\">check</i>\n              </div>\n            </Stateful.Success>\n            <Stateful.Failure>\n              <div className=\"archive archive--failure\">\n                <i className=\"icon material-icons\">warning</i>\n              </div>\n            </Stateful.Failure>\n          </Stateful.Root>\n\n        </Link>\n      </li>\n    );\n  }\n}\n\nexport default Container.create(RecentItem, {pure: false, withProps: true});\n"]}