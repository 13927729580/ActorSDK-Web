{"version":3,"sources":["../../../src/components/sidebar/RecentItem.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAIA;;;;AACA;;AACA;;AACA;;;;AACA;;AACA;;;;AACA;;AACA;;;;AACA;;AAEA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;IAEM;;;;;;;;;;;;0JAqBJ,gBAAgB,UAAC,KAAD,EAAW;AACzB,YAAM,cAAN,GADyB;UAEjB,OAAS,MAAK,KAAL,CAAW,MAAX,CAAkB,IAAlB,CAAT,KAFiB;;AAGzB,UAAM,aAAa;AACjB,WAAG,MAAM,KAAN,IAAe,MAAM,OAAN;AAClB,WAAG,MAAM,KAAN,IAAe,MAAM,OAAN;OAFd,CAHmB;AAOzB,uCAAuB,qBAAvB,CAA6C,UAA7C,EAAyD,IAAzD,EAPyB;KAAX;;;AArBZ,uBAeJ,uDAAsB,WAAW;AAC/B,WAAO,UAAU,MAAV,KAAqB,KAAK,KAAL,CAAW,MAAX,IACrB,UAAU,QAAV,KAAuB,KAAK,KAAL,CAAW,QAAX,IACvB,UAAU,YAAV,KAA2B,KAAK,KAAL,CAAW,YAAX,CAHH;;;AAf7B,uBA+BJ,2BAAS;iBAC0B,KAAK,KAAL,CAD1B;QACC,uBADD;QACS,mCADT;;AAEP,QAAM,SAAS,oBAAU,YAAV,CAAuB,OAAO,IAAP,CAAY,IAAZ,CAAhC,CAFC;;AAIP,QAAM,kBAAkB,0BAAW,qBAAX,EAAkC,KAAlC,EAAyC;AAC/D,qCAA+B,OAAO,OAAP,GAAiB,CAAjB;KADT,CAAlB,CAJC;;AAQP,WACE;;QAAI,eAAe,KAAK,aAAL,EAAnB;MACE;;UAAM,aAAW,MAAX,EAAqB,WAAW,eAAX,EAA4B,iBAAgB,6BAAhB,EAAvD;QAEE,sDAAY,OAAO,OAAO,IAAP,CAAY,MAAZ;AACP,uBAAa,OAAO,IAAP,CAAY,WAAZ;AACb,gBAAK,MAAL;AACA,iBAAO,OAAO,IAAP,CAAY,KAAZ,EAHnB,CAFF;QAOE,uCAAK,WAAU,cAAV,EAAyB,yBAAyB,EAAC,QAAQ,iCAAgB,OAAO,IAAP,CAAY,KAAZ,CAAxB,EAA1B,EAA9B,CAPF;QAUI,OAAO,OAAP,GAAiB,CAAjB,GACI;;YAAM,WAAU,SAAV,EAAN;UAA2B,OAAO,OAAP;SAD/B,GAEI,IAFJ;QAKF;AACE,wBAAc,YAAd;AACA,sBACE;;cAAK,WAAU,8BAAV,EAAL;YACE;;gBAAG,WAAU,0BAAV,EAAH;;aADF;WADF;AAKA,mBACE;;cAAK,WAAU,8BAAV,EAAL;YACE;;gBAAG,WAAU,qBAAV,EAAH;;aADF;WADF;AAKA,mBACE;;cAAK,WAAU,0BAAV,EAAL;YACE;;gBAAG,WAAU,qBAAV,EAAH;;aADF;WADF;SAZF,CAfF;OADF;KADF,CARO;;;SA/BL;;;WACG,YAAY;AACjB,YAAU,iBAAU,IAAV,CAAe,UAAf;AACV,UAAQ,iBAAU,MAAV,CAAiB,UAAjB;AACR,gBAAc,iBAAU,MAAV,CAAiB,UAAjB;;AAJZ,WAOG,eAAe;AACpB,gBAAc,qCAAkB,OAAlB;;AARZ,WAWG,eAAe;AACpB,QAAM,iBAAU,MAAV;;kBAoEK","file":"RecentItem.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { Container } from 'flux/utils';\nimport classnames from 'classnames';\nimport { FormattedMessage } from 'react-intl';\nimport PeerUtils from '../../utils/PeerUtils';\nimport { escapeWithEmoji } from '../../utils/EmojiUtils';\nimport confirm from '../../utils/confirm';\nimport { Link } from 'react-router';\n\nimport { AsyncActionStates } from '../../constants/ActorAppConstants';\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport DropdownActionCreators from '../../actions/DropdownActionCreators';\n\nimport UserStore from '../../stores/UserStore';\nimport ArchiveStore from '../../stores/ArchiveStore';\n\nimport AvatarItem from '../common/AvatarItem.react';\nimport Stateful from '../common/Stateful.react';\n\nclass RecentItem extends Component {\n  static propTypes = {\n    isActive: PropTypes.bool.isRequired,\n    dialog: PropTypes.object.isRequired,\n    archiveState: PropTypes.number.isRequired\n  };\n\n  static defaultProps = {\n    archiveState: AsyncActionStates.PENDING\n  };\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  shouldComponentUpdate(nextProps) {\n    return nextProps.dialog !== this.props.dialog ||\n           nextProps.isActive !== this.props.isActive ||\n           nextProps.archiveState !== this.props.archiveState;\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n    const { peer } = this.props.dialog.peer;\n    const contextPos = {\n      x: event.pageX || event.clientX,\n      y: event.pageY || event.clientY\n    };\n    DropdownActionCreators.openRecentContextMenu(contextPos, peer);\n  };\n\n  render() {\n    const { dialog, archiveState } = this.props;\n    const toPeer = PeerUtils.peerToString(dialog.peer.peer);\n\n    const recentClassName = classnames('sidebar__list__item', 'row', {\n      'sidebar__list__item--unread': dialog.counter > 0\n    });\n\n    return (\n      <li onContextMenu={this.onContextMenu}>\n        <Link to={`/im/${toPeer}`} className={recentClassName} activeClassName=\"sidebar__list__item--active\">\n\n          <AvatarItem image={dialog.peer.avatar}\n                      placeholder={dialog.peer.placeholder}\n                      size=\"tiny\"\n                      title={dialog.peer.title}/>\n\n          <div className=\"title col-xs\" dangerouslySetInnerHTML={{__html: escapeWithEmoji(dialog.peer.title)}}/>\n\n          {\n            dialog.counter > 0\n              ? <span className=\"counter\">{dialog.counter}</span>\n              : null\n          }\n\n          <Stateful\n            currentState={archiveState}\n            processing={\n              <div className=\"archive archive--in-progress\">\n                <i className=\"icon material-icons spin\">autorenew</i>\n              </div>\n            }\n            success={\n              <div className=\"archive archive--in-progress\">\n                <i className=\"icon material-icons\">check</i>\n              </div>\n            }\n            failure={\n              <div className=\"archive archive--failure\">\n                <i className=\"icon material-icons\">warning</i>\n              </div>\n            }\n          />\n        </Link>\n      </li>\n    );\n  }\n}\n\nexport default RecentItem;\n"]}