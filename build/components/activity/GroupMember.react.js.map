{"version":3,"sources":["../../../src/components/activity/GroupMember.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAIA;;;;AACA;;AACA;;AACA;;;;AACA;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;IAEM;;;AACJ,WADI,WACJ,CAAY,KAAZ,EAAmB;wCADf,aACe;;+DACjB,sBAAM,KAAN,GADiB;;UAyBnB,UAAU,UAAC,EAAD;aAAQ,+BAAqB,oBAArB,CAA0C,EAA1C;KAAR,CAzBS;;UA2BnB,SAAS,UAAC,GAAD,EAAM,GAAN,EAAc;UACb,WAAa,MAAK,KAAL,CAAb,SADa;;;AAGrB,6BAAQ,6DAAkB,IAAG,oBAAH,EAAwB,QAAQ,EAAC,MAAM,SAAS,KAAT,EAAf,EAA1C,CAAR,EAAqF,IAArF,CACE;eAAM,iCAAuB,UAAvB,CAAkC,GAAlC,EAAuC,GAAvC;OAAN,EACA,YAAM,EAAN,CAFF,CAHqB;KAAd,CA3BU;;;GAAnB;;AADI,cAWG,iCAAY;AACjB,WAAO,yBAAP,CADiB;;;AAXf,cAeG,yCAAe,WAAW,WAAW;AAC1C,WAAO;AACL,qBAAe,wBAAc,gBAAd,CAA+B,UAAU,QAAV,CAAmB,IAAnB,CAAwB,EAAxB,CAA9C;KADF,CAD0C;;;AAfxC,wBAqBJ,uDAAuB;QACb,WAAa,KAAK,KAAL,CAAb,SADa;;AAErB,4BAAc,kBAAd,CAAiC,SAAS,IAAT,CAAc,EAAd,CAAjC,CAFqB;;;AArBnB,wBAqCJ,2CAAiB;;;iBACoB,KAAK,KAAL,CADpB;QACP,2BADO;QACG,yBADH;QACY,iBADZ;QAEP,gBAAkB,KAAK,KAAL,CAAlB,cAFO;;AAGf,QAAM,OAAO,sBAAY,MAAZ,EAAP,CAHS;;AAKf,QAAI,CAAC,OAAD,IAAY,SAAS,IAAT,CAAc,EAAd,KAAqB,IAArB,EAA2B,OAAO,0CAAP,CAA3C;;AAEA,WACE;AACE,oBAAc,aAAd;AACA,eAAS;;UAAG,SAAS;mBAAM,OAAK,MAAL,CAAY,GAAZ,EAAiB,SAAS,IAAT,CAAc,EAAd;WAAvB,EAAZ;QAAsD,6DAAkB,IAAG,MAAH,EAAlB,CAAtD;OAAT;AACA,kBAAY;;UAAG,WAAU,qBAAV,EAAH;;OAAZ;AACA,eAAS;;UAAG,WAAU,gBAAV,EAAH;;OAAT;AACA,eAAS;;UAAG,WAAU,gBAAV,EAAH;;OAAT;KALF,CADF,CAPe;;;AArCb,wBAwDJ,2BAAS;;;QACC,WAAa,KAAK,KAAL,CAAb,SADD;;;AAGP,WACE;;QAAI,WAAU,oCAAV,EAAJ;MACE;;UAAG,SAAS;mBAAM,OAAK,OAAL,CAAa,SAAS,IAAT,CAAc,EAAd;WAAnB,EAAZ;QACE,sDAAY,OAAO,SAAS,MAAT;AACP,uBAAa,SAAS,WAAT;AACb,iBAAO,SAAS,KAAT,EAFnB,CADF;OADF;MAOE,qCAAG,SAAS;iBAAM,OAAK,OAAL,CAAa,SAAS,IAAT,CAAc,EAAd;SAAnB;AACT,iCAAyB,EAAC,QAAQ,iCAAgB,SAAS,KAAT,CAAxB,EAA1B,EADH,CAPF;MAUE;;UAAK,WAAU,qBAAV,EAAL;QACG,KAAK,cAAL,EADH;OAVF;KADF,CAHO;;;SAxDL;;;;;YAKG,YAAY;AACjB,YAAU,iBAAU,MAAV,CAAiB,UAAjB;AACV,WAAS,iBAAU,IAAV,CAAe,UAAf;AACT,OAAK,iBAAU,MAAV,CAAiB,UAAjB;;kBAsEM,iBAAU,MAAV,CAAiB,WAAjB,EAA8B,EAAC,MAAM,KAAN,EAAa,WAAW,IAAX,EAA5C","file":"GroupMember.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport { FormattedMessage } from 'react-intl';\nimport confirm from '../../utils/confirm'\nimport { escapeWithEmoji } from '../../utils/EmojiUtils'\nimport ActorClient from '../../utils/ActorClient'\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport KickUserActionCreators from '../../actions/KickUserActionCreators';\n\nimport KickUserStore from '../../stores/KickUserStore'\n\nimport AvatarItem from '../common/AvatarItem.react';\nimport Stateful from '../common/Stateful.react';\n\nclass GroupMember extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static propTypes = {\n    peerInfo: PropTypes.object.isRequired,\n    canKick: PropTypes.bool.isRequired,\n    gid: PropTypes.number.isRequired\n  };\n\n  static getStores() {\n    return [KickUserStore];\n  }\n\n  static calculateState(prevState, nextProps) {\n    return {\n      kickUserState: KickUserStore.getKickUserState(nextProps.peerInfo.peer.id)\n    };\n  }\n\n  componentWillUnmount() {\n    const { peerInfo } = this.props;\n    KickUserStore.resetKickUserState(peerInfo.peer.id);\n  }\n\n  onClick = (id) => DialogActionCreators.selectDialogPeerUser(id);\n\n  onKick = (gid, uid) => {\n    const { peerInfo } = this.props;\n\n    confirm(<FormattedMessage id=\"modal.confirm.kick\" values={{name: peerInfo.title}}/>).then(\n      () => KickUserActionCreators.kickMember(gid, uid),\n      () => {}\n    );\n  };\n\n  renderControls() {\n    const { peerInfo, canKick, gid } = this.props;\n    const { kickUserState } = this.state;\n    const myId = ActorClient.getUid();\n\n    if (!canKick || peerInfo.peer.id === myId) return <div/>;\n\n    return (\n      <Stateful\n        currentState={kickUserState}\n        pending={<a onClick={() => this.onKick(gid, peerInfo.peer.id)}><FormattedMessage id=\"kick\"/></a>}\n        processing={<i className=\"material-icons spin\">autorenew</i>}\n        success={<i className=\"material-icons\">check</i>}\n        failure={<i className=\"material-icons\">warning</i>}\n      />\n    );\n  }\n\n\n  render() {\n    const { peerInfo } = this.props;\n\n    return (\n      <li className=\"group_profile__members__list__item\">\n        <a onClick={() => this.onClick(peerInfo.peer.id)}>\n          <AvatarItem image={peerInfo.avatar}\n                      placeholder={peerInfo.placeholder}\n                      title={peerInfo.title}/>\n        </a>\n\n        <a onClick={() => this.onClick(peerInfo.peer.id)}\n           dangerouslySetInnerHTML={{__html: escapeWithEmoji(peerInfo.title)}}/>\n\n        <div className=\"controls pull-right\">\n          {this.renderControls()}\n        </div>\n      </li>\n    )\n  }\n}\n\nexport default Container.create(GroupMember, {pure: false, withProps: true});\n"]}