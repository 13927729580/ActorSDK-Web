{"version":3,"sources":["../../../src/components/activity/GroupMember.react.js"],"names":[],"mappings":"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","file":"GroupMember.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport { FormattedMessage } from 'react-intl';\nimport confirm from '../../utils/confirm'\nimport { escapeWithEmoji } from '../../utils/EmojiUtils'\nimport ActorClient from '../../utils/ActorClient'\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport KickUserActionCreators from '../../actions/KickUserActionCreators';\n\nimport KickUserStore from '../../stores/KickUserStore'\n\nimport AvatarItem from '../common/AvatarItem.react';\nimport Stateful from '../common/Stateful.react';\n\nclass GroupMember extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static propTypes = {\n    peerInfo: PropTypes.object.isRequired,\n    canKick: PropTypes.bool.isRequired,\n    gid: PropTypes.number.isRequired\n  };\n\n  static getStores() {\n    return [KickUserStore];\n  }\n\n  static calculateState(prevState, nextProps) {\n    return {\n      kickUserState: KickUserStore.getKickUserState(nextProps.peerInfo.peer.id)\n    };\n  }\n\n  componentWillUnmount() {\n    const { peerInfo } = this.props;\n    KickUserStore.resetKickUserState(peerInfo.peer.id);\n  }\n\n  onClick = (id) => DialogActionCreators.selectDialogPeerUser(id);\n\n  onKick = (gid, uid) => {\n    const { peerInfo } = this.props;\n\n    confirm(<FormattedMessage id=\"modal.confirm.kick\" values={{ name: peerInfo.title }}/>).then(\n      () => KickUserActionCreators.kickMember(gid, uid),\n      () => {}\n    );\n  };\n\n  renderControls() {\n    const { peerInfo, canKick, gid } = this.props;\n    const { kickUserState } = this.state;\n    const myId = ActorClient.getUid();\n\n    if (!canKick || peerInfo.peer.id === myId) return <div/>;\n\n    return (\n      <Stateful\n        currentState={kickUserState}\n        pending={<a onClick={() => this.onKick(gid, peerInfo.peer.id)}><FormattedMessage id=\"kick\"/></a>}\n        processing={<i className=\"material-icons spin\">autorenew</i>}\n        success={<i className=\"material-icons\">check</i>}\n        failure={<i className=\"material-icons\">warning</i>}\n      />\n    );\n  }\n\n\n  render() {\n    const { peerInfo } = this.props;\n\n    return (\n      <li className=\"group_profile__members__list__item\">\n        <a onClick={() => this.onClick(peerInfo.peer.id)}>\n          <AvatarItem image={peerInfo.avatar}\n                      placeholder={peerInfo.placeholder}\n                      title={peerInfo.title}/>\n        </a>\n\n        <a onClick={() => this.onClick(peerInfo.peer.id)}\n           dangerouslySetInnerHTML={{ __html: escapeWithEmoji(peerInfo.title) }}/>\n\n        <div className=\"controls pull-right\">\n          {this.renderControls()}\n        </div>\n      </li>\n    )\n  }\n}\n\nexport default Container.create(GroupMember, { pure: false, withProps: true });\n"]}