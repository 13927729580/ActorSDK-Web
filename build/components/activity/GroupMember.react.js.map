{"version":3,"sources":["../../../src/components/activity/GroupMember.react.js"],"names":[],"mappings":"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","file":"GroupMember.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport { FormattedMessage } from 'react-intl';\nimport confirm from '../../utils/confirm'\nimport { escapeWithEmoji } from '../../utils/EmojiUtils'\nimport ActorClient from '../../utils/ActorClient'\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport KickUserActionCreators from '../../actions/KickUserActionCreators';\n\nimport KickUserStore from '../../stores/KickUserStore'\n\nimport AvatarItem from '../common/AvatarItem.react';\nimport Stateful from '../common/Stateful';\n\nclass GroupMember extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static propTypes = {\n    peerInfo: PropTypes.object.isRequired,\n    canKick: PropTypes.bool.isRequired,\n    gid: PropTypes.number.isRequired\n  };\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [KickUserStore];\n  }\n\n  static calculateState(prevState, nextProps) {\n    return {\n      kickUserState: KickUserStore.getKickUserState(nextProps.peerInfo.peer.id)\n    };\n  }\n\n  componentWillUnmount() {\n    const { peerInfo } = this.props;\n    KickUserStore.resetKickUserState(peerInfo.peer.id);\n  };\n\n  onClick = (id) => DialogActionCreators.selectDialogPeerUser(id);\n\n  onKick = (gid, uid) => {\n    const { peerInfo } = this.props;\n    const { intl } = this.context;\n\n    confirm(<FormattedMessage id=\"modal.confirm.kick\" values={{name: peerInfo.title}}/>).then(\n      () => KickUserActionCreators.kickMember(gid, uid),\n      () => {}\n    );\n  };\n\n  render() {\n    const { peerInfo, canKick, gid } = this.props;\n    const { kickUserState } = this.state;\n    const { intl } = this.context;\n    const myId = ActorClient.getUid();\n\n    let controls;\n    if (canKick && peerInfo.peer.id !== myId) {\n      controls = (\n        <div className=\"controls pull-right\">\n          <Stateful.Root currentState={kickUserState}>\n            <Stateful.Pending>\n              <a onClick={() => this.onKick(gid, peerInfo.peer.id)}>{intl.messages['kick']}</a>\n            </Stateful.Pending>\n            <Stateful.Processing>\n              <i className=\"material-icons spin\">autorenew</i>\n            </Stateful.Processing>\n            <Stateful.Success>\n              <i className=\"material-icons\">check</i>\n            </Stateful.Success>\n            <Stateful.Failure>\n              <i className=\"material-icons\">warning</i>\n            </Stateful.Failure>\n          </Stateful.Root>\n        </div>\n      );\n    } else {\n      controls = null;\n    }\n\n    return (\n      <li className=\"group_profile__members__list__item\">\n        <a onClick={() => this.onClick(peerInfo.peer.id)}>\n          <AvatarItem image={peerInfo.avatar}\n                      placeholder={peerInfo.placeholder}\n                      title={peerInfo.title}/>\n        </a>\n\n        <a onClick={() => this.onClick(peerInfo.peer.id)}\n           dangerouslySetInnerHTML={{__html: escapeWithEmoji(peerInfo.title)}}/>\n\n        {controls}\n      </li>\n    )\n  }\n}\n\nexport default Container.create(GroupMember, {pure: false, withProps: true});\n"]}